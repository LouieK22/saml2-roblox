diff --git a/node_modules/samlify/build/index.js b/node_modules/samlify/build/index.js
index 44f5eb7..ad6c7c4 100644
--- a/node_modules/samlify/build/index.js
+++ b/node_modules/samlify/build/index.js
@@ -1,27 +1,28 @@
 "use strict";
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.setSchemaValidator = exports.ServiceProviderInstance = exports.ServiceProvider = exports.IdentityProviderInstance = exports.IdentityProvider = exports.Extractor = exports.Constants = exports.SamlLib = exports.Utility = exports.SPMetadata = exports.IdPMetadata = void 0;
 // version <= 1.25
-var entity_idp_1 = require("./src/entity-idp");
+const entity_idp_1 = require("./src/entity-idp");
 exports.IdentityProvider = entity_idp_1.default;
-exports.IdentityProviderInstance = entity_idp_1.IdentityProvider;
-var entity_sp_1 = require("./src/entity-sp");
+Object.defineProperty(exports, "IdentityProviderInstance", { enumerable: true, get: function () { return entity_idp_1.IdentityProvider; } });
+const entity_sp_1 = require("./src/entity-sp");
 exports.ServiceProvider = entity_sp_1.default;
-exports.ServiceProviderInstance = entity_sp_1.ServiceProvider;
+Object.defineProperty(exports, "ServiceProviderInstance", { enumerable: true, get: function () { return entity_sp_1.ServiceProvider; } });
 var metadata_idp_1 = require("./src/metadata-idp");
-exports.IdPMetadata = metadata_idp_1.default;
+Object.defineProperty(exports, "IdPMetadata", { enumerable: true, get: function () { return metadata_idp_1.default; } });
 var metadata_sp_1 = require("./src/metadata-sp");
-exports.SPMetadata = metadata_sp_1.default;
+Object.defineProperty(exports, "SPMetadata", { enumerable: true, get: function () { return metadata_sp_1.default; } });
 var utility_1 = require("./src/utility");
-exports.Utility = utility_1.default;
+Object.defineProperty(exports, "Utility", { enumerable: true, get: function () { return utility_1.default; } });
 var libsaml_1 = require("./src/libsaml");
-exports.SamlLib = libsaml_1.default;
+Object.defineProperty(exports, "SamlLib", { enumerable: true, get: function () { return libsaml_1.default; } });
 // roadmap
 // new name convention in version >= 3.0
-var Constants = require("./src/urn");
+const Constants = require("./src/urn");
 exports.Constants = Constants;
-var Extractor = require("./src/extractor");
+const Extractor = require("./src/extractor");
 exports.Extractor = Extractor;
 // exposed methods for customising samlify
-var api_1 = require("./src/api");
-exports.setSchemaValidator = api_1.setSchemaValidator;
+const api_1 = require("./src/api");
+Object.defineProperty(exports, "setSchemaValidator", { enumerable: true, get: function () { return api_1.setSchemaValidator; } });
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/index.js.map b/node_modules/samlify/build/index.js.map
index d4e5a1c..ff216b4 100644
--- a/node_modules/samlify/build/index.js.map
+++ b/node_modules/samlify/build/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../index.ts"],"names":[],"mappings":";;AAAA,kBAAkB;AAClB,+CAAkG;AAmBhG,2BAnBK,oBAAgB,CAmBL;AAChB,mCApB6C,6BAAwB,CAoB7C;AAnB1B,6CAA8F;AAoB5F,0BApBK,mBAAe,CAoBL;AACf,kCArB2C,2BAAuB,CAqB3C;AAnBzB,mDAA4D;AAAnD,qCAAA,OAAO,CAAe;AAC/B,iDAA0D;AAAjD,mCAAA,OAAO,CAAc;AAC9B,yCAAmD;AAA1C,4BAAA,OAAO,CAAW;AAC3B,yCAAmD;AAA1C,4BAAA,OAAO,CAAW;AAC3B,UAAU;AACV,wCAAwC;AACxC,qCAAuC;AAOrC,8BAAS;AANX,2CAA6C;AAO3C,8BAAS;AALX,0CAA0C;AAC1C,iCAA+C;AAW7C,6BAXO,wBAAkB,CAWP"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../index.ts"],"names":[],"mappings":";;;AAAA,kBAAkB;AAClB,iDAAkG;AAmBhG,2BAnBK,oBAAgB,CAmBL;AAChB,yGApB6C,6BAAwB,OAoB7C;AAnB1B,+CAA8F;AAoB5F,0BApBK,mBAAe,CAoBL;AACf,wGArB2C,2BAAuB,OAqB3C;AAnBzB,mDAA4D;AAAnD,2GAAA,OAAO,OAAe;AAC/B,iDAA0D;AAAjD,yGAAA,OAAO,OAAc;AAC9B,yCAAmD;AAA1C,kGAAA,OAAO,OAAW;AAC3B,yCAAmD;AAA1C,kGAAA,OAAO,OAAW;AAC3B,UAAU;AACV,wCAAwC;AACxC,uCAAuC;AAOrC,8BAAS;AANX,6CAA6C;AAO3C,8BAAS;AALX,0CAA0C;AAC1C,mCAA+C;AAW7C,mGAXO,wBAAkB,OAWP"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/api.js b/node_modules/samlify/build/src/api.js
index e001c4f..808ccdc 100644
--- a/node_modules/samlify/build/src/api.js
+++ b/node_modules/samlify/build/src/api.js
@@ -1,6 +1,7 @@
 "use strict";
 Object.defineProperty(exports, "__esModule", { value: true });
-var context = {
+exports.setSchemaValidator = exports.getContext = void 0;
+const context = {
     validate: undefined
 };
 function getContext() {
diff --git a/node_modules/samlify/build/src/api.js.map b/node_modules/samlify/build/src/api.js.map
index a999650..bba1476 100644
--- a/node_modules/samlify/build/src/api.js.map
+++ b/node_modules/samlify/build/src/api.js.map
@@ -1 +1 @@
-{"version":3,"file":"api.js","sourceRoot":"","sources":["../../src/api.ts"],"names":[],"mappings":";;AAOA,IAAM,OAAO,GAAY;IACvB,QAAQ,EAAE,SAAS;CACpB,CAAC;AAEF,SAAgB,UAAU;IACxB,OAAO,OAAO,CAAC;AACjB,CAAC;AAFD,gCAEC;AAED,SAAgB,kBAAkB,CAAC,MAAwB;IAEzD,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,UAAU,EAAE;QACzC,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAC;KAC1F;IAED,8CAA8C;IAC9C,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;AAErC,CAAC;AATD,gDASC"}
\ No newline at end of file
+{"version":3,"file":"api.js","sourceRoot":"","sources":["../../src/api.ts"],"names":[],"mappings":";;;AAOA,MAAM,OAAO,GAAY;IACvB,QAAQ,EAAE,SAAS;CACpB,CAAC;AAEF,SAAgB,UAAU;IACxB,OAAO,OAAO,CAAC;AACjB,CAAC;AAFD,gCAEC;AAED,SAAgB,kBAAkB,CAAC,MAAwB;IAEzD,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,UAAU,EAAE;QACzC,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAC;KAC1F;IAED,8CAA8C;IAC9C,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;AAErC,CAAC;AATD,gDASC"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/binding-post.js b/node_modules/samlify/build/src/binding-post.js
index 18151b3..1b93bb0 100644
--- a/node_modules/samlify/build/src/binding-post.js
+++ b/node_modules/samlify/build/src/binding-post.js
@@ -4,58 +4,11 @@
 * @author tngan
 * @desc Binding-level API, declare the functions using POST binding
 */
-var __assign = (this && this.__assign) || function () {
-    __assign = Object.assign || function(t) {
-        for (var s, i = 1, n = arguments.length; i < n; i++) {
-            s = arguments[i];
-            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
-                t[p] = s[p];
-        }
-        return t;
-    };
-    return __assign.apply(this, arguments);
-};
-var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
-    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
-    return new (P || (P = Promise))(function (resolve, reject) {
-        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
-        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
-        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
-        step((generator = generator.apply(thisArg, _arguments || [])).next());
-    });
-};
-var __generator = (this && this.__generator) || function (thisArg, body) {
-    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
-    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
-    function verb(n) { return function (v) { return step([n, v]); }; }
-    function step(op) {
-        if (f) throw new TypeError("Generator is already executing.");
-        while (_) try {
-            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
-            if (y = 0, t) op = [op[0] & 2, t.value];
-            switch (op[0]) {
-                case 0: case 1: t = op; break;
-                case 4: _.label++; return { value: op[1], done: false };
-                case 5: _.label++; y = op[1]; op = [0]; continue;
-                case 7: op = _.ops.pop(); _.trys.pop(); continue;
-                default:
-                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
-                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
-                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
-                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
-                    if (t[2]) _.ops.pop();
-                    _.trys.pop(); continue;
-            }
-            op = body.call(thisArg, _);
-        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
-        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
-    }
-};
 Object.defineProperty(exports, "__esModule", { value: true });
-var urn_1 = require("./urn");
-var libsaml_1 = require("./libsaml");
-var utility_1 = require("./utility");
-var binding = urn_1.wording.binding;
+const urn_1 = require("./urn");
+const libsaml_1 = require("./libsaml");
+const utility_1 = require("./utility");
+const binding = urn_1.wording.binding;
 /**
 * @desc Generate a base64 encoded login request
 * @param  {string} referenceTagXPath           reference uri
@@ -63,20 +16,20 @@ var binding = urn_1.wording.binding;
 * @param  {function} customTagReplacement     used when developers have their own login response template
 */
 function base64LoginRequest(referenceTagXPath, entity, customTagReplacement) {
-    var metadata = { idp: entity.idp.entityMeta, sp: entity.sp.entityMeta };
-    var spSetting = entity.sp.entitySetting;
-    var id = '';
+    const metadata = { idp: entity.idp.entityMeta, sp: entity.sp.entityMeta };
+    const spSetting = entity.sp.entitySetting;
+    let id = '';
     if (metadata && metadata.idp && metadata.sp) {
-        var base = metadata.idp.getSingleSignOnService(binding.post);
-        var rawSamlRequest = void 0;
+        const base = metadata.idp.getSingleSignOnService(binding.post);
+        let rawSamlRequest;
         if (spSetting.loginRequestTemplate && customTagReplacement) {
-            var info = customTagReplacement(spSetting.loginRequestTemplate.context);
+            const info = customTagReplacement(spSetting.loginRequestTemplate.context);
             id = utility_1.get(info, 'id', null);
             rawSamlRequest = utility_1.get(info, 'context', null);
         }
         else {
-            var nameIDFormat = spSetting.nameIDFormat;
-            var selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
+            const nameIDFormat = spSetting.nameIDFormat;
+            const selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
             id = spSetting.generateID();
             rawSamlRequest = libsaml_1.default.replaceTagsByValue(libsaml_1.default.defaultLoginRequestTemplate.context, {
                 ID: id,
@@ -90,15 +43,15 @@ function base64LoginRequest(referenceTagXPath, entity, customTagReplacement) {
             });
         }
         if (metadata.idp.isWantAuthnRequestsSigned()) {
-            var privateKey = spSetting.privateKey, privateKeyPass = spSetting.privateKeyPass, signatureAlgorithm = spSetting.requestSignatureAlgorithm, transformationAlgorithms = spSetting.transformationAlgorithms;
+            const { privateKey, privateKeyPass, requestSignatureAlgorithm: signatureAlgorithm, transformationAlgorithms } = spSetting;
             return {
-                id: id,
+                id,
                 context: libsaml_1.default.constructSAMLSignature({
-                    referenceTagXPath: referenceTagXPath,
-                    privateKey: privateKey,
-                    privateKeyPass: privateKeyPass,
-                    signatureAlgorithm: signatureAlgorithm,
-                    transformationAlgorithms: transformationAlgorithms,
+                    referenceTagXPath,
+                    privateKey,
+                    privateKeyPass,
+                    signatureAlgorithm,
+                    transformationAlgorithms,
                     rawSamlMessage: rawSamlRequest,
                     signingCert: metadata.sp.getX509Certificate('signing'),
                     signatureConfig: spSetting.signatureConfig || {
@@ -110,7 +63,7 @@ function base64LoginRequest(referenceTagXPath, entity, customTagReplacement) {
         }
         // No need to embeded XML signature
         return {
-            id: id,
+            id,
             context: utility_1.default.base64Encode(rawSamlRequest),
         };
     }
@@ -124,118 +77,135 @@ function base64LoginRequest(referenceTagXPath, entity, customTagReplacement) {
 * @param  {function} customTagReplacement     used when developers have their own login response template
 * @param  {boolean}  encryptThenSign           whether or not to encrypt then sign first (if signing). Defaults to sign-then-encrypt
 */
-function base64LoginResponse(requestInfo, entity, user, customTagReplacement, encryptThenSign) {
-    if (requestInfo === void 0) { requestInfo = {}; }
-    if (user === void 0) { user = {}; }
-    if (encryptThenSign === void 0) { encryptThenSign = false; }
-    return __awaiter(this, void 0, void 0, function () {
-        var idpSetting, spSetting, id, metadata, nameIDFormat, selectedNameIDFormat, base, rawSamlResponse, nowTime, spEntityID, fiveMinutesLaterTime, fiveMinutesLater, now, acl, tvalue, template, privateKey, privateKeyPass, signatureAlgorithm, config, context;
-        return __generator(this, function (_a) {
-            switch (_a.label) {
-                case 0:
-                    idpSetting = entity.idp.entitySetting;
-                    spSetting = entity.sp.entitySetting;
-                    id = idpSetting.generateID();
-                    metadata = {
-                        idp: entity.idp.entityMeta,
-                        sp: entity.sp.entityMeta,
-                    };
-                    nameIDFormat = idpSetting.nameIDFormat;
-                    selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
-                    if (!(metadata && metadata.idp && metadata.sp)) return [3 /*break*/, 3];
-                    base = metadata.sp.getAssertionConsumerService(binding.post);
-                    rawSamlResponse = void 0;
-                    nowTime = new Date();
-                    spEntityID = metadata.sp.getEntityID();
-                    fiveMinutesLaterTime = new Date(nowTime.getTime());
-                    fiveMinutesLaterTime.setMinutes(fiveMinutesLaterTime.getMinutes() + 5);
-                    fiveMinutesLater = fiveMinutesLaterTime.toISOString();
-                    now = nowTime.toISOString();
-                    acl = metadata.sp.getAssertionConsumerService(binding.post);
-                    tvalue = {
-                        ID: id,
-                        AssertionID: idpSetting.generateID(),
-                        Destination: base,
-                        Audience: spEntityID,
-                        EntityID: spEntityID,
-                        SubjectRecipient: acl,
-                        Issuer: metadata.idp.getEntityID(),
-                        IssueInstant: now,
-                        AssertionConsumerServiceURL: acl,
-                        StatusCode: urn_1.StatusCode.Success,
-                        // can be customized
-                        ConditionsNotBefore: now,
-                        ConditionsNotOnOrAfter: fiveMinutesLater,
-                        SubjectConfirmationDataNotOnOrAfter: fiveMinutesLater,
-                        NameIDFormat: selectedNameIDFormat,
-                        NameID: user.email || '',
-                        InResponseTo: utility_1.get(requestInfo, 'extract.request.id', ''),
-                        AuthnStatement: '',
-                        AttributeStatement: '',
-                    };
-                    if (idpSetting.loginResponseTemplate && customTagReplacement) {
-                        template = customTagReplacement(idpSetting.loginResponseTemplate.context);
-                        rawSamlResponse = utility_1.get(template, 'context', null);
-                    }
-                    else {
-                        if (requestInfo !== null) {
-                            tvalue.InResponseTo = requestInfo.extract.request.id;
-                        }
-                        rawSamlResponse = libsaml_1.default.replaceTagsByValue(libsaml_1.default.defaultLoginResponseTemplate.context, tvalue);
-                    }
-                    privateKey = idpSetting.privateKey, privateKeyPass = idpSetting.privateKeyPass, signatureAlgorithm = idpSetting.requestSignatureAlgorithm;
-                    config = {
-                        privateKey: privateKey,
-                        privateKeyPass: privateKeyPass,
-                        signatureAlgorithm: signatureAlgorithm,
-                        signingCert: metadata.idp.getX509Certificate('signing'),
-                        isBase64Output: false,
-                    };
-                    // step: sign assertion ? -> encrypted ? -> sign message ?
-                    if (metadata.sp.isWantAssertionsSigned()) {
-                        // console.debug('sp wants assertion signed');
-                        rawSamlResponse = libsaml_1.default.constructSAMLSignature(__assign(__assign({}, config), { rawSamlMessage: rawSamlResponse, transformationAlgorithms: spSetting.transformationAlgorithms, referenceTagXPath: "/*[local-name(.)='Response']/*[local-name(.)='Assertion']", signatureConfig: {
-                                prefix: 'ds',
-                                location: { reference: "/*[local-name(.)='Response']/*[local-name(.)='Assertion']/*[local-name(.)='Issuer']", action: 'after' },
-                            } }));
-                    }
-                    // console.debug('after assertion signed', rawSamlResponse);
-                    // SAML response must be signed sign message first, then encrypt
-                    if (!encryptThenSign && (spSetting.wantMessageSigned || !metadata.sp.isWantAssertionsSigned())) {
-                        // console.debug('sign then encrypt and sign entire message');
-                        rawSamlResponse = libsaml_1.default.constructSAMLSignature(__assign(__assign({}, config), { rawSamlMessage: rawSamlResponse, isMessageSigned: true, transformationAlgorithms: spSetting.transformationAlgorithms, signatureConfig: spSetting.signatureConfig || {
-                                prefix: 'ds',
-                                location: { reference: "/*[local-name(.)='Response']/*[local-name(.)='Issuer']", action: 'after' },
-                            } }));
-                    }
-                    if (!idpSetting.isAssertionEncrypted) return [3 /*break*/, 2];
-                    return [4 /*yield*/, libsaml_1.default.encryptAssertion(entity.idp, entity.sp, rawSamlResponse)];
-                case 1:
-                    context = _a.sent();
-                    if (encryptThenSign) {
-                        //need to decode it
-                        rawSamlResponse = utility_1.default.base64Decode(context);
-                    }
-                    else {
-                        return [2 /*return*/, Promise.resolve({ id: id, context: context })];
-                    }
-                    _a.label = 2;
-                case 2:
-                    //sign after encrypting
-                    if (encryptThenSign && (spSetting.wantMessageSigned || !metadata.sp.isWantAssertionsSigned())) {
-                        rawSamlResponse = libsaml_1.default.constructSAMLSignature(__assign(__assign({}, config), { rawSamlMessage: rawSamlResponse, isMessageSigned: true, transformationAlgorithms: spSetting.transformationAlgorithms, signatureConfig: spSetting.signatureConfig || {
-                                prefix: 'ds',
-                                location: { reference: "/*[local-name(.)='Response']/*[local-name(.)='Issuer']", action: 'after' },
-                            } }));
-                    }
-                    return [2 /*return*/, Promise.resolve({
-                            id: id,
-                            context: utility_1.default.base64Encode(rawSamlResponse),
-                        })];
-                case 3: throw new Error('ERR_GENERATE_POST_LOGIN_RESPONSE_MISSING_METADATA');
+async function base64LoginResponse(requestInfo = {}, entity, user = {}, customTagReplacement, encryptThenSign = false) {
+    const idpSetting = entity.idp.entitySetting;
+    const spSetting = entity.sp.entitySetting;
+    const id = idpSetting.generateID();
+    const metadata = {
+        idp: entity.idp.entityMeta,
+        sp: entity.sp.entityMeta,
+    };
+    const nameIDFormat = idpSetting.nameIDFormat;
+    const selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
+    if (metadata && metadata.idp && metadata.sp) {
+        const base = metadata.sp.getAssertionConsumerService(binding.post);
+        let rawSamlResponse;
+        const nowTime = new Date();
+        const spEntityID = metadata.sp.getEntityID();
+        const fiveMinutesLaterTime = new Date(nowTime.getTime());
+        fiveMinutesLaterTime.setMinutes(fiveMinutesLaterTime.getMinutes() + 5);
+        const fiveMinutesLater = fiveMinutesLaterTime.toISOString();
+        const now = nowTime.toISOString();
+        const acl = metadata.sp.getAssertionConsumerService(binding.post);
+        const tvalue = {
+            ID: id,
+            AssertionID: idpSetting.generateID(),
+            Destination: base,
+            Audience: spEntityID,
+            EntityID: spEntityID,
+            SubjectRecipient: acl,
+            Issuer: metadata.idp.getEntityID(),
+            IssueInstant: now,
+            AssertionConsumerServiceURL: acl,
+            StatusCode: urn_1.StatusCode.Success,
+            // can be customized
+            ConditionsNotBefore: now,
+            ConditionsNotOnOrAfter: fiveMinutesLater,
+            SubjectConfirmationDataNotOnOrAfter: fiveMinutesLater,
+            NameIDFormat: selectedNameIDFormat,
+            NameID: user.email || '',
+            InResponseTo: utility_1.get(requestInfo, 'extract.request.id', ''),
+            AuthnStatement: '<saml:AuthnStatement AuthnInstant="{IssueInstant}"> <saml:AuthnContext><saml:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified</saml:AuthnContextClassRef></saml:AuthnContext></saml:AuthnStatement>',
+            AttributeStatement: '',
+        };
+        if (idpSetting.loginResponseTemplate && customTagReplacement) {
+            const template = customTagReplacement(idpSetting.loginResponseTemplate.context);
+            rawSamlResponse = utility_1.get(template, 'context', null);
+        }
+        else {
+            if (requestInfo !== null) {
+                tvalue.InResponseTo = requestInfo.extract.request.id;
+            }
+            if (idpSetting?.loginResponseTemplate?.attributes) {
+                const attrUser = {};
+                Object.keys(user).forEach(key => {
+                    const value = user[key];
+                    attrUser[`attr${key.charAt(0).toUpperCase() + key.slice(1)}`] = value;
+                });
+                tvalue.AttributeStatement = libsaml_1.default.attributeStatementBuilder(idpSetting.loginResponseTemplate.attributes);
+                tvalue.AttributeStatement = libsaml_1.default.replaceTagsByValue(tvalue.AttributeStatement, attrUser);
+            }
+            tvalue.AuthnStatement = libsaml_1.default.replaceTagsByValue(tvalue.AuthnStatement, tvalue);
+            rawSamlResponse = libsaml_1.default.replaceTagsByValue(libsaml_1.default.defaultLoginResponseTemplate.context, tvalue);
+        }
+        const { privateKey, privateKeyPass, requestSignatureAlgorithm: signatureAlgorithm } = idpSetting;
+        const config = {
+            privateKey,
+            privateKeyPass,
+            signatureAlgorithm,
+            signingCert: metadata.idp.getX509Certificate('signing'),
+            isBase64Output: false,
+        };
+        // step: sign assertion ? -> encrypted ? -> sign message ?
+        if (metadata.sp.isWantAssertionsSigned()) {
+            // console.debug('sp wants assertion signed');
+            rawSamlResponse = libsaml_1.default.constructSAMLSignature({
+                ...config,
+                rawSamlMessage: rawSamlResponse,
+                transformationAlgorithms: spSetting.transformationAlgorithms,
+                referenceTagXPath: "/*[local-name(.)='Response']/*[local-name(.)='Assertion']",
+                signatureConfig: {
+                    prefix: 'ds',
+                    location: { reference: "/*[local-name(.)='Response']/*[local-name(.)='Assertion']/*[local-name(.)='Issuer']", action: 'after' },
+                },
+            });
+        }
+        // console.debug('after assertion signed', rawSamlResponse);
+        // SAML response must be signed sign message first, then encrypt
+        if (!encryptThenSign && (spSetting.wantMessageSigned || !metadata.sp.isWantAssertionsSigned())) {
+            // console.debug('sign then encrypt and sign entire message');
+            rawSamlResponse = libsaml_1.default.constructSAMLSignature({
+                ...config,
+                rawSamlMessage: rawSamlResponse,
+                isMessageSigned: true,
+                transformationAlgorithms: spSetting.transformationAlgorithms,
+                signatureConfig: spSetting.signatureConfig || {
+                    prefix: 'ds',
+                    location: { reference: "/*[local-name(.)='Response']/*[local-name(.)='Issuer']", action: 'after' },
+                },
+            });
+        }
+        // console.debug('after message signed', rawSamlResponse);
+        if (idpSetting.isAssertionEncrypted) {
+            // console.debug('idp is configured to do encryption');
+            const context = await libsaml_1.default.encryptAssertion(entity.idp, entity.sp, rawSamlResponse);
+            if (encryptThenSign) {
+                //need to decode it
+                rawSamlResponse = utility_1.default.base64Decode(context);
+            }
+            else {
+                return Promise.resolve({ id, context });
             }
+        }
+        //sign after encrypting
+        if (encryptThenSign && (spSetting.wantMessageSigned || !metadata.sp.isWantAssertionsSigned())) {
+            rawSamlResponse = libsaml_1.default.constructSAMLSignature({
+                ...config,
+                rawSamlMessage: rawSamlResponse,
+                isMessageSigned: true,
+                transformationAlgorithms: spSetting.transformationAlgorithms,
+                signatureConfig: spSetting.signatureConfig || {
+                    prefix: 'ds',
+                    location: { reference: "/*[local-name(.)='Response']/*[local-name(.)='Issuer']", action: 'after' },
+                },
+            });
+        }
+        return Promise.resolve({
+            id,
+            context: utility_1.default.base64Encode(rawSamlResponse),
         });
-    });
+    }
+    throw new Error('ERR_GENERATE_POST_LOGIN_RESPONSE_MISSING_METADATA');
 }
 /**
 * @desc Generate a base64 encoded logout request
@@ -246,21 +216,21 @@ function base64LoginResponse(requestInfo, entity, user, customTagReplacement, en
 * @return {string} base64 encoded request
 */
 function base64LogoutRequest(user, referenceTagXPath, entity, customTagReplacement) {
-    var metadata = { init: entity.init.entityMeta, target: entity.target.entityMeta };
-    var initSetting = entity.init.entitySetting;
-    var nameIDFormat = initSetting.nameIDFormat;
-    var selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
-    var id = '';
+    const metadata = { init: entity.init.entityMeta, target: entity.target.entityMeta };
+    const initSetting = entity.init.entitySetting;
+    const nameIDFormat = initSetting.nameIDFormat;
+    const selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
+    let id = '';
     if (metadata && metadata.init && metadata.target) {
-        var rawSamlRequest = void 0;
+        let rawSamlRequest;
         if (initSetting.logoutRequestTemplate && customTagReplacement) {
-            var template = customTagReplacement(initSetting.logoutRequestTemplate.context);
+            const template = customTagReplacement(initSetting.logoutRequestTemplate.context);
             id = utility_1.get(template, 'id', null);
             rawSamlRequest = utility_1.get(template, 'context', null);
         }
         else {
             id = initSetting.generateID();
-            var tvalue = {
+            const tvalue = {
                 ID: id,
                 Destination: metadata.target.getSingleLogoutService(binding.redirect),
                 Issuer: metadata.init.getEntityID(),
@@ -273,15 +243,15 @@ function base64LogoutRequest(user, referenceTagXPath, entity, customTagReplaceme
         }
         if (entity.target.entitySetting.wantLogoutRequestSigned) {
             // Need to embeded XML signature
-            var privateKey = initSetting.privateKey, privateKeyPass = initSetting.privateKeyPass, signatureAlgorithm = initSetting.requestSignatureAlgorithm, transformationAlgorithms = initSetting.transformationAlgorithms;
+            const { privateKey, privateKeyPass, requestSignatureAlgorithm: signatureAlgorithm, transformationAlgorithms } = initSetting;
             return {
-                id: id,
+                id,
                 context: libsaml_1.default.constructSAMLSignature({
-                    referenceTagXPath: referenceTagXPath,
-                    privateKey: privateKey,
-                    privateKeyPass: privateKeyPass,
-                    signatureAlgorithm: signatureAlgorithm,
-                    transformationAlgorithms: transformationAlgorithms,
+                    referenceTagXPath,
+                    privateKey,
+                    privateKeyPass,
+                    signatureAlgorithm,
+                    transformationAlgorithms,
                     rawSamlMessage: rawSamlRequest,
                     signingCert: metadata.init.getX509Certificate('signing'),
                     signatureConfig: initSetting.signatureConfig || {
@@ -292,7 +262,7 @@ function base64LogoutRequest(user, referenceTagXPath, entity, customTagReplaceme
             };
         }
         return {
-            id: id,
+            id,
             context: utility_1.default.base64Encode(rawSamlRequest),
         };
     }
@@ -306,22 +276,22 @@ function base64LogoutRequest(user, referenceTagXPath, entity, customTagReplaceme
 * @param  {function} customTagReplacement     used when developers have their own login response template
 */
 function base64LogoutResponse(requestInfo, entity, customTagReplacement) {
-    var metadata = {
+    const metadata = {
         init: entity.init.entityMeta,
         target: entity.target.entityMeta,
     };
-    var id = '';
-    var initSetting = entity.init.entitySetting;
+    let id = '';
+    const initSetting = entity.init.entitySetting;
     if (metadata && metadata.init && metadata.target) {
-        var rawSamlResponse = void 0;
+        let rawSamlResponse;
         if (initSetting.logoutResponseTemplate) {
-            var template = customTagReplacement(initSetting.logoutResponseTemplate.context);
+            const template = customTagReplacement(initSetting.logoutResponseTemplate.context);
             id = template.id;
             rawSamlResponse = template.context;
         }
         else {
             id = initSetting.generateID();
-            var tvalue = {
+            const tvalue = {
                 ID: id,
                 Destination: metadata.target.getSingleLogoutService(binding.post),
                 EntityID: metadata.init.getEntityID(),
@@ -333,15 +303,15 @@ function base64LogoutResponse(requestInfo, entity, customTagReplacement) {
             rawSamlResponse = libsaml_1.default.replaceTagsByValue(libsaml_1.default.defaultLogoutResponseTemplate.context, tvalue);
         }
         if (entity.target.entitySetting.wantLogoutResponseSigned) {
-            var privateKey = initSetting.privateKey, privateKeyPass = initSetting.privateKeyPass, signatureAlgorithm = initSetting.requestSignatureAlgorithm, transformationAlgorithms = initSetting.transformationAlgorithms;
+            const { privateKey, privateKeyPass, requestSignatureAlgorithm: signatureAlgorithm, transformationAlgorithms } = initSetting;
             return {
-                id: id,
+                id,
                 context: libsaml_1.default.constructSAMLSignature({
                     isMessageSigned: true,
                     transformationAlgorithms: transformationAlgorithms,
-                    privateKey: privateKey,
-                    privateKeyPass: privateKeyPass,
-                    signatureAlgorithm: signatureAlgorithm,
+                    privateKey,
+                    privateKeyPass,
+                    signatureAlgorithm,
                     rawSamlMessage: rawSamlResponse,
                     signingCert: metadata.init.getX509Certificate('signing'),
                     signatureConfig: {
@@ -355,17 +325,17 @@ function base64LogoutResponse(requestInfo, entity, customTagReplacement) {
             };
         }
         return {
-            id: id,
+            id,
             context: utility_1.default.base64Encode(rawSamlResponse),
         };
     }
     throw new Error('ERR_GENERATE_POST_LOGOUT_RESPONSE_MISSING_METADATA');
 }
-var postBinding = {
-    base64LoginRequest: base64LoginRequest,
-    base64LoginResponse: base64LoginResponse,
-    base64LogoutRequest: base64LogoutRequest,
-    base64LogoutResponse: base64LogoutResponse,
+const postBinding = {
+    base64LoginRequest,
+    base64LoginResponse,
+    base64LogoutRequest,
+    base64LogoutResponse,
 };
 exports.default = postBinding;
 //# sourceMappingURL=binding-post.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/binding-post.js.map b/node_modules/samlify/build/src/binding-post.js.map
index a685b28..6b08d77 100644
--- a/node_modules/samlify/build/src/binding-post.js.map
+++ b/node_modules/samlify/build/src/binding-post.js.map
@@ -1 +1 @@
-{"version":3,"file":"binding-post.js","sourceRoot":"","sources":["../../src/binding-post.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"binding-post.js","sourceRoot":"","sources":["../../src/binding-post.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/binding-redirect.js b/node_modules/samlify/build/src/binding-redirect.js
index 8bac050..9c6412b 100644
--- a/node_modules/samlify/build/src/binding-redirect.js
+++ b/node_modules/samlify/build/src/binding-redirect.js
@@ -5,12 +5,12 @@ Object.defineProperty(exports, "__esModule", { value: true });
 * @author tngan
 * @desc Binding-level API, declare the functions using Redirect binding
 */
-var utility_1 = require("./utility");
-var libsaml_1 = require("./libsaml");
-var url = require("url");
-var urn_1 = require("./urn");
-var binding = urn_1.wording.binding;
-var urlParams = urn_1.wording.urlParams;
+const utility_1 = require("./utility");
+const libsaml_1 = require("./libsaml");
+const url = require("url");
+const urn_1 = require("./urn");
+const binding = urn_1.wording.binding;
+const urlParams = urn_1.wording.urlParams;
 /**
 * @private
 * @desc Helper of generating URL param/value pair
@@ -32,18 +32,18 @@ function pvPair(param, value, first) {
 * @return {string}
 */
 function buildRedirectURL(opts) {
-    var baseUrl = opts.baseUrl, type = opts.type, isSigned = opts.isSigned, context = opts.context, entitySetting = opts.entitySetting;
-    var _a = opts.relayState, relayState = _a === void 0 ? '' : _a;
-    var noParams = (url.parse(baseUrl).query || []).length === 0;
-    var queryParam = libsaml_1.default.getQueryParamByType(type);
+    const { baseUrl, type, isSigned, context, entitySetting, } = opts;
+    let { relayState = '' } = opts;
+    const noParams = (url.parse(baseUrl).query || []).length === 0;
+    const queryParam = libsaml_1.default.getQueryParamByType(type);
     // In general, this xmlstring is required to do deflate -> base64 -> urlencode
-    var samlRequest = encodeURIComponent(utility_1.default.base64Encode(utility_1.default.deflateString(context)));
+    const samlRequest = encodeURIComponent(utility_1.default.base64Encode(utility_1.default.deflateString(context)));
     if (relayState !== '') {
         relayState = pvPair(urlParams.relayState, encodeURIComponent(relayState));
     }
     if (isSigned) {
-        var sigAlg = pvPair(urlParams.sigAlg, encodeURIComponent(entitySetting.requestSignatureAlgorithm));
-        var octetString = samlRequest + relayState + sigAlg;
+        const sigAlg = pvPair(urlParams.sigAlg, encodeURIComponent(entitySetting.requestSignatureAlgorithm));
+        const octetString = samlRequest + relayState + sigAlg;
         return baseUrl + pvPair(queryParam, octetString, noParams) + pvPair(urlParams.signature, encodeURIComponent(libsaml_1.default.constructMessageSignature(queryParam + '=' + octetString, entitySetting.privateKey, entitySetting.privateKeyPass, undefined, entitySetting.requestSignatureAlgorithm)));
     }
     return baseUrl + pvPair(queryParam, samlRequest + relayState, noParams);
@@ -55,20 +55,20 @@ function buildRedirectURL(opts) {
 * @return {string} redirect URL
 */
 function loginRequestRedirectURL(entity, customTagReplacement) {
-    var metadata = { idp: entity.idp.entityMeta, sp: entity.sp.entityMeta };
-    var spSetting = entity.sp.entitySetting;
-    var id = '';
+    const metadata = { idp: entity.idp.entityMeta, sp: entity.sp.entityMeta };
+    const spSetting = entity.sp.entitySetting;
+    let id = '';
     if (metadata && metadata.idp && metadata.sp) {
-        var base = metadata.idp.getSingleSignOnService(binding.redirect);
-        var rawSamlRequest = void 0;
+        const base = metadata.idp.getSingleSignOnService(binding.redirect);
+        let rawSamlRequest;
         if (spSetting.loginRequestTemplate && customTagReplacement) {
-            var info = customTagReplacement(spSetting.loginRequestTemplate);
+            const info = customTagReplacement(spSetting.loginRequestTemplate);
             id = utility_1.get(info, 'id', null);
             rawSamlRequest = utility_1.get(info, 'context', null);
         }
         else {
-            var nameIDFormat = spSetting.nameIDFormat;
-            var selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
+            const nameIDFormat = spSetting.nameIDFormat;
+            const selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
             id = spSetting.generateID();
             rawSamlRequest = libsaml_1.default.replaceTagsByValue(libsaml_1.default.defaultLoginRequestTemplate.context, {
                 ID: id,
@@ -82,7 +82,7 @@ function loginRequestRedirectURL(entity, customTagReplacement) {
             });
         }
         return {
-            id: id,
+            id,
             context: buildRedirectURL({
                 context: rawSamlRequest,
                 type: urlParams.samlRequest,
@@ -103,15 +103,15 @@ function loginRequestRedirectURL(entity, customTagReplacement) {
 * @return {string} redirect URL
 */
 function logoutRequestRedirectURL(user, entity, relayState, customTagReplacement) {
-    var metadata = { init: entity.init.entityMeta, target: entity.target.entityMeta };
-    var initSetting = entity.init.entitySetting;
-    var id = initSetting.generateID();
-    var nameIDFormat = initSetting.nameIDFormat;
-    var selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
+    const metadata = { init: entity.init.entityMeta, target: entity.target.entityMeta };
+    const initSetting = entity.init.entitySetting;
+    let id = initSetting.generateID();
+    const nameIDFormat = initSetting.nameIDFormat;
+    const selectedNameIDFormat = Array.isArray(nameIDFormat) ? nameIDFormat[0] : nameIDFormat;
     if (metadata && metadata.init && metadata.target) {
-        var base = metadata.target.getSingleLogoutService(binding.redirect);
-        var rawSamlRequest = '';
-        var requiredTags = {
+        const base = metadata.target.getSingleLogoutService(binding.redirect);
+        let rawSamlRequest = '';
+        const requiredTags = {
             ID: id,
             Destination: base,
             EntityID: metadata.init.getEntityID(),
@@ -122,7 +122,7 @@ function logoutRequestRedirectURL(user, entity, relayState, customTagReplacement
             SessionIndex: user.sessionIndex,
         };
         if (initSetting.logoutRequestTemplate && customTagReplacement) {
-            var info = customTagReplacement(initSetting.logoutRequestTemplate, requiredTags);
+            const info = customTagReplacement(initSetting.logoutRequestTemplate, requiredTags);
             id = utility_1.get(info, 'id', null);
             rawSamlRequest = utility_1.get(info, 'context', null);
         }
@@ -130,10 +130,10 @@ function logoutRequestRedirectURL(user, entity, relayState, customTagReplacement
             rawSamlRequest = libsaml_1.default.replaceTagsByValue(libsaml_1.default.defaultLogoutRequestTemplate.context, requiredTags);
         }
         return {
-            id: id,
+            id,
             context: buildRedirectURL({
                 context: rawSamlRequest,
-                relayState: relayState,
+                relayState,
                 type: urlParams.logoutRequest,
                 isSigned: entity.target.entitySetting.wantLogoutRequestSigned,
                 entitySetting: initSetting,
@@ -150,22 +150,22 @@ function logoutRequestRedirectURL(user, entity, relayState, customTagReplacement
 * @param  {function} customTagReplacement     used when developers have their own login response template
 */
 function logoutResponseRedirectURL(requestInfo, entity, relayState, customTagReplacement) {
-    var metadata = {
+    const metadata = {
         init: entity.init.entityMeta,
         target: entity.target.entityMeta,
     };
-    var initSetting = entity.init.entitySetting;
-    var id = initSetting.generateID();
+    const initSetting = entity.init.entitySetting;
+    let id = initSetting.generateID();
     if (metadata && metadata.init && metadata.target) {
-        var base = metadata.target.getSingleLogoutService(binding.redirect);
-        var rawSamlResponse = void 0;
+        const base = metadata.target.getSingleLogoutService(binding.redirect);
+        let rawSamlResponse;
         if (initSetting.logoutResponseTemplate && customTagReplacement) {
-            var template = customTagReplacement(initSetting.logoutResponseTemplate);
+            const template = customTagReplacement(initSetting.logoutResponseTemplate);
             id = utility_1.get(template, 'id', null);
             rawSamlResponse = utility_1.get(template, 'context', null);
         }
         else {
-            var tvalue = {
+            const tvalue = {
                 ID: id,
                 Destination: base,
                 Issuer: metadata.init.getEntityID(),
@@ -179,23 +179,23 @@ function logoutResponseRedirectURL(requestInfo, entity, relayState, customTagRep
             rawSamlResponse = libsaml_1.default.replaceTagsByValue(libsaml_1.default.defaultLogoutResponseTemplate.context, tvalue);
         }
         return {
-            id: id,
+            id,
             context: buildRedirectURL({
                 baseUrl: base,
                 type: urlParams.logoutResponse,
                 isSigned: entity.target.entitySetting.wantLogoutResponseSigned,
                 context: rawSamlResponse,
                 entitySetting: initSetting,
-                relayState: relayState,
+                relayState,
             }),
         };
     }
     throw new Error('ERR_GENERATE_REDIRECT_LOGOUT_RESPONSE_MISSING_METADATA');
 }
-var redirectBinding = {
-    loginRequestRedirectURL: loginRequestRedirectURL,
-    logoutRequestRedirectURL: logoutRequestRedirectURL,
-    logoutResponseRedirectURL: logoutResponseRedirectURL,
+const redirectBinding = {
+    loginRequestRedirectURL,
+    logoutRequestRedirectURL,
+    logoutResponseRedirectURL,
 };
 exports.default = redirectBinding;
 //# sourceMappingURL=binding-redirect.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/binding-redirect.js.map b/node_modules/samlify/build/src/binding-redirect.js.map
index 3427a95..4364e0d 100644
--- a/node_modules/samlify/build/src/binding-redirect.js.map
+++ b/node_modules/samlify/build/src/binding-redirect.js.map
@@ -1 +1 @@
-{"version":3,"file":"binding-redirect.js","sourceRoot":"","sources":["../../src/binding-redirect.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"binding-redirect.js","sourceRoot":"","sources":["../../src/binding-redirect.ts"],"names":[],"mappings":";;AAAA;;;;EAIE;AACF,uCAAyC;AACzC,uCAAgC;AAIhC,2BAA2B;AAC3B,+BAA2C;AAE3C,MAAM,OAAO,GAAG,aAAO,CAAC,OAAO,CAAC;AAChC,MAAM,SAAS,GAAG,aAAO,CAAC,SAAS,CAAC;AAWpC;;;;;;;EAOE;AACF,SAAS,MAAM,CAAC,KAAa,EAAE,KAAa,EAAE,KAAe;IAC3D,OAAO,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,GAAG,GAAG,KAAK,CAAC;AAC5D,CAAC;AACD;;;;;;;;EAQE;AACF,SAAS,gBAAgB,CAAC,IAAyB;IACjD,MAAM,EACJ,OAAO,EACP,IAAI,EACJ,QAAQ,EACR,OAAO,EACP,aAAa,GACd,GAAG,IAAI,CAAC;IACT,IAAI,EAAE,UAAU,GAAG,EAAE,EAAE,GAAG,IAAI,CAAC;IAC/B,MAAM,QAAQ,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;IAC/D,MAAM,UAAU,GAAG,iBAAO,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;IACrD,8EAA8E;IAC9E,MAAM,WAAW,GAAG,kBAAkB,CAAC,iBAAO,CAAC,YAAY,CAAC,iBAAO,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC7F,IAAI,UAAU,KAAK,EAAE,EAAE;QACrB,UAAU,GAAG,MAAM,CAAC,SAAS,CAAC,UAAU,EAAE,kBAAkB,CAAC,UAAU,CAAC,CAAC,CAAC;KAC3E;IACD,IAAI,QAAQ,EAAE;QACZ,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,kBAAkB,CAAC,aAAa,CAAC,yBAAyB,CAAC,CAAC,CAAC;QACrG,MAAM,WAAW,GAAG,WAAW,GAAG,UAAU,GAAG,MAAM,CAAC;QACtD,OAAO,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,WAAW,EAAE,QAAQ,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,SAAS,EAAE,kBAAkB,CAAC,iBAAO,CAAC,yBAAyB,CAAC,UAAU,GAAG,GAAG,GAAG,WAAW,EAAE,aAAa,CAAC,UAAU,EAAE,aAAa,CAAC,cAAc,EAAE,SAAS,EAAE,aAAa,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC;KAC7R;IACD,OAAO,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,WAAW,GAAG,UAAU,EAAE,QAAQ,CAAC,CAAC;AAC1E,CAAC;AACD;;;;;EAKE;AACF,SAAS,uBAAuB,CAAC,MAA4B,EAAE,oBAA2D;IAExH,MAAM,QAAQ,GAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,EAAE,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC;IAC/E,MAAM,SAAS,GAAQ,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC;IAC/C,IAAI,EAAE,GAAW,EAAE,CAAC;IAEpB,IAAI,QAAQ,IAAI,QAAQ,CAAC,GAAG,IAAI,QAAQ,CAAC,EAAE,EAAE;QAC3C,MAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,CAAC,sBAAsB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACnE,IAAI,cAAsB,CAAC;QAC3B,IAAI,SAAS,CAAC,oBAAoB,IAAI,oBAAoB,EAAE;YAC1D,MAAM,IAAI,GAAG,oBAAoB,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;YAClE,EAAE,GAAG,aAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YAC3B,cAAc,GAAG,aAAG,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;SAC7C;aAAM;YACL,MAAM,YAAY,GAAG,SAAS,CAAC,YAAY,CAAC;YAC5C,MAAM,oBAAoB,GAAG,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;YAC1F,EAAE,GAAG,SAAS,CAAC,UAAU,EAAE,CAAC;YAC5B,cAAc,GAAG,iBAAO,CAAC,kBAAkB,CAAC,iBAAO,CAAC,2BAA2B,CAAC,OAAO,EAAE;gBACvF,EAAE,EAAE,EAAE;gBACN,WAAW,EAAE,IAAI;gBACjB,MAAM,EAAE,QAAQ,CAAC,EAAE,CAAC,WAAW,EAAE;gBACjC,YAAY,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;gBACtC,YAAY,EAAE,oBAAoB;gBAClC,2BAA2B,EAAE,QAAQ,CAAC,EAAE,CAAC,2BAA2B,CAAC,OAAO,CAAC,IAAI,CAAC;gBAClF,QAAQ,EAAE,QAAQ,CAAC,EAAE,CAAC,WAAW,EAAE;gBACnC,WAAW,EAAE,SAAS,CAAC,WAAW;aAC5B,CAAC,CAAC;SACX;QACD,OAAO;YACL,EAAE;YACF,OAAO,EAAE,gBAAgB,CAAC;gBACxB,OAAO,EAAE,cAAc;gBACvB,IAAI,EAAE,SAAS,CAAC,WAAW;gBAC3B,QAAQ,EAAE,QAAQ,CAAC,EAAE,CAAC,oBAAoB,EAAE;gBAC5C,aAAa,EAAE,SAAS;gBACxB,OAAO,EAAE,IAAI;gBACb,UAAU,EAAE,SAAS,CAAC,UAAU;aACjC,CAAC;SACH,CAAC;KACH;IACD,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAC;AAC1E,CAAC;AACD;;;;;;EAME;AACF,SAAS,wBAAwB,CAAC,IAAI,EAAE,MAAM,EAAE,UAAmB,EAAE,oBAAyE;IAC5I,MAAM,QAAQ,GAAG,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;IACpF,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9C,IAAI,EAAE,GAAW,WAAW,CAAC,UAAU,EAAE,CAAC;IAC1C,MAAM,YAAY,GAAG,WAAW,CAAC,YAAY,CAAC;IAC9C,MAAM,oBAAoB,GAAG,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;IAE1F,IAAI,QAAQ,IAAI,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAE;QAChD,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,sBAAsB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACtE,IAAI,cAAc,GAAW,EAAE,CAAC;QAChC,MAAM,YAAY,GAAG;YACnB,EAAE,EAAE,EAAE;YACN,WAAW,EAAE,IAAI;YACjB,QAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE;YACrC,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE;YACnC,YAAY,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;YACtC,YAAY,EAAE,oBAAoB;YAClC,MAAM,EAAE,IAAI,CAAC,YAAY;YACzB,YAAY,EAAE,IAAI,CAAC,YAAY;SAChC,CAAC;QACF,IAAI,WAAW,CAAC,qBAAqB,IAAI,oBAAoB,EAAE;YAC7D,MAAM,IAAI,GAAG,oBAAoB,CAAC,WAAW,CAAC,qBAAqB,EAAE,YAAY,CAAC,CAAC;YACnF,EAAE,GAAG,aAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YAC3B,cAAc,GAAG,aAAG,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;SAC7C;aAAM;YACL,cAAc,GAAG,iBAAO,CAAC,kBAAkB,CAAC,iBAAO,CAAC,4BAA4B,CAAC,OAAO,EAAE,YAAmB,CAAC,CAAC;SAChH;QACD,OAAO;YACL,EAAE;YACF,OAAO,EAAE,gBAAgB,CAAC;gBACxB,OAAO,EAAE,cAAc;gBACvB,UAAU;gBACV,IAAI,EAAE,SAAS,CAAC,aAAa;gBAC7B,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,uBAAuB;gBAC7D,aAAa,EAAE,WAAW;gBAC1B,OAAO,EAAE,IAAI;aACd,CAAC;SACH,CAAC;KACH;IACD,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;AAC3E,CAAC;AACD;;;;;EAKE;AACF,SAAS,yBAAyB,CAAC,WAAgB,EAAE,MAAW,EAAE,UAAmB,EAAE,oBAA2D;IAChJ,MAAM,QAAQ,GAAG;QACf,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU;QAC5B,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,UAAU;KACjC,CAAC;IACF,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9C,IAAI,EAAE,GAAW,WAAW,CAAC,UAAU,EAAE,CAAC;IAC1C,IAAI,QAAQ,IAAI,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAE;QAChD,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,sBAAsB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACtE,IAAI,eAAuB,CAAC;QAC5B,IAAI,WAAW,CAAC,sBAAsB,IAAI,oBAAoB,EAAE;YAC9D,MAAM,QAAQ,GAAG,oBAAoB,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC;YAC1E,EAAE,GAAG,aAAG,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/B,eAAe,GAAG,aAAG,CAAC,QAAQ,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;SAClD;aAAM;YACL,MAAM,MAAM,GAAQ;gBAClB,EAAE,EAAE,EAAE;gBACN,WAAW,EAAE,IAAI;gBACjB,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE;gBACnC,QAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE;gBACrC,YAAY,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;gBACtC,UAAU,EAAE,eAAS,CAAC,UAAU,CAAC,OAAO;aACzC,CAAC;YACF,IAAI,WAAW,IAAI,WAAW,CAAC,OAAO,IAAI,WAAW,CAAC,OAAO,CAAC,aAAa,EAAE;gBAC3E,MAAM,CAAC,YAAY,GAAG,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,CAAC;aAC5D;YACD,eAAe,GAAG,iBAAO,CAAC,kBAAkB,CAAC,iBAAO,CAAC,6BAA6B,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;SACrG;QACD,OAAO;YACL,EAAE;YACF,OAAO,EAAE,gBAAgB,CAAC;gBACxB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,SAAS,CAAC,cAAc;gBAC9B,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,wBAAwB;gBAC9D,OAAO,EAAE,eAAe;gBACxB,aAAa,EAAE,WAAW;gBAC1B,UAAU;aACX,CAAC;SACH,CAAC;KACH;IACD,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;AAC5E,CAAC;AAED,MAAM,eAAe,GAAG;IACtB,uBAAuB;IACvB,wBAAwB;IACxB,yBAAyB;CAC1B,CAAC;AAEF,kBAAe,eAAe,CAAC"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/entity-idp.js b/node_modules/samlify/build/src/entity-idp.js
index f840bb5..bea5075 100644
--- a/node_modules/samlify/build/src/entity-idp.js
+++ b/node_modules/samlify/build/src/entity-idp.js
@@ -1,76 +1,17 @@
 "use strict";
-var __extends = (this && this.__extends) || (function () {
-    var extendStatics = function (d, b) {
-        extendStatics = Object.setPrototypeOf ||
-            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
-            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
-        return extendStatics(d, b);
-    };
-    return function (d, b) {
-        extendStatics(d, b);
-        function __() { this.constructor = d; }
-        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
-    };
-})();
-var __assign = (this && this.__assign) || function () {
-    __assign = Object.assign || function(t) {
-        for (var s, i = 1, n = arguments.length; i < n; i++) {
-            s = arguments[i];
-            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
-                t[p] = s[p];
-        }
-        return t;
-    };
-    return __assign.apply(this, arguments);
-};
-var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
-    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
-    return new (P || (P = Promise))(function (resolve, reject) {
-        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
-        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
-        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
-        step((generator = generator.apply(thisArg, _arguments || [])).next());
-    });
-};
-var __generator = (this && this.__generator) || function (thisArg, body) {
-    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
-    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
-    function verb(n) { return function (v) { return step([n, v]); }; }
-    function step(op) {
-        if (f) throw new TypeError("Generator is already executing.");
-        while (_) try {
-            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
-            if (y = 0, t) op = [op[0] & 2, t.value];
-            switch (op[0]) {
-                case 0: case 1: t = op; break;
-                case 4: _.label++; return { value: op[1], done: false };
-                case 5: _.label++; y = op[1]; op = [0]; continue;
-                case 7: op = _.ops.pop(); _.trys.pop(); continue;
-                default:
-                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
-                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
-                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
-                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
-                    if (t[2]) _.ops.pop();
-                    _.trys.pop(); continue;
-            }
-            op = body.call(thisArg, _);
-        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
-        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
-    }
-};
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.IdentityProvider = void 0;
 /**
 * @file entity-idp.ts
 * @author tngan
 * @desc  Declares the actions taken by identity provider
 */
-var entity_1 = require("./entity");
-var libsaml_1 = require("./libsaml");
-var urn_1 = require("./urn");
-var binding_post_1 = require("./binding-post");
-var flow_1 = require("./flow");
-var utility_1 = require("./utility");
+const entity_1 = require("./entity");
+const libsaml_1 = require("./libsaml");
+const urn_1 = require("./urn");
+const binding_post_1 = require("./binding-post");
+const flow_1 = require("./flow");
+const utility_1 = require("./utility");
 /**
  * Identity prvider can be configured using either metadata importing or idpSetting
  */
@@ -81,31 +22,31 @@ exports.default = default_1;
 /**
  * Identity prvider can be configured using either metadata importing or idpSetting
  */
-var IdentityProvider = /** @class */ (function (_super) {
-    __extends(IdentityProvider, _super);
-    function IdentityProvider(idpSetting) {
-        var _this = this;
-        var defaultIdpEntitySetting = {
+class IdentityProvider extends entity_1.default {
+    constructor(idpSetting) {
+        const defaultIdpEntitySetting = {
             wantAuthnRequestsSigned: false,
             tagPrefix: {
                 encryptedAssertion: 'saml',
             },
         };
-        var entitySetting = Object.assign(defaultIdpEntitySetting, idpSetting);
+        const entitySetting = Object.assign(defaultIdpEntitySetting, idpSetting);
         // build attribute part
         if (idpSetting.loginResponseTemplate) {
             if (utility_1.isString(idpSetting.loginResponseTemplate.context) && Array.isArray(idpSetting.loginResponseTemplate.attributes)) {
-                var replacement = {
+                const replacement = {
                     AttributeStatement: libsaml_1.default.attributeStatementBuilder(idpSetting.loginResponseTemplate.attributes),
                 };
-                entitySetting.loginResponseTemplate = __assign(__assign({}, entitySetting.loginResponseTemplate), { context: libsaml_1.default.replaceTagsByValue(entitySetting.loginResponseTemplate.context, replacement) });
+                entitySetting.loginResponseTemplate = {
+                    ...entitySetting.loginResponseTemplate,
+                    context: libsaml_1.default.replaceTagsByValue(entitySetting.loginResponseTemplate.context, replacement),
+                };
             }
             else {
                 console.warn('Invalid login response template');
             }
         }
-        _this = _super.call(this, entitySetting, 'idp') || this;
-        return _this;
+        super(entitySetting, 'idp');
     }
     /**
     * @desc  Generates the login response for developers to design their own method
@@ -116,34 +57,30 @@ var IdentityProvider = /** @class */ (function (_super) {
     * @param  customTagReplacement      used when developers have their own login response template
     * @param  encryptThenSign           whether or not to encrypt then sign first (if signing)
     */
-    IdentityProvider.prototype.createLoginResponse = function (sp, requestInfo, binding, user, customTagReplacement, encryptThenSign) {
-        return __awaiter(this, void 0, void 0, function () {
-            var protocol, context;
-            return __generator(this, function (_a) {
-                switch (_a.label) {
-                    case 0:
-                        protocol = urn_1.namespace.binding[binding];
-                        if (!(protocol === urn_1.namespace.binding.post)) return [3 /*break*/, 2];
-                        return [4 /*yield*/, binding_post_1.default.base64LoginResponse(requestInfo, {
-                                idp: this,
-                                sp: sp,
-                            }, user, customTagReplacement, encryptThenSign)];
-                    case 1:
-                        context = _a.sent();
-                        return [2 /*return*/, __assign(__assign({}, context), { entityEndpoint: sp.entityMeta.getAssertionConsumerService(binding), type: 'SAMLResponse' })];
-                    case 2: throw new Error('ERR_CREATE_RESPONSE_UNDEFINED_BINDING');
-                }
-            });
-        });
-    };
+    async createLoginResponse(sp, requestInfo, binding, user, customTagReplacement, encryptThenSign) {
+        const protocol = urn_1.namespace.binding[binding];
+        // can only support post binding for login response
+        if (protocol === urn_1.namespace.binding.post) {
+            const context = await binding_post_1.default.base64LoginResponse(requestInfo, {
+                idp: this,
+                sp,
+            }, user, customTagReplacement, encryptThenSign);
+            return {
+                ...context,
+                entityEndpoint: sp.entityMeta.getAssertionConsumerService(binding),
+                type: 'SAMLResponse'
+            };
+        }
+        throw new Error('ERR_CREATE_RESPONSE_UNDEFINED_BINDING');
+    }
     /**
      * Validation of the parsed URL parameters
      * @param sp ServiceProvider instance
      * @param binding Protocol binding
      * @param req RequesmessageSigningOrderst
      */
-    IdentityProvider.prototype.parseLoginRequest = function (sp, binding, req) {
-        var self = this;
+    parseLoginRequest(sp, binding, req) {
+        const self = this;
         return flow_1.flow({
             from: sp,
             self: self,
@@ -153,8 +90,7 @@ var IdentityProvider = /** @class */ (function (_super) {
             binding: binding,
             request: req
         });
-    };
-    return IdentityProvider;
-}(entity_1.default));
+    }
+}
 exports.IdentityProvider = IdentityProvider;
 //# sourceMappingURL=entity-idp.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/entity-idp.js.map b/node_modules/samlify/build/src/entity-idp.js.map
index c7a52b4..d9ed8f1 100644
--- a/node_modules/samlify/build/src/entity-idp.js.map
+++ b/node_modules/samlify/build/src/entity-idp.js.map
@@ -1 +1 @@
-{"version":3,"file":"entity-idp.js","sourceRoot":"","sources":["../../src/entity-idp.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;EAIE;AACF,mCAAoD;AAOpD,qCAAgC;AAChC,6BAAkC;AAClC,+CAAyC;AACzC,+BAA0C;AAC1C,qCAAqC;AAGrC;;GAEG;AACH,mBAAwB,KAA+B;IACrD,OAAO,IAAI,gBAAgB,CAAC,KAAK,CAAC,CAAC;AACrC,CAAC;AAFD,4BAEC;AAED;;GAEG;AACH;IAAsC,oCAAM;IAI1C,0BAAY,UAAoC;QAAhD,iBAuBC;QAtBC,IAAM,uBAAuB,GAAG;YAC9B,uBAAuB,EAAE,KAAK;YAC9B,SAAS,EAAE;gBACT,kBAAkB,EAAE,MAAM;aAC3B;SACF,CAAC;QACF,IAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,uBAAuB,EAAE,UAAU,CAAC,CAAC;QACzE,uBAAuB;QACvB,IAAI,UAAU,CAAC,qBAAqB,EAAE;YACpC,IAAI,kBAAQ,CAAC,UAAU,CAAC,qBAAqB,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,qBAAqB,CAAC,UAAU,CAAC,EAAE;gBACpH,IAAM,WAAW,GAAG;oBAClB,kBAAkB,EAAE,iBAAO,CAAC,yBAAyB,CAAC,UAAU,CAAC,qBAAqB,CAAC,UAAU,CAAC;iBACnG,CAAC;gBACF,aAAa,CAAC,qBAAqB,yBAC9B,aAAa,CAAC,qBAAqB,KACtC,OAAO,EAAE,iBAAO,CAAC,kBAAkB,CAAC,aAAa,CAAC,qBAAsB,CAAC,OAAO,EAAE,WAAW,CAAC,GAC/F,CAAC;aACH;iBAAM;gBACL,OAAO,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;aACjD;SACF;QACD,QAAA,kBAAM,aAAa,EAAE,KAAK,CAAC,SAAC;;IAC9B,CAAC;IAED;;;;;;;;MAQE;IACW,8CAAmB,GAAhC,UACE,EAAmB,EACnB,WAAmC,EACnC,OAAe,EACf,IAA4B,EAC5B,oBAA2D,EAC3D,eAAyB;;;;;;wBAEnB,QAAQ,GAAG,eAAS,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;6BAExC,CAAA,QAAQ,KAAK,eAAS,CAAC,OAAO,CAAC,IAAI,CAAA,EAAnC,wBAAmC;wBACrB,qBAAM,sBAAW,CAAC,mBAAmB,CAAC,WAAW,EAAE;gCACjE,GAAG,EAAE,IAAI;gCACT,EAAE,IAAA;6BACH,EAAE,IAAI,EAAE,oBAAoB,EAAE,eAAe,CAAC,EAAA;;wBAHzC,OAAO,GAAG,SAG+B;wBAChD,4CACM,OAAO,KACV,cAAc,EAAG,EAAE,CAAC,UAAsC,CAAC,2BAA2B,CAAC,OAAO,CAAC,EAC/F,IAAI,EAAE,cAAc,KACpB;4BAEJ,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;;;;KAC1D;IAED;;;;;OAKG;IACH,4CAAiB,GAAjB,UAAkB,EAAmB,EAAE,OAAe,EAAE,GAAqB;QAC3E,IAAM,IAAI,GAAG,IAAI,CAAC;QAClB,OAAO,WAAI,CAAC;YACV,IAAI,EAAE,EAAE;YACR,IAAI,EAAE,IAAI;YACV,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,yBAAyB,EAAE;YAC3D,UAAU,EAAE,aAAa;YACzB,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,GAAG;SACb,CAAC,CAAC;IACL,CAAC;IACH,uBAAC;AAAD,CAAC,AAhFD,CAAsC,gBAAM,GAgF3C;AAhFY,4CAAgB"}
\ No newline at end of file
+{"version":3,"file":"entity-idp.js","sourceRoot":"","sources":["../../src/entity-idp.ts"],"names":[],"mappings":";;;AAAA;;;;EAIE;AACF,qCAAoD;AAOpD,uCAAgC;AAChC,+BAAkC;AAClC,iDAAyC;AACzC,iCAA0C;AAC1C,uCAAqC;AAGrC;;GAEG;AACH,mBAAwB,KAA+B;IACrD,OAAO,IAAI,gBAAgB,CAAC,KAAK,CAAC,CAAC;AACrC,CAAC;AAFD,4BAEC;AAED;;GAEG;AACH,MAAa,gBAAiB,SAAQ,gBAAM;IAI1C,YAAY,UAAoC;QAC9C,MAAM,uBAAuB,GAAG;YAC9B,uBAAuB,EAAE,KAAK;YAC9B,SAAS,EAAE;gBACT,kBAAkB,EAAE,MAAM;aAC3B;SACF,CAAC;QACF,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,uBAAuB,EAAE,UAAU,CAAC,CAAC;QACzE,uBAAuB;QACvB,IAAI,UAAU,CAAC,qBAAqB,EAAE;YACpC,IAAI,kBAAQ,CAAC,UAAU,CAAC,qBAAqB,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,qBAAqB,CAAC,UAAU,CAAC,EAAE;gBACpH,MAAM,WAAW,GAAG;oBAClB,kBAAkB,EAAE,iBAAO,CAAC,yBAAyB,CAAC,UAAU,CAAC,qBAAqB,CAAC,UAAU,CAAC;iBACnG,CAAC;gBACF,aAAa,CAAC,qBAAqB,GAAG;oBACpC,GAAG,aAAa,CAAC,qBAAqB;oBACtC,OAAO,EAAE,iBAAO,CAAC,kBAAkB,CAAC,aAAa,CAAC,qBAAsB,CAAC,OAAO,EAAE,WAAW,CAAC;iBAC/F,CAAC;aACH;iBAAM;gBACL,OAAO,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;aACjD;SACF;QACD,KAAK,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC;IAED;;;;;;;;MAQE;IACK,KAAK,CAAC,mBAAmB,CAC9B,EAAmB,EACnB,WAAmC,EACnC,OAAe,EACf,IAA4B,EAC5B,oBAA2D,EAC3D,eAAyB;QAEzB,MAAM,QAAQ,GAAG,eAAS,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAC5C,mDAAmD;QACnD,IAAI,QAAQ,KAAK,eAAS,CAAC,OAAO,CAAC,IAAI,EAAE;YACvC,MAAM,OAAO,GAAG,MAAM,sBAAW,CAAC,mBAAmB,CAAC,WAAW,EAAE;gBACjE,GAAG,EAAE,IAAI;gBACT,EAAE;aACH,EAAE,IAAI,EAAE,oBAAoB,EAAE,eAAe,CAAC,CAAC;YACjD,OAAO;gBACJ,GAAG,OAAO;gBACV,cAAc,EAAG,EAAE,CAAC,UAAsC,CAAC,2BAA2B,CAAC,OAAO,CAAC;gBAC/F,IAAI,EAAE,cAAc;aACrB,CAAC;SACH;QACD,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;IAC3D,CAAC;IAED;;;;;OAKG;IACH,iBAAiB,CAAC,EAAmB,EAAE,OAAe,EAAE,GAAqB;QAC3E,MAAM,IAAI,GAAG,IAAI,CAAC;QAClB,OAAO,WAAI,CAAC;YACV,IAAI,EAAE,EAAE;YACR,IAAI,EAAE,IAAI;YACV,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,yBAAyB,EAAE;YAC3D,UAAU,EAAE,aAAa;YACzB,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,GAAG;SACb,CAAC,CAAC;IACL,CAAC;CACF;AAhFD,4CAgFC"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/entity-sp.js b/node_modules/samlify/build/src/entity-sp.js
index 1623d26..876afdb 100644
--- a/node_modules/samlify/build/src/entity-sp.js
+++ b/node_modules/samlify/build/src/entity-sp.js
@@ -1,39 +1,16 @@
 "use strict";
-var __extends = (this && this.__extends) || (function () {
-    var extendStatics = function (d, b) {
-        extendStatics = Object.setPrototypeOf ||
-            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
-            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
-        return extendStatics(d, b);
-    };
-    return function (d, b) {
-        extendStatics(d, b);
-        function __() { this.constructor = d; }
-        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
-    };
-})();
-var __assign = (this && this.__assign) || function () {
-    __assign = Object.assign || function(t) {
-        for (var s, i = 1, n = arguments.length; i < n; i++) {
-            s = arguments[i];
-            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
-                t[p] = s[p];
-        }
-        return t;
-    };
-    return __assign.apply(this, arguments);
-};
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.ServiceProvider = void 0;
 /**
 * @file entity-sp.ts
 * @author tngan
 * @desc  Declares the actions taken by service provider
 */
-var entity_1 = require("./entity");
-var urn_1 = require("./urn");
-var binding_redirect_1 = require("./binding-redirect");
-var binding_post_1 = require("./binding-post");
-var flow_1 = require("./flow");
+const entity_1 = require("./entity");
+const urn_1 = require("./urn");
+const binding_redirect_1 = require("./binding-redirect");
+const binding_post_1 = require("./binding-post");
+const flow_1 = require("./flow");
 /*
  * @desc interface function
  */
@@ -46,21 +23,18 @@ exports.default = default_1;
 * @param  {object} spSettingimport { FlowResult } from '../types/src/flow.d';
 
 */
-var ServiceProvider = /** @class */ (function (_super) {
-    __extends(ServiceProvider, _super);
+class ServiceProvider extends entity_1.default {
     /**
     * @desc  Inherited from Entity
     * @param {object} spSetting    setting of service provider
     */
-    function ServiceProvider(spSetting) {
-        var _this = this;
-        var entitySetting = Object.assign({
+    constructor(spSetting) {
+        const entitySetting = Object.assign({
             authnRequestsSigned: false,
             wantAssertionsSigned: false,
             wantMessageSigned: false,
         }, spSetting);
-        _this = _super.call(this, entitySetting, 'sp') || this;
-        return _this;
+        super(entitySetting, 'sp');
     }
     /**
     * @desc  Generates the login request for developers to design their own method
@@ -68,31 +42,35 @@ var ServiceProvider = /** @class */ (function (_super) {
     * @param  {string}   binding                   protocol binding
     * @param  {function} customTagReplacement     used when developers have their own login response template
     */
-    ServiceProvider.prototype.createLoginRequest = function (idp, binding, customTagReplacement) {
-        if (binding === void 0) { binding = 'redirect'; }
-        var nsBinding = urn_1.namespace.binding;
-        var protocol = nsBinding[binding];
+    createLoginRequest(idp, binding = 'redirect', customTagReplacement) {
+        const nsBinding = urn_1.namespace.binding;
+        const protocol = nsBinding[binding];
         if (this.entityMeta.isAuthnRequestSigned() !== idp.entityMeta.isWantAuthnRequestsSigned()) {
             throw new Error('ERR_METADATA_CONFLICT_REQUEST_SIGNED_FLAG');
         }
         if (protocol === nsBinding.redirect) {
-            return binding_redirect_1.default.loginRequestRedirectURL({ idp: idp, sp: this }, customTagReplacement);
+            return binding_redirect_1.default.loginRequestRedirectURL({ idp, sp: this }, customTagReplacement);
         }
         if (protocol === nsBinding.post) {
-            var context = binding_post_1.default.base64LoginRequest("/*[local-name(.)='AuthnRequest']", { idp: idp, sp: this }, customTagReplacement);
-            return __assign(__assign({}, context), { relayState: this.entitySetting.relayState, entityEndpoint: idp.entityMeta.getSingleSignOnService(binding), type: 'SAMLRequest' });
+            const context = binding_post_1.default.base64LoginRequest("/*[local-name(.)='AuthnRequest']", { idp, sp: this }, customTagReplacement);
+            return {
+                ...context,
+                relayState: this.entitySetting.relayState,
+                entityEndpoint: idp.entityMeta.getSingleSignOnService(binding),
+                type: 'SAMLRequest',
+            };
         }
         // Will support artifact in the next release
         throw new Error('ERR_SP_LOGIN_REQUEST_UNDEFINED_BINDING');
-    };
+    }
     /**
     * @desc   Validation of the parsed the URL parameters
     * @param  {IdentityProvider}   idp             object of identity provider
     * @param  {string}   binding                   protocol binding
     * @param  {request}   req                      request
     */
-    ServiceProvider.prototype.parseLoginResponse = function (idp, binding, request) {
-        var self = this;
+    parseLoginResponse(idp, binding, request) {
+        const self = this;
         return flow_1.flow({
             from: idp,
             self: self,
@@ -102,8 +80,7 @@ var ServiceProvider = /** @class */ (function (_super) {
             binding: binding,
             request: request
         });
-    };
-    return ServiceProvider;
-}(entity_1.default));
+    }
+}
 exports.ServiceProvider = ServiceProvider;
 //# sourceMappingURL=entity-sp.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/entity-sp.js.map b/node_modules/samlify/build/src/entity-sp.js.map
index bc2fc3f..99bb3df 100644
--- a/node_modules/samlify/build/src/entity-sp.js.map
+++ b/node_modules/samlify/build/src/entity-sp.js.map
@@ -1 +1 @@
-{"version":3,"file":"entity-sp.js","sourceRoot":"","sources":["../../src/entity-sp.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;EAIE;AACF,mCAIkB;AAMlB,6BAAkC;AAClC,uDAAiD;AACjD,+CAAyC;AACzC,+BAA0C;AAE1C;;GAEG;AACH,mBAAwB,KAA8B;IACpD,OAAO,IAAI,eAAe,CAAC,KAAK,CAAC,CAAC;AACpC,CAAC;AAFD,4BAEC;AAED;;;;EAIE;AACF;IAAqC,mCAAM;IAGzC;;;MAGE;IACF,yBAAY,SAAkC;QAA9C,iBAOC;QANC,IAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC;YAClC,mBAAmB,EAAE,KAAK;YAC1B,oBAAoB,EAAE,KAAK;YAC3B,iBAAiB,EAAE,KAAK;SACzB,EAAE,SAAS,CAAC,CAAC;QACd,QAAA,kBAAM,aAAa,EAAE,IAAI,CAAC,SAAC;;IAC7B,CAAC;IAED;;;;;MAKE;IACK,4CAAkB,GAAzB,UACE,GAAqB,EACrB,OAAoB,EACpB,oBAA2D;QAD3D,wBAAA,EAAA,oBAAoB;QAGpB,IAAM,SAAS,GAAG,eAAS,CAAC,OAAO,CAAC;QACpC,IAAM,QAAQ,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,IAAI,CAAC,UAAU,CAAC,oBAAoB,EAAE,KAAK,GAAG,CAAC,UAAU,CAAC,yBAAyB,EAAE,EAAE;YACzF,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;SAC9D;QAED,IAAI,QAAQ,KAAK,SAAS,CAAC,QAAQ,EAAE;YACnC,OAAO,0BAAe,CAAC,uBAAuB,CAAC,EAAE,GAAG,KAAA,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,oBAAoB,CAAC,CAAC;SACzF;QAED,IAAI,QAAQ,KAAK,SAAS,CAAC,IAAI,EAAE;YAC/B,IAAM,OAAO,GAAG,sBAAW,CAAC,kBAAkB,CAAC,kCAAkC,EAAE,EAAE,GAAG,KAAA,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,oBAAoB,CAAC,CAAC;YAC5H,6BACK,OAAO,KACV,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,UAAU,EACzC,cAAc,EAAE,GAAG,CAAC,UAAU,CAAC,sBAAsB,CAAC,OAAO,CAAW,EACxE,IAAI,EAAE,aAAa,IACnB;SACH;QACD,4CAA4C;QAC5C,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,CAAC;IAC5D,CAAC;IAED;;;;;MAKE;IACK,4CAAkB,GAAzB,UAA0B,GAAG,EAAE,OAAO,EAAE,OAAyB;QAC/D,IAAM,IAAI,GAAG,IAAI,CAAC;QAClB,OAAO,WAAI,CAAC;YACV,IAAI,EAAE,GAAG;YACT,IAAI,EAAE,IAAI;YACV,cAAc,EAAE,IAAI;YACpB,UAAU,EAAE,cAAc;YAC1B,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC;IACL,CAAC;IAEH,sBAAC;AAAD,CAAC,AArED,CAAqC,gBAAM,GAqE1C;AArEY,0CAAe"}
\ No newline at end of file
+{"version":3,"file":"entity-sp.js","sourceRoot":"","sources":["../../src/entity-sp.ts"],"names":[],"mappings":";;;AAAA;;;;EAIE;AACF,qCAIkB;AAMlB,+BAAkC;AAClC,yDAAiD;AACjD,iDAAyC;AACzC,iCAA0C;AAE1C;;GAEG;AACH,mBAAwB,KAA8B;IACpD,OAAO,IAAI,eAAe,CAAC,KAAK,CAAC,CAAC;AACpC,CAAC;AAFD,4BAEC;AAED;;;;EAIE;AACF,MAAa,eAAgB,SAAQ,gBAAM;IAGzC;;;MAGE;IACF,YAAY,SAAkC;QAC5C,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC;YAClC,mBAAmB,EAAE,KAAK;YAC1B,oBAAoB,EAAE,KAAK;YAC3B,iBAAiB,EAAE,KAAK;SACzB,EAAE,SAAS,CAAC,CAAC;QACd,KAAK,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;IAC7B,CAAC;IAED;;;;;MAKE;IACK,kBAAkB,CACvB,GAAqB,EACrB,OAAO,GAAG,UAAU,EACpB,oBAA2D;QAE3D,MAAM,SAAS,GAAG,eAAS,CAAC,OAAO,CAAC;QACpC,MAAM,QAAQ,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,IAAI,CAAC,UAAU,CAAC,oBAAoB,EAAE,KAAK,GAAG,CAAC,UAAU,CAAC,yBAAyB,EAAE,EAAE;YACzF,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;SAC9D;QAED,IAAI,QAAQ,KAAK,SAAS,CAAC,QAAQ,EAAE;YACnC,OAAO,0BAAe,CAAC,uBAAuB,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,oBAAoB,CAAC,CAAC;SACzF;QAED,IAAI,QAAQ,KAAK,SAAS,CAAC,IAAI,EAAE;YAC/B,MAAM,OAAO,GAAG,sBAAW,CAAC,kBAAkB,CAAC,kCAAkC,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,oBAAoB,CAAC,CAAC;YAC5H,OAAO;gBACL,GAAG,OAAO;gBACV,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,UAAU;gBACzC,cAAc,EAAE,GAAG,CAAC,UAAU,CAAC,sBAAsB,CAAC,OAAO,CAAW;gBACxE,IAAI,EAAE,aAAa;aACpB,CAAC;SACH;QACD,4CAA4C;QAC5C,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,CAAC;IAC5D,CAAC;IAED;;;;;MAKE;IACK,kBAAkB,CAAC,GAAG,EAAE,OAAO,EAAE,OAAyB;QAC/D,MAAM,IAAI,GAAG,IAAI,CAAC;QAClB,OAAO,WAAI,CAAC;YACV,IAAI,EAAE,GAAG;YACT,IAAI,EAAE,IAAI;YACV,cAAc,EAAE,IAAI;YACpB,UAAU,EAAE,cAAc;YAC1B,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC;IACL,CAAC;CAEF;AArED,0CAqEC"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/entity.js b/node_modules/samlify/build/src/entity.js
index 62c334d..df3143a 100644
--- a/node_modules/samlify/build/src/entity.js
+++ b/node_modules/samlify/build/src/entity.js
@@ -1,34 +1,23 @@
 "use strict";
-var __assign = (this && this.__assign) || function () {
-    __assign = Object.assign || function(t) {
-        for (var s, i = 1, n = arguments.length; i < n; i++) {
-            s = arguments[i];
-            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
-                t[p] = s[p];
-        }
-        return t;
-    };
-    return __assign.apply(this, arguments);
-};
 Object.defineProperty(exports, "__esModule", { value: true });
 /**
 * @file entity.ts
 * @author tngan
 * @desc  An abstraction for identity provider and service provider.
 */
-var utility_1 = require("./utility");
-var urn_1 = require("./urn");
-var uuid = require("uuid");
-var metadata_idp_1 = require("./metadata-idp");
-var metadata_sp_1 = require("./metadata-sp");
-var binding_redirect_1 = require("./binding-redirect");
-var binding_post_1 = require("./binding-post");
-var flow_1 = require("./flow");
-var dataEncryptionAlgorithm = urn_1.algorithms.encryption.data;
-var keyEncryptionAlgorithm = urn_1.algorithms.encryption.key;
-var signatureAlgorithms = urn_1.algorithms.signature;
-var messageSigningOrders = urn_1.messageConfigurations.signingOrder;
-var defaultEntitySetting = {
+const utility_1 = require("./utility");
+const urn_1 = require("./urn");
+const uuid = require("uuid");
+const metadata_idp_1 = require("./metadata-idp");
+const metadata_sp_1 = require("./metadata-sp");
+const binding_redirect_1 = require("./binding-redirect");
+const binding_post_1 = require("./binding-post");
+const flow_1 = require("./flow");
+const dataEncryptionAlgorithm = urn_1.algorithms.encryption.data;
+const keyEncryptionAlgorithm = urn_1.algorithms.encryption.key;
+const signatureAlgorithms = urn_1.algorithms.signature;
+const messageSigningOrders = urn_1.messageConfigurations.signingOrder;
+const defaultEntitySetting = {
     wantLogoutResponseSigned: false,
     messageSigningOrder: messageSigningOrders.SIGN_THEN_ENCRYPT,
     wantLogoutRequestSigned: false,
@@ -37,17 +26,17 @@ var defaultEntitySetting = {
     requestSignatureAlgorithm: signatureAlgorithms.RSA_SHA256,
     dataEncryptionAlgorithm: dataEncryptionAlgorithm.AES_256,
     keyEncryptionAlgorithm: keyEncryptionAlgorithm.RSA_1_5,
-    generateID: function () { return ('_' + uuid.v4()); },
+    generateID: () => ('_' + uuid.v4()),
     relayState: '',
 };
-var Entity = /** @class */ (function () {
+class Entity {
     /**
     * @param entitySetting
     * @param entityMeta is the entity metadata, deprecated after 2.0
     */
-    function Entity(entitySetting, entityType) {
+    constructor(entitySetting, entityType) {
         this.entitySetting = Object.assign({}, defaultEntitySetting, entitySetting);
-        var metadata = entitySetting.metadata || entitySetting;
+        const metadata = entitySetting.metadata || entitySetting;
         switch (entityType) {
             case 'idp':
                 this.entityMeta = metadata_idp_1.default(metadata);
@@ -70,44 +59,44 @@ var Entity = /** @class */ (function () {
     * @desc  Returns the setting of entity
     * @return {object}
     */
-    Entity.prototype.getEntitySetting = function () {
+    getEntitySetting() {
         return this.entitySetting;
-    };
+    }
     /**
     * @desc  Returns the xml string of entity metadata
     * @return {string}
     */
-    Entity.prototype.getMetadata = function () {
+    getMetadata() {
         return this.entityMeta.getMetadata();
-    };
+    }
     /**
     * @desc  Exports the entity metadata into specified folder
     * @param  {string} exportFile indicates the file name
     */
-    Entity.prototype.exportMetadata = function (exportFile) {
+    exportMetadata(exportFile) {
         return this.entityMeta.exportMetadata(exportFile);
-    };
+    }
     /** * @desc  Verify fields with the one specified in metadata
     * @param  {string/[string]} field is a string or an array of string indicating the field value in SAML message
     * @param  {string} metaField is a string indicating the same field specified in metadata
     * @return {boolean} True/False
     */
-    Entity.prototype.verifyFields = function (field, metaField) {
+    verifyFields(field, metaField) {
         if (utility_1.isString(field)) {
             return field === metaField;
         }
         if (utility_1.isNonEmptyArray(field)) {
-            var res_1 = true;
-            field.forEach(function (f) {
+            let res = true;
+            field.forEach(f => {
                 if (f !== metaField) {
-                    res_1 = false;
+                    res = false;
                     return;
                 }
             });
-            return res_1;
+            return res;
         }
         return false;
-    };
+    }
     /** @desc   Generates the logout request for developers to design their own method
     * @param  {ServiceProvider} sp     object of service provider
     * @param  {string}   binding       protocol binding
@@ -115,8 +104,7 @@ var Entity = /** @class */ (function () {
     * @param  {string} relayState      the URL to which to redirect the user when logout is complete
     * @param  {function} customTagReplacement     used when developers have their own login response template
     */
-    Entity.prototype.createLogoutRequest = function (targetEntity, binding, user, relayState, customTagReplacement) {
-        if (relayState === void 0) { relayState = ''; }
+    createLogoutRequest(targetEntity, binding, user, relayState = '', customTagReplacement) {
         if (binding === urn_1.wording.binding.redirect) {
             return binding_redirect_1.default.logoutRequestRedirectURL(user, {
                 init: this,
@@ -124,14 +112,18 @@ var Entity = /** @class */ (function () {
             }, relayState, customTagReplacement);
         }
         if (binding === urn_1.wording.binding.post) {
-            var entityEndpoint = targetEntity.entityMeta.getSingleLogoutService(binding);
-            var context = binding_post_1.default.base64LogoutRequest(user, "/*[local-name(.)='LogoutRequest']", { init: this, target: targetEntity }, customTagReplacement);
-            return __assign(__assign({}, context), { relayState: relayState,
-                entityEndpoint: entityEndpoint, type: 'SAMLRequest' });
+            const entityEndpoint = targetEntity.entityMeta.getSingleLogoutService(binding);
+            const context = binding_post_1.default.base64LogoutRequest(user, "/*[local-name(.)='LogoutRequest']", { init: this, target: targetEntity }, customTagReplacement);
+            return {
+                ...context,
+                relayState,
+                entityEndpoint,
+                type: 'SAMLRequest',
+            };
         }
         // Will support artifact in the next release
         throw new Error('ERR_UNDEFINED_BINDING');
-    };
+    }
     /**
     * @desc  Generates the logout response for developers to design their own method
     * @param  {IdentityProvider} idp               object of identity provider
@@ -140,24 +132,28 @@ var Entity = /** @class */ (function () {
     * @param  {string} binding                     protocol binding
     * @param  {function} customTagReplacement                 used when developers have their own login response template
     */
-    Entity.prototype.createLogoutResponse = function (target, requestInfo, binding, relayState, customTagReplacement) {
-        if (relayState === void 0) { relayState = ''; }
-        var protocol = urn_1.namespace.binding[binding];
+    createLogoutResponse(target, requestInfo, binding, relayState = '', customTagReplacement) {
+        const protocol = urn_1.namespace.binding[binding];
         if (protocol === urn_1.namespace.binding.redirect) {
             return binding_redirect_1.default.logoutResponseRedirectURL(requestInfo, {
                 init: this,
-                target: target,
+                target,
             }, relayState, customTagReplacement);
         }
         if (protocol === urn_1.namespace.binding.post) {
-            var context = binding_post_1.default.base64LogoutResponse(requestInfo, {
+            const context = binding_post_1.default.base64LogoutResponse(requestInfo, {
                 init: this,
-                target: target,
+                target,
             }, customTagReplacement);
-            return __assign(__assign({}, context), { relayState: relayState, entityEndpoint: target.entityMeta.getSingleLogoutService(binding), type: 'SAMLResponse' });
+            return {
+                ...context,
+                relayState,
+                entityEndpoint: target.entityMeta.getSingleLogoutService(binding),
+                type: 'SAMLResponse',
+            };
         }
         throw new Error('ERR_CREATE_LOGOUT_RESPONSE_UNDEFINED_BINDING');
-    };
+    }
     /**
     * @desc   Validation of the parsed the URL parameters
     * @param  {IdentityProvider}   idp             object of identity provider
@@ -165,8 +161,8 @@ var Entity = /** @class */ (function () {
     * @param  {request}   req                      request
     * @return {Promise}
     */
-    Entity.prototype.parseLogoutRequest = function (from, binding, request) {
-        var self = this;
+    parseLogoutRequest(from, binding, request) {
+        const self = this;
         return flow_1.flow({
             from: from,
             self: self,
@@ -176,7 +172,7 @@ var Entity = /** @class */ (function () {
             binding: binding,
             request: request,
         });
-    };
+    }
     /**
     * @desc   Validation of the parsed the URL parameters
     * @param  {object} config                      config for the parser
@@ -184,8 +180,8 @@ var Entity = /** @class */ (function () {
     * @param  {request}   req                      request
     * @return {Promise}
     */
-    Entity.prototype.parseLogoutResponse = function (from, binding, request) {
-        var self = this;
+    parseLogoutResponse(from, binding, request) {
+        const self = this;
         return flow_1.flow({
             from: from,
             self: self,
@@ -195,8 +191,7 @@ var Entity = /** @class */ (function () {
             binding: binding,
             request: request
         });
-    };
-    return Entity;
-}());
+    }
+}
 exports.default = Entity;
 //# sourceMappingURL=entity.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/entity.js.map b/node_modules/samlify/build/src/entity.js.map
index 87c3f05..2de6368 100644
--- a/node_modules/samlify/build/src/entity.js.map
+++ b/node_modules/samlify/build/src/entity.js.map
@@ -1 +1 @@
-{"version":3,"file":"entity.js","sourceRoot":"","sources":["../../src/entity.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"entity.js","sourceRoot":"","sources":["../../src/entity.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/extractor.js b/node_modules/samlify/build/src/extractor.js
index 9f4d0b6..8e28865 100644
--- a/node_modules/samlify/build/src/extractor.js
+++ b/node_modules/samlify/build/src/extractor.js
@@ -1,31 +1,21 @@
 "use strict";
-var __assign = (this && this.__assign) || function () {
-    __assign = Object.assign || function(t) {
-        for (var s, i = 1, n = arguments.length; i < n; i++) {
-            s = arguments[i];
-            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
-                t[p] = s[p];
-        }
-        return t;
-    };
-    return __assign.apply(this, arguments);
-};
 Object.defineProperty(exports, "__esModule", { value: true });
-var xmldom_1 = require("xmldom");
-var xpath_1 = require("xpath");
-var utility_1 = require("./utility");
-var camelcase_1 = require("camelcase");
-var dom = xmldom_1.DOMParser;
+exports.extract = exports.logoutResponseFields = exports.logoutRequestFields = exports.loginResponseFields = exports.logoutResponseStatusFields = exports.loginResponseStatusFields = exports.loginRequestFields = void 0;
+const xmldom_1 = require("xmldom");
+const xpath_1 = require("xpath");
+const utility_1 = require("./utility");
+const camelcase_1 = require("camelcase");
+const dom = xmldom_1.DOMParser;
 function buildAbsoluteXPath(paths) {
-    return paths.reduce(function (currentPath, name) {
-        var appendedPath = currentPath;
-        var isWildcard = name.startsWith('~');
+    return paths.reduce((currentPath, name) => {
+        let appendedPath = currentPath;
+        const isWildcard = name.startsWith('~');
         if (isWildcard) {
-            var pathName = name.replace('~', '');
-            appendedPath = currentPath + ("/*[contains(local-name(), '" + pathName + "')]");
+            const pathName = name.replace('~', '');
+            appendedPath = currentPath + `/*[contains(local-name(), '${pathName}')]`;
         }
         if (!isWildcard) {
-            appendedPath = currentPath + ("/*[local-name(.)='" + name + "']");
+            appendedPath = currentPath + `/*[local-name(.)='${name}']`;
         }
         return appendedPath;
     }, '');
@@ -35,10 +25,10 @@ function buildAttributeXPath(attributes) {
         return '/text()';
     }
     if (attributes.length === 1) {
-        return "/@" + attributes[0];
+        return `/@${attributes[0]}`;
     }
-    var filters = attributes.map(function (attribute) { return "name()='" + attribute + "'"; }).join(' or ');
-    return "/@*[" + filters + "]";
+    const filters = attributes.map(attribute => `name()='${attribute}'`).join(' or ');
+    return `/@*[${filters}]`;
 }
 exports.loginRequestFields = [
     {
@@ -94,7 +84,7 @@ exports.logoutResponseStatusFields = [
         attributes: ['Value'],
     }
 ];
-exports.loginResponseFields = function (assertion) { return [
+const loginResponseFields = assertion => [
     {
         key: 'conditions',
         localPath: ['Assertion', 'Conditions'],
@@ -143,7 +133,8 @@ exports.loginResponseFields = function (assertion) { return [
         attributes: [],
         shortcut: assertion
     }
-]; };
+];
+exports.loginResponseFields = loginResponseFields;
 exports.logoutRequestFields = [
     {
         key: 'request',
@@ -186,20 +177,19 @@ exports.logoutResponseFields = [
     }
 ];
 function extract(context, fields) {
-    var rootDoc = new dom().parseFromString(context);
-    return fields.reduce(function (result, field) {
-        var _a, _b, _c, _d, _e, _f;
+    const rootDoc = new dom().parseFromString(context);
+    return fields.reduce((result, field) => {
         // get essential fields
-        var key = field.key;
-        var localPath = field.localPath;
-        var attributes = field.attributes;
-        var isEntire = field.context;
-        var shortcut = field.shortcut;
+        const key = field.key;
+        const localPath = field.localPath;
+        const attributes = field.attributes;
+        const isEntire = field.context;
+        const shortcut = field.shortcut;
         // get optional fields
-        var index = field.index;
-        var attributePath = field.attributePath;
+        const index = field.index;
+        const attributePath = field.attributePath;
         // set allowing overriding if there is a shortcut injected
-        var targetDoc = rootDoc;
+        let targetDoc = rootDoc;
         // if shortcut is used, then replace the doc
         // it's a design for overriding the doc used during runtime
         if (shortcut) {
@@ -216,18 +206,21 @@ function extract(context, fields) {
             attributes: []
           }
          */
-        if (localPath.every(function (path) { return Array.isArray(path); })) {
-            var multiXPaths = localPath
-                .map(function (path) {
+        if (localPath.every(path => Array.isArray(path))) {
+            const multiXPaths = localPath
+                .map(path => {
                 // not support attribute yet, so ignore it
-                return buildAbsoluteXPath(path) + "/text()";
+                return `${buildAbsoluteXPath(path)}/text()`;
             })
                 .join(' | ');
-            return __assign(__assign({}, result), (_a = {}, _a[key] = utility_1.uniq(xpath_1.select(multiXPaths, targetDoc).map(function (n) { return n.nodeValue; }).filter(utility_1.notEmpty)), _a));
+            return {
+                ...result,
+                [key]: utility_1.uniq(xpath_1.select(multiXPaths, targetDoc).map((n) => n.nodeValue).filter(utility_1.notEmpty))
+            };
         }
         // eo special case: multiple path
-        var baseXPath = buildAbsoluteXPath(localPath);
-        var attributeXPath = buildAttributeXPath(attributes);
+        const baseXPath = buildAbsoluteXPath(localPath);
+        const attributeXPath = buildAttributeXPath(attributes);
         // special case: get attributes where some are in child, some are in parent
         /*
           {
@@ -240,27 +233,27 @@ function extract(context, fields) {
         */
         if (index && attributePath) {
             // find the index in localpath
-            var indexPath = buildAttributeXPath(index);
-            var fullLocalXPath = "" + baseXPath + indexPath;
-            var parentNodes = xpath_1.select(baseXPath, targetDoc);
+            const indexPath = buildAttributeXPath(index);
+            const fullLocalXPath = `${baseXPath}${indexPath}`;
+            const parentNodes = xpath_1.select(baseXPath, targetDoc);
             // [uid, mail, edupersonaffiliation], ready for aggregate
-            var parentAttributes = xpath_1.select(fullLocalXPath, targetDoc).map(function (n) { return n.value; });
+            const parentAttributes = xpath_1.select(fullLocalXPath, targetDoc).map((n) => n.value);
             // [attribute, attributevalue]
-            var childXPath = buildAbsoluteXPath([utility_1.last(localPath)].concat(attributePath));
-            var childAttributeXPath = buildAttributeXPath(attributes);
-            var fullChildXPath_1 = "" + childXPath + childAttributeXPath;
+            const childXPath = buildAbsoluteXPath([utility_1.last(localPath)].concat(attributePath));
+            const childAttributeXPath = buildAttributeXPath(attributes);
+            const fullChildXPath = `${childXPath}${childAttributeXPath}`;
             // [ 'test', 'test@example.com', [ 'users', 'examplerole1' ] ]
-            var childAttributes = parentNodes.map(function (node) {
-                var nodeDoc = new dom().parseFromString(node.toString());
+            const childAttributes = parentNodes.map(node => {
+                const nodeDoc = new dom().parseFromString(node.toString());
                 if (attributes.length === 0) {
-                    var childValues = xpath_1.select(fullChildXPath_1, nodeDoc).map(function (n) { return n.nodeValue; });
+                    const childValues = xpath_1.select(fullChildXPath, nodeDoc).map((n) => n.nodeValue);
                     if (childValues.length === 1) {
                         return childValues[0];
                     }
                     return childValues;
                 }
                 if (attributes.length > 0) {
-                    var childValues = xpath_1.select(fullChildXPath_1, nodeDoc).map(function (n) { return n.value; });
+                    const childValues = xpath_1.select(fullChildXPath, nodeDoc).map((n) => n.value);
                     if (childValues.length === 1) {
                         return childValues[0];
                     }
@@ -269,8 +262,11 @@ function extract(context, fields) {
                 return null;
             });
             // aggregation
-            var obj = utility_1.zipObject(parentAttributes, childAttributes, false);
-            return __assign(__assign({}, result), (_b = {}, _b[key] = obj, _b));
+            const obj = utility_1.zipObject(parentAttributes, childAttributes, false);
+            return {
+                ...result,
+                [key]: obj
+            };
         }
         // case: fetch entire content, only allow one existence
         /*
@@ -282,15 +278,18 @@ function extract(context, fields) {
           }
         */
         if (isEntire) {
-            var node = xpath_1.select(baseXPath, targetDoc);
-            var value = null;
+            const node = xpath_1.select(baseXPath, targetDoc);
+            let value = null;
             if (node.length === 1) {
                 value = node[0].toString();
             }
             if (node.length > 1) {
-                value = node.map(function (n) { return n.toString(); });
+                value = node.map(n => n.toString());
             }
-            return __assign(__assign({}, result), (_c = {}, _c[key] = value, _c));
+            return {
+                ...result,
+                [key]: value
+            };
         }
         // case: multiple attribute
         /*
@@ -301,17 +300,20 @@ function extract(context, fields) {
           }
         */
         if (attributes.length > 1) {
-            var baseNode = xpath_1.select(baseXPath, targetDoc).map(function (n) { return n.toString(); });
-            var childXPath_1 = "" + buildAbsoluteXPath([utility_1.last(localPath)]) + attributeXPath;
-            var attributeValues = baseNode.map(function (node) {
-                var nodeDoc = new dom().parseFromString(node);
-                var values = xpath_1.select(childXPath_1, nodeDoc).reduce(function (r, n) {
+            const baseNode = xpath_1.select(baseXPath, targetDoc).map(n => n.toString());
+            const childXPath = `${buildAbsoluteXPath([utility_1.last(localPath)])}${attributeXPath}`;
+            const attributeValues = baseNode.map((node) => {
+                const nodeDoc = new dom().parseFromString(node);
+                const values = xpath_1.select(childXPath, nodeDoc).reduce((r, n) => {
                     r[camelcase_1.default(n.name)] = n.value;
                     return r;
                 }, {});
                 return values;
             });
-            return __assign(__assign({}, result), (_d = {}, _d[key] = attributeValues.length === 1 ? attributeValues[0] : attributeValues, _d));
+            return {
+                ...result,
+                [key]: attributeValues.length === 1 ? attributeValues[0] : attributeValues
+            };
         }
         // case: single attribute
         /*
@@ -322,9 +324,12 @@ function extract(context, fields) {
           }
         */
         if (attributes.length === 1) {
-            var fullPath = "" + baseXPath + attributeXPath;
-            var attributeValues = xpath_1.select(fullPath, targetDoc).map(function (n) { return n.value; });
-            return __assign(__assign({}, result), (_e = {}, _e[key] = attributeValues[0], _e));
+            const fullPath = `${baseXPath}${attributeXPath}`;
+            const attributeValues = xpath_1.select(fullPath, targetDoc).map((n) => n.value);
+            return {
+                ...result,
+                [key]: attributeValues[0]
+            };
         }
         // case: zero attribute
         /*
@@ -335,16 +340,19 @@ function extract(context, fields) {
           }
         */
         if (attributes.length === 0) {
-            var attributeValue = null;
-            var node = xpath_1.select(baseXPath, targetDoc);
+            let attributeValue = null;
+            const node = xpath_1.select(baseXPath, targetDoc);
             if (node.length === 1) {
-                var fullPath = "string(" + baseXPath + attributeXPath + ")";
+                const fullPath = `string(${baseXPath}${attributeXPath})`;
                 attributeValue = xpath_1.select(fullPath, targetDoc);
             }
             if (node.length > 1) {
-                attributeValue = node.map(function (n) { return n.firstChild.nodeValue; });
+                attributeValue = node.map((n) => n.firstChild.nodeValue);
             }
-            return __assign(__assign({}, result), (_f = {}, _f[key] = attributeValue, _f));
+            return {
+                ...result,
+                [key]: attributeValue
+            };
         }
         return result;
     }, {});
diff --git a/node_modules/samlify/build/src/extractor.js.map b/node_modules/samlify/build/src/extractor.js.map
index af8fd99..95ffa94 100644
--- a/node_modules/samlify/build/src/extractor.js.map
+++ b/node_modules/samlify/build/src/extractor.js.map
@@ -1 +1 @@
-{"version":3,"file":"extractor.js","sourceRoot":"","sources":["../../src/extractor.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"extractor.js","sourceRoot":"","sources":["../../src/extractor.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/flow.js b/node_modules/samlify/build/src/flow.js
index 2363c62..63740e0 100644
--- a/node_modules/samlify/build/src/flow.js
+++ b/node_modules/samlify/build/src/flow.js
@@ -1,64 +1,13 @@
 "use strict";
-var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
-    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
-    return new (P || (P = Promise))(function (resolve, reject) {
-        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
-        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
-        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
-        step((generator = generator.apply(thisArg, _arguments || [])).next());
-    });
-};
-var __generator = (this && this.__generator) || function (thisArg, body) {
-    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
-    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
-    function verb(n) { return function (v) { return step([n, v]); }; }
-    function step(op) {
-        if (f) throw new TypeError("Generator is already executing.");
-        while (_) try {
-            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
-            if (y = 0, t) op = [op[0] & 2, t.value];
-            switch (op[0]) {
-                case 0: case 1: t = op; break;
-                case 4: _.label++; return { value: op[1], done: false };
-                case 5: _.label++; y = op[1]; op = [0]; continue;
-                case 7: op = _.ops.pop(); _.trys.pop(); continue;
-                default:
-                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
-                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
-                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
-                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
-                    if (t[2]) _.ops.pop();
-                    _.trys.pop(); continue;
-            }
-            op = body.call(thisArg, _);
-        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
-        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
-    }
-};
-var __read = (this && this.__read) || function (o, n) {
-    var m = typeof Symbol === "function" && o[Symbol.iterator];
-    if (!m) return o;
-    var i = m.call(o), r, ar = [], e;
-    try {
-        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
-    }
-    catch (error) { e = { error: error }; }
-    finally {
-        try {
-            if (r && !r.done && (m = i["return"])) m.call(i);
-        }
-        finally { if (e) throw e.error; }
-    }
-    return ar;
-};
 Object.defineProperty(exports, "__esModule", { value: true });
-var utility_1 = require("./utility");
-var validator_1 = require("./validator");
-var libsaml_1 = require("./libsaml");
-var extractor_1 = require("./extractor");
-var urn_1 = require("./urn");
-var bindDict = urn_1.wording.binding;
-var urlParams = urn_1.wording.urlParams;
+exports.flow = void 0;
+const utility_1 = require("./utility");
+const validator_1 = require("./validator");
+const libsaml_1 = require("./libsaml");
+const extractor_1 = require("./extractor");
+const urn_1 = require("./urn");
+const bindDict = urn_1.wording.binding;
+const urlParams = urn_1.wording.urlParams;
 // get the default extractor fields based on the parserType
 function getDefaultExtractorFields(parserType, assertion) {
     switch (parserType) {
@@ -79,170 +28,144 @@ function getDefaultExtractorFields(parserType, assertion) {
     }
 }
 // proceed the redirect binding flow
-function redirectFlow(options) {
-    return __awaiter(this, void 0, void 0, function () {
-        var request, parserType, _a, checkSignature, from, query, octetString, sigAlg, signature, targetEntityMetadata, direction, content, xmlString, e_1, extractorFields, parseResult, base64Signature, decodeSigAlg, verified;
-        return __generator(this, function (_b) {
-            switch (_b.label) {
-                case 0:
-                    request = options.request, parserType = options.parserType, _a = options.checkSignature, checkSignature = _a === void 0 ? true : _a, from = options.from;
-                    query = request.query, octetString = request.octetString;
-                    sigAlg = query.SigAlg, signature = query.Signature;
-                    targetEntityMetadata = from.entityMeta;
-                    direction = libsaml_1.default.getQueryParamByType(parserType);
-                    content = query[direction];
-                    // query must contain the saml content
-                    if (content === undefined) {
-                        return [2 /*return*/, Promise.reject('ERR_REDIRECT_FLOW_BAD_ARGS')];
-                    }
-                    xmlString = utility_1.inflateString(decodeURIComponent(content));
-                    if (!(parserType === urlParams.samlRequest ||
-                        parserType === urlParams.logoutRequest ||
-                        parserType === urlParams.logoutResponse)) return [3 /*break*/, 4];
-                    _b.label = 1;
-                case 1:
-                    _b.trys.push([1, 3, , 4]);
-                    return [4 /*yield*/, libsaml_1.default.isValidXml(xmlString)];
-                case 2:
-                    _b.sent();
-                    return [3 /*break*/, 4];
-                case 3:
-                    e_1 = _b.sent();
-                    return [2 /*return*/, Promise.reject('ERR_INVALID_XML')];
-                case 4:
-                    extractorFields = getDefaultExtractorFields(parserType);
-                    parseResult = {
-                        samlContent: xmlString,
-                        sigAlg: null,
-                        extract: extractor_1.extract(xmlString, extractorFields),
-                    };
-                    // check status based on different scenarios
-                    return [4 /*yield*/, checkStatus(xmlString, parserType)];
-                case 5:
-                    // check status based on different scenarios
-                    _b.sent();
-                    // see if signature check is required
-                    // only verify message signature is enough
-                    if (checkSignature) {
-                        if (!signature || !sigAlg) {
-                            return [2 /*return*/, Promise.reject('ERR_MISSING_SIG_ALG')];
-                        }
-                        base64Signature = Buffer.from(decodeURIComponent(signature), 'base64');
-                        decodeSigAlg = decodeURIComponent(sigAlg);
-                        verified = libsaml_1.default.verifyMessageSignature(targetEntityMetadata, octetString, base64Signature, sigAlg);
-                        if (!verified) {
-                            // Fail to verify message signature
-                            return [2 /*return*/, Promise.reject('ERR_FAILED_MESSAGE_SIGNATURE_VERIFICATION')];
-                        }
-                        parseResult.sigAlg = decodeSigAlg;
-                    }
-                    return [2 /*return*/, Promise.resolve(parseResult)];
-            }
-        });
-    });
+async function redirectFlow(options) {
+    const { request, parserType, checkSignature = true, from } = options;
+    const { query, octetString } = request;
+    const { SigAlg: sigAlg, Signature: signature } = query;
+    const targetEntityMetadata = from.entityMeta;
+    // ?SAMLRequest= or ?SAMLResponse=
+    const direction = libsaml_1.default.getQueryParamByType(parserType);
+    const content = query[direction];
+    // query must contain the saml content
+    if (content === undefined) {
+        return Promise.reject('ERR_REDIRECT_FLOW_BAD_ARGS');
+    }
+    const xmlString = utility_1.inflateString(decodeURIComponent(content));
+    // validate the xml (remarks: login response must be gone through post flow)
+    if (parserType === urlParams.samlRequest ||
+        parserType === urlParams.logoutRequest ||
+        parserType === urlParams.logoutResponse) {
+        try {
+            await libsaml_1.default.isValidXml(xmlString);
+        }
+        catch (e) {
+            return Promise.reject('ERR_INVALID_XML');
+        }
+    }
+    const extractorFields = getDefaultExtractorFields(parserType);
+    const parseResult = {
+        samlContent: xmlString,
+        sigAlg: null,
+        extract: extractor_1.extract(xmlString, extractorFields),
+    };
+    // check status based on different scenarios
+    await checkStatus(xmlString, parserType);
+    // see if signature check is required
+    // only verify message signature is enough
+    if (checkSignature) {
+        if (!signature || !sigAlg) {
+            return Promise.reject('ERR_MISSING_SIG_ALG');
+        }
+        // put the below two assignemnts into verifyMessageSignature function
+        const base64Signature = Buffer.from(decodeURIComponent(signature), 'base64');
+        const decodeSigAlg = decodeURIComponent(sigAlg);
+        const verified = libsaml_1.default.verifyMessageSignature(targetEntityMetadata, octetString, base64Signature, sigAlg);
+        if (!verified) {
+            // Fail to verify message signature
+            return Promise.reject('ERR_FAILED_MESSAGE_SIGNATURE_VERIFICATION');
+        }
+        parseResult.sigAlg = decodeSigAlg;
+    }
+    return Promise.resolve(parseResult);
 }
 // proceed the post flow
-function postFlow(options) {
-    return __awaiter(this, void 0, void 0, function () {
-        var request, from, self, parserType, _a, checkSignature, body, direction, encodedRequest, samlContent, verificationOptions, decryptRequired, extractorFields, _b, verified, verifiedAssertionNode, result, _c, verified, verifiedAssertionNode, parseResult, targetEntityMetadata, issuer, extractedProperties;
-        return __generator(this, function (_d) {
-            switch (_d.label) {
-                case 0:
-                    request = options.request, from = options.from, self = options.self, parserType = options.parserType, _a = options.checkSignature, checkSignature = _a === void 0 ? true : _a;
-                    body = request.body;
-                    direction = libsaml_1.default.getQueryParamByType(parserType);
-                    encodedRequest = body[direction];
-                    samlContent = String(utility_1.base64Decode(encodedRequest));
-                    verificationOptions = {
-                        metadata: from.entityMeta,
-                        signatureAlgorithm: from.entitySetting.requestSignatureAlgorithm,
-                    };
-                    decryptRequired = from.entitySetting.isAssertionEncrypted;
-                    extractorFields = [];
-                    // validate the xml first
-                    return [4 /*yield*/, libsaml_1.default.isValidXml(samlContent)];
-                case 1:
-                    // validate the xml first
-                    _d.sent();
-                    if (parserType !== urlParams.samlResponse) {
-                        extractorFields = getDefaultExtractorFields(parserType, null);
-                    }
-                    // check status based on different scenarios
-                    return [4 /*yield*/, checkStatus(samlContent, parserType)];
-                case 2:
-                    // check status based on different scenarios
-                    _d.sent();
-                    // verify the signatures (the repsonse is encrypted then signed, then verify first then decrypt)
-                    if (checkSignature &&
-                        from.entitySetting.messageSigningOrder === urn_1.MessageSignatureOrder.ETS) {
-                        _b = __read(libsaml_1.default.verifySignature(samlContent, verificationOptions), 2), verified = _b[0], verifiedAssertionNode = _b[1];
-                        if (!verified) {
-                            return [2 /*return*/, Promise.reject('ERR_FAIL_TO_VERIFY_ETS_SIGNATURE')];
-                        }
-                        if (!decryptRequired) {
-                            extractorFields = getDefaultExtractorFields(parserType, verifiedAssertionNode);
-                        }
-                    }
-                    if (!(parserType === 'SAMLResponse' && decryptRequired)) return [3 /*break*/, 4];
-                    return [4 /*yield*/, libsaml_1.default.decryptAssertion(self, samlContent)];
-                case 3:
-                    result = _d.sent();
-                    samlContent = result[0];
-                    extractorFields = getDefaultExtractorFields(parserType, result[1]);
-                    _d.label = 4;
-                case 4:
-                    // verify the signatures (the repsonse is signed then encrypted, then decrypt first then verify)
-                    if (checkSignature &&
-                        from.entitySetting.messageSigningOrder === urn_1.MessageSignatureOrder.STE) {
-                        _c = __read(libsaml_1.default.verifySignature(samlContent, verificationOptions), 2), verified = _c[0], verifiedAssertionNode = _c[1];
-                        if (verified) {
-                            extractorFields = getDefaultExtractorFields(parserType, verifiedAssertionNode);
-                        }
-                        else {
-                            return [2 /*return*/, Promise.reject('ERR_FAIL_TO_VERIFY_STE_SIGNATURE')];
-                        }
-                    }
-                    parseResult = {
-                        samlContent: samlContent,
-                        extract: extractor_1.extract(samlContent, extractorFields),
-                    };
-                    targetEntityMetadata = from.entityMeta;
-                    issuer = targetEntityMetadata.getEntityID();
-                    extractedProperties = parseResult.extract;
-                    // unmatched issuer
-                    if ((parserType === 'LogoutResponse' || parserType === 'SAMLResponse')
-                        && extractedProperties
-                        && extractedProperties.issuer !== issuer) {
-                        return [2 /*return*/, Promise.reject('ERR_UNMATCH_ISSUER')];
-                    }
-                    // invalid session time
-                    // only run the verifyTime when `SessionNotOnOrAfter` exists
-                    if (parserType === 'SAMLResponse'
-                        && extractedProperties.sessionIndex.sessionNotOnOrAfter
-                        && !validator_1.verifyTime(undefined, extractedProperties.sessionIndex.sessionNotOnOrAfter, self.entitySetting.clockDrifts)) {
-                        return [2 /*return*/, Promise.reject('ERR_EXPIRED_SESSION')];
-                    }
-                    // invalid time
-                    // 2.4.1.2 https://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf
-                    if (parserType === 'SAMLResponse'
-                        && extractedProperties.conditions
-                        && !validator_1.verifyTime(extractedProperties.conditions.notBefore, extractedProperties.conditions.notOnOrAfter, self.entitySetting.clockDrifts)) {
-                        return [2 /*return*/, Promise.reject('ERR_SUBJECT_UNCONFIRMED')];
-                    }
-                    return [2 /*return*/, Promise.resolve(parseResult)];
-            }
-        });
-    });
+async function postFlow(options) {
+    const { request, from, self, parserType, checkSignature = true } = options;
+    const { body } = request;
+    const direction = libsaml_1.default.getQueryParamByType(parserType);
+    const encodedRequest = body[direction];
+    let samlContent = String(utility_1.base64Decode(encodedRequest));
+    const verificationOptions = {
+        metadata: from.entityMeta,
+        signatureAlgorithm: from.entitySetting.requestSignatureAlgorithm,
+    };
+    const decryptRequired = from.entitySetting.isAssertionEncrypted;
+    let extractorFields = [];
+    // validate the xml first
+    await libsaml_1.default.isValidXml(samlContent);
+    if (parserType !== urlParams.samlResponse) {
+        extractorFields = getDefaultExtractorFields(parserType, null);
+    }
+    // check status based on different scenarios
+    await checkStatus(samlContent, parserType);
+    // verify the signatures (the repsonse is encrypted then signed, then verify first then decrypt)
+    if (checkSignature &&
+        from.entitySetting.messageSigningOrder === urn_1.MessageSignatureOrder.ETS) {
+        const [verified, verifiedAssertionNode] = libsaml_1.default.verifySignature(samlContent, verificationOptions);
+        if (!verified) {
+            return Promise.reject('ERR_FAIL_TO_VERIFY_ETS_SIGNATURE');
+        }
+        if (!decryptRequired) {
+            extractorFields = getDefaultExtractorFields(parserType, verifiedAssertionNode);
+        }
+    }
+    if (parserType === 'SAMLResponse' && decryptRequired) {
+        const result = await libsaml_1.default.decryptAssertion(self, samlContent);
+        samlContent = result[0];
+        extractorFields = getDefaultExtractorFields(parserType, result[1]);
+    }
+    // verify the signatures (the repsonse is signed then encrypted, then decrypt first then verify)
+    if (checkSignature &&
+        from.entitySetting.messageSigningOrder === urn_1.MessageSignatureOrder.STE) {
+        const [verified, verifiedAssertionNode] = libsaml_1.default.verifySignature(samlContent, verificationOptions);
+        if (verified) {
+            extractorFields = getDefaultExtractorFields(parserType, verifiedAssertionNode);
+        }
+        else {
+            return Promise.reject('ERR_FAIL_TO_VERIFY_STE_SIGNATURE');
+        }
+    }
+    const parseResult = {
+        samlContent: samlContent,
+        extract: extractor_1.extract(samlContent, extractorFields),
+    };
+    /**
+     *  Validation part: validate the context of response after signature is verified and decrpyted (optional)
+     */
+    const targetEntityMetadata = from.entityMeta;
+    const issuer = targetEntityMetadata.getEntityID();
+    const extractedProperties = parseResult.extract;
+    // unmatched issuer
+    if ((parserType === 'LogoutResponse' || parserType === 'SAMLResponse')
+        && extractedProperties
+        && extractedProperties.issuer !== issuer) {
+        return Promise.reject('ERR_UNMATCH_ISSUER');
+    }
+    // invalid session time
+    // only run the verifyTime when `SessionNotOnOrAfter` exists
+    if (parserType === 'SAMLResponse'
+        && extractedProperties.sessionIndex.sessionNotOnOrAfter
+        && !validator_1.verifyTime(undefined, extractedProperties.sessionIndex.sessionNotOnOrAfter, self.entitySetting.clockDrifts)) {
+        return Promise.reject('ERR_EXPIRED_SESSION');
+    }
+    // invalid time
+    // 2.4.1.2 https://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf
+    if (parserType === 'SAMLResponse'
+        && extractedProperties.conditions
+        && !validator_1.verifyTime(extractedProperties.conditions.notBefore, extractedProperties.conditions.notOnOrAfter, self.entitySetting.clockDrifts)) {
+        return Promise.reject('ERR_SUBJECT_UNCONFIRMED');
+    }
+    return Promise.resolve(parseResult);
 }
 function checkStatus(content, parserType) {
     // only check response parser
     if (parserType !== urlParams.samlResponse && parserType !== urlParams.logoutResponse) {
         return Promise.resolve('SKIPPED');
     }
-    var fields = parserType === urlParams.samlResponse
+    const fields = parserType === urlParams.samlResponse
         ? extractor_1.loginResponseStatusFields
         : extractor_1.logoutResponseStatusFields;
-    var _a = extractor_1.extract(content, fields), top = _a.top, second = _a.second;
+    const { top, second } = extractor_1.extract(content, fields);
     // only resolve when top-tier status code is success
     if (top === urn_1.StatusCode.Success) {
         return Promise.resolve('OK');
@@ -251,11 +174,11 @@ function checkStatus(content, parserType) {
         throw new Error('ERR_UNDEFINED_STATUS');
     }
     // returns a detailed error for two-tier error code
-    throw new Error("ERR_FAILED_STATUS with top tier code: " + top + ", second tier code: " + second);
+    throw new Error(`ERR_FAILED_STATUS with top tier code: ${top}, second tier code: ${second}`);
 }
 function flow(options) {
-    var binding = options.binding;
-    var parserType = options.parserType;
+    const binding = options.binding;
+    const parserType = options.parserType;
     options.supportBindings = [urn_1.BindingNamespace.Redirect, urn_1.BindingNamespace.Post];
     // saml response only allows POST
     if (parserType === urn_1.ParserType.SAMLResponse) {
diff --git a/node_modules/samlify/build/src/flow.js.map b/node_modules/samlify/build/src/flow.js.map
index c311434..d8df556 100644
--- a/node_modules/samlify/build/src/flow.js.map
+++ b/node_modules/samlify/build/src/flow.js.map
@@ -1 +1 @@
-{"version":3,"file":"flow.js","sourceRoot":"","sources":["../../src/flow.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"flow.js","sourceRoot":"","sources":["../../src/flow.ts"],"names":[],"mappings":";;;AAAA,uCAAwD;AACxD,2CAAyC;AACzC,uCAAgC;AAChC,2CASqB;AAErB,+BAMe;AAEf,MAAM,QAAQ,GAAG,aAAO,CAAC,OAAO,CAAC;AACjC,MAAM,SAAS,GAAG,aAAO,CAAC,SAAS,CAAC;AAOpC,2DAA2D;AAC3D,SAAS,yBAAyB,CAAC,UAAsB,EAAE,SAAe;IACxE,QAAQ,UAAU,EAAE;QAClB,KAAK,gBAAU,CAAC,WAAW;YACzB,OAAO,8BAAkB,CAAC;QAC5B,KAAK,gBAAU,CAAC,YAAY;YAC1B,IAAI,CAAC,SAAS,EAAE;gBACd,iBAAiB;gBACjB,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;aACxC;YACD,OAAO,+BAAmB,CAAC,SAAS,CAAC,CAAC;QACxC,KAAK,gBAAU,CAAC,aAAa;YAC3B,OAAO,+BAAmB,CAAC;QAC7B,KAAK,gBAAU,CAAC,cAAc;YAC5B,OAAO,gCAAoB,CAAC;QAC9B;YACE,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;KAC/C;AACH,CAAC;AAED,oCAAoC;AACpC,KAAK,UAAU,YAAY,CAAC,OAAO;IAEjC,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,cAAc,GAAG,IAAI,EAAE,IAAI,EAAE,GAAG,OAAO,CAAC;IACrE,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,OAAO,CAAC;IACvC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,KAAK,CAAC;IAEvD,MAAM,oBAAoB,GAAG,IAAI,CAAC,UAAU,CAAC;IAE7C,kCAAkC;IAClC,MAAM,SAAS,GAAG,iBAAO,CAAC,mBAAmB,CAAC,UAAU,CAAC,CAAC;IAC1D,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC;IAEjC,sCAAsC;IACtC,IAAI,OAAO,KAAK,SAAS,EAAE;QACzB,OAAO,OAAO,CAAC,MAAM,CAAC,4BAA4B,CAAC,CAAC;KACrD;IAED,MAAM,SAAS,GAAG,uBAAa,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC;IAE7D,4EAA4E;IAC5E,IACE,UAAU,KAAK,SAAS,CAAC,WAAW;QACpC,UAAU,KAAK,SAAS,CAAC,aAAa;QACtC,UAAU,KAAK,SAAS,CAAC,cAAc,EACvC;QACA,IAAI;YACF,MAAM,iBAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;SACrC;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;SAC1C;KACF;IAED,MAAM,eAAe,GAAG,yBAAyB,CAAC,UAAU,CAAC,CAAC;IAE9D,MAAM,WAAW,GAAmE;QAClF,WAAW,EAAE,SAAS;QACtB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE,mBAAO,CAAC,SAAS,EAAE,eAAe,CAAC;KAC7C,CAAC;IAEF,4CAA4C;IAC5C,MAAM,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;IAEzC,qCAAqC;IACrC,0CAA0C;IAC1C,IAAI,cAAc,EAAE;QAClB,IAAI,CAAC,SAAS,IAAI,CAAC,MAAM,EAAE;YACzB,OAAO,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;SAC9C;QAED,qEAAqE;QACrE,MAAM,eAAe,GAAG,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC7E,MAAM,YAAY,GAAG,kBAAkB,CAAC,MAAM,CAAC,CAAC;QAEhD,MAAM,QAAQ,GAAG,iBAAO,CAAC,sBAAsB,CAAC,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC;QAE5G,IAAI,CAAC,QAAQ,EAAE;YACb,mCAAmC;YACnC,OAAO,OAAO,CAAC,MAAM,CAAC,2CAA2C,CAAC,CAAC;SACpE;QAED,WAAW,CAAC,MAAM,GAAG,YAAY,CAAC;KACnC;IAED,OAAO,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;AACtC,CAAC;AAED,wBAAwB;AACxB,KAAK,UAAU,QAAQ,CAAC,OAAO;IAE7B,MAAM,EACJ,OAAO,EACP,IAAI,EACJ,IAAI,EACJ,UAAU,EACV,cAAc,GAAG,IAAI,EACtB,GAAG,OAAO,CAAC;IAEZ,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,CAAC;IAEzB,MAAM,SAAS,GAAG,iBAAO,CAAC,mBAAmB,CAAC,UAAU,CAAC,CAAC;IAC1D,MAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;IAEvC,IAAI,WAAW,GAAG,MAAM,CAAC,sBAAY,CAAC,cAAc,CAAC,CAAC,CAAC;IAEvD,MAAM,mBAAmB,GAAG;QAC1B,QAAQ,EAAE,IAAI,CAAC,UAAU;QACzB,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC,yBAAyB;KACjE,CAAC;IAEF,MAAM,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAC;IAEhE,IAAI,eAAe,GAAoB,EAAE,CAAC;IAE1C,yBAAyB;IACzB,MAAM,iBAAO,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;IAEtC,IAAI,UAAU,KAAK,SAAS,CAAC,YAAY,EAAE;QACzC,eAAe,GAAG,yBAAyB,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;KAC/D;IAED,4CAA4C;IAC5C,MAAM,WAAW,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;IAE3C,gGAAgG;IAChG,IACE,cAAc;QACd,IAAI,CAAC,aAAa,CAAC,mBAAmB,KAAK,2BAAqB,CAAC,GAAG,EACpE;QACA,MAAM,CAAC,QAAQ,EAAE,qBAAqB,CAAC,GAAG,iBAAO,CAAC,eAAe,CAAC,WAAW,EAAE,mBAAmB,CAAC,CAAC;QACpG,IAAI,CAAC,QAAQ,EAAE;YACb,OAAO,OAAO,CAAC,MAAM,CAAC,kCAAkC,CAAC,CAAC;SAC3D;QACD,IAAI,CAAC,eAAe,EAAE;YACpB,eAAe,GAAG,yBAAyB,CAAC,UAAU,EAAE,qBAAqB,CAAC,CAAC;SAChF;KACF;IAED,IAAI,UAAU,KAAK,cAAc,IAAI,eAAe,EAAE;QACpD,MAAM,MAAM,GAAG,MAAM,iBAAO,CAAC,gBAAgB,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;QACjE,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACxB,eAAe,GAAG,yBAAyB,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;KACpE;IAED,gGAAgG;IAChG,IACE,cAAc;QACd,IAAI,CAAC,aAAa,CAAC,mBAAmB,KAAK,2BAAqB,CAAC,GAAG,EACpE;QACA,MAAM,CAAC,QAAQ,EAAE,qBAAqB,CAAC,GAAG,iBAAO,CAAC,eAAe,CAAC,WAAW,EAAE,mBAAmB,CAAC,CAAC;QACpG,IAAI,QAAQ,EAAE;YACZ,eAAe,GAAG,yBAAyB,CAAC,UAAU,EAAE,qBAAqB,CAAC,CAAC;SAChF;aAAM;YACL,OAAO,OAAO,CAAC,MAAM,CAAC,kCAAkC,CAAC,CAAC;SAC3D;KACF;IAED,MAAM,WAAW,GAAG;QAClB,WAAW,EAAE,WAAW;QACxB,OAAO,EAAE,mBAAO,CAAC,WAAW,EAAE,eAAe,CAAC;KAC/C,CAAC;IAEF;;OAEG;IACH,MAAM,oBAAoB,GAAG,IAAI,CAAC,UAAU,CAAC;IAC7C,MAAM,MAAM,GAAG,oBAAoB,CAAC,WAAW,EAAE,CAAC;IAClD,MAAM,mBAAmB,GAAG,WAAW,CAAC,OAAO,CAAC;IAEhD,mBAAmB;IACnB,IACE,CAAC,UAAU,KAAK,gBAAgB,IAAI,UAAU,KAAK,cAAc,CAAC;WAC/D,mBAAmB;WACnB,mBAAmB,CAAC,MAAM,KAAK,MAAM,EACxC;QACA,OAAO,OAAO,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;KAC7C;IAED,uBAAuB;IACvB,4DAA4D;IAC5D,IACE,UAAU,KAAK,cAAc;WAC1B,mBAAmB,CAAC,YAAY,CAAC,mBAAmB;WACpD,CAAC,sBAAU,CACZ,SAAS,EACT,mBAAmB,CAAC,YAAY,CAAC,mBAAmB,EACpD,IAAI,CAAC,aAAa,CAAC,WAAW,CAC/B,EACD;QACA,OAAO,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;KAC9C;IAED,eAAe;IACf,8EAA8E;IAC9E,IACE,UAAU,KAAK,cAAc;WAC1B,mBAAmB,CAAC,UAAU;WAC9B,CAAC,sBAAU,CACZ,mBAAmB,CAAC,UAAU,CAAC,SAAS,EACxC,mBAAmB,CAAC,UAAU,CAAC,YAAY,EAC3C,IAAI,CAAC,aAAa,CAAC,WAAW,CAC/B,EACD;QACA,OAAO,OAAO,CAAC,MAAM,CAAC,yBAAyB,CAAC,CAAC;KAClD;IAED,OAAO,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;AACtC,CAAC;AAED,SAAS,WAAW,CAAC,OAAe,EAAE,UAAkB;IAEtD,6BAA6B;IAC7B,IAAI,UAAU,KAAK,SAAS,CAAC,YAAY,IAAI,UAAU,KAAK,SAAS,CAAC,cAAc,EAAE;QACpF,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;KACnC;IAED,MAAM,MAAM,GAAG,UAAU,KAAK,SAAS,CAAC,YAAY;QAClD,CAAC,CAAC,qCAAyB;QAC3B,CAAC,CAAC,sCAA0B,CAAC;IAE/B,MAAM,EAAC,GAAG,EAAE,MAAM,EAAC,GAAG,mBAAO,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IAE/C,oDAAoD;IACpD,IAAI,GAAG,KAAK,gBAAU,CAAC,OAAO,EAAE;QAC9B,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KAC9B;IAED,IAAI,CAAC,GAAG,EAAE;QACR,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;KACzC;IAED,mDAAmD;IACnD,MAAM,IAAI,KAAK,CAAC,yCAAyC,GAAG,uBAAuB,MAAM,EAAE,CAAC,CAAC;AAC/F,CAAC;AAED,SAAgB,IAAI,CAAC,OAAO;IAE1B,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;IAChC,MAAM,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;IAEtC,OAAO,CAAC,eAAe,GAAG,CAAC,sBAAgB,CAAC,QAAQ,EAAE,sBAAgB,CAAC,IAAI,CAAC,CAAC;IAC7E,iCAAiC;IACjC,IAAI,UAAU,KAAK,gBAAU,CAAC,YAAY,EAAE;QAC1C,OAAO,CAAC,eAAe,GAAG,CAAC,sBAAgB,CAAC,IAAI,CAAC,CAAC;KACnD;IAED,IAAI,OAAO,KAAK,QAAQ,CAAC,IAAI,EAAE;QAC7B,OAAO,QAAQ,CAAC,OAAO,CAAC,CAAC;KAC1B;IAED,IAAI,OAAO,KAAK,QAAQ,CAAC,QAAQ,EAAE;QACjC,OAAO,YAAY,CAAC,OAAO,CAAC,CAAC;KAC9B;IAED,OAAO,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;AAE/C,CAAC;AArBD,oBAqBC"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/libsaml.js b/node_modules/samlify/build/src/libsaml.js
index d3ea5dd..6b4d329 100644
--- a/node_modules/samlify/build/src/libsaml.js
+++ b/node_modules/samlify/build/src/libsaml.js
@@ -4,59 +4,23 @@
 * @author tngan
 * @desc  A simple library including some common functions
 */
-var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
-    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
-    return new (P || (P = Promise))(function (resolve, reject) {
-        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
-        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
-        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
-        step((generator = generator.apply(thisArg, _arguments || [])).next());
-    });
-};
-var __generator = (this && this.__generator) || function (thisArg, body) {
-    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
-    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
-    function verb(n) { return function (v) { return step([n, v]); }; }
-    function step(op) {
-        if (f) throw new TypeError("Generator is already executing.");
-        while (_) try {
-            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
-            if (y = 0, t) op = [op[0] & 2, t.value];
-            switch (op[0]) {
-                case 0: case 1: t = op; break;
-                case 4: _.label++; return { value: op[1], done: false };
-                case 5: _.label++; y = op[1]; op = [0]; continue;
-                case 7: op = _.ops.pop(); _.trys.pop(); continue;
-                default:
-                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
-                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
-                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
-                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
-                    if (t[2]) _.ops.pop();
-                    _.trys.pop(); continue;
-            }
-            op = body.call(thisArg, _);
-        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
-        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
-    }
-};
 Object.defineProperty(exports, "__esModule", { value: true });
-var xmldom_1 = require("xmldom");
-var utility_1 = require("./utility");
-var urn_1 = require("./urn");
-var xpath_1 = require("xpath");
-var nrsa = require("node-rsa");
-var xml_crypto_1 = require("xml-crypto");
-var xmlenc = require("@authenio/xml-encryption");
-var extractor_1 = require("./extractor");
-var camelcase_1 = require("camelcase");
-var api_1 = require("./api");
-var signatureAlgorithms = urn_1.algorithms.signature;
-var digestAlgorithms = urn_1.algorithms.digest;
-var certUse = urn_1.wording.certUse;
-var urlParams = urn_1.wording.urlParams;
-var dom = xmldom_1.DOMParser;
-var libSaml = function () {
+const xmldom_1 = require("xmldom");
+const utility_1 = require("./utility");
+const urn_1 = require("./urn");
+const xpath_1 = require("xpath");
+const nrsa = require("node-rsa");
+const xml_crypto_1 = require("xml-crypto");
+const xmlenc = require("@authenio/xml-encryption");
+const extractor_1 = require("./extractor");
+const camelcase_1 = require("camelcase");
+const api_1 = require("./api");
+const signatureAlgorithms = urn_1.algorithms.signature;
+const digestAlgorithms = urn_1.algorithms.digest;
+const certUse = urn_1.wording.certUse;
+const urlParams = urn_1.wording.urlParams;
+const dom = xmldom_1.DOMParser;
+const libSaml = () => {
     /**
     * @desc helper function to get back the query param for redirect binding for SLO/SSO
     * @type {string}
@@ -73,7 +37,7 @@ var libSaml = function () {
     /**
      *
      */
-    var nrsaAliasMapping = {
+    const nrsaAliasMapping = {
         'http://www.w3.org/2000/09/xmldsig#rsa-sha1': 'sha1',
         'http://www.w3.org/2001/04/xmldsig-more#rsa-sha256': 'sha256',
         'http://www.w3.org/2001/04/xmldsig-more#rsa-sha512': 'sha512',
@@ -82,21 +46,21 @@ var libSaml = function () {
     * @desc Default login request template
     * @type {LoginRequestTemplate}
     */
-    var defaultLoginRequestTemplate = {
+    const defaultLoginRequestTemplate = {
         context: '<samlp:AuthnRequest xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" ID="{ID}" Version="2.0" IssueInstant="{IssueInstant}" Destination="{Destination}" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="{AssertionConsumerServiceURL}"><saml:Issuer>{Issuer}</saml:Issuer><samlp:NameIDPolicy Format="{NameIDFormat}" AllowCreate="{AllowCreate}"/></samlp:AuthnRequest>',
     };
     /**
     * @desc Default logout request template
     * @type {LogoutRequestTemplate}
     */
-    var defaultLogoutRequestTemplate = {
+    const defaultLogoutRequestTemplate = {
         context: '<samlp:LogoutRequest xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" ID="{ID}" Version="2.0" IssueInstant="{IssueInstant}" Destination="{Destination}"><saml:Issuer>{Issuer}</saml:Issuer><saml:NameID Format="{NameIDFormat}">{NameID}</saml:NameID></samlp:LogoutRequest>',
     };
     /**
     * @desc Default login response template
     * @type {LoginResponseTemplate}
     */
-    var defaultLoginResponseTemplate = {
+    const defaultLoginResponseTemplate = {
         context: '<samlp:Response xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" ID="{ID}" Version="2.0" IssueInstant="{IssueInstant}" Destination="{Destination}" InResponseTo="{InResponseTo}"><saml:Issuer>{Issuer}</saml:Issuer><samlp:Status><samlp:StatusCode Value="{StatusCode}"/></samlp:Status><saml:Assertion xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" ID="{AssertionID}" Version="2.0" IssueInstant="{IssueInstant}"><saml:Issuer>{Issuer}</saml:Issuer><saml:Subject><saml:NameID Format="{NameIDFormat}">{NameID}</saml:NameID><saml:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer"><saml:SubjectConfirmationData NotOnOrAfter="{SubjectConfirmationDataNotOnOrAfter}" Recipient="{SubjectRecipient}" InResponseTo="{InResponseTo}"/></saml:SubjectConfirmation></saml:Subject><saml:Conditions NotBefore="{ConditionsNotBefore}" NotOnOrAfter="{ConditionsNotOnOrAfter}"><saml:AudienceRestriction><saml:Audience>{Audience}</saml:Audience></saml:AudienceRestriction></saml:Conditions>{AuthnStatement}{AttributeStatement}</saml:Assertion></samlp:Response>',
         attributes: [],
     };
@@ -104,7 +68,7 @@ var libSaml = function () {
     * @desc Default logout response template
     * @type {LogoutResponseTemplate}
     */
-    var defaultLogoutResponseTemplate = {
+    const defaultLogoutResponseTemplate = {
         context: '<samlp:LogoutResponse xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" ID="{ID}" Version="2.0" IssueInstant="{IssueInstant}" Destination="{Destination}" InResponseTo="{InResponseTo}"><saml:Issuer>{Issuer}</saml:Issuer><samlp:Status><samlp:StatusCode Value="{StatusCode}"/></samlp:Status></samlp:LogoutResponse>',
     };
     /**
@@ -115,7 +79,7 @@ var libSaml = function () {
     */
     function getSigningScheme(sigAlg) {
         if (sigAlg) {
-            var algAlias = nrsaAliasMapping[sigAlg];
+            const algAlias = nrsaAliasMapping[sigAlg];
             if (!(algAlias === undefined)) {
                 return algAlias;
             }
@@ -129,7 +93,7 @@ var libSaml = function () {
     * @return {string/null} digest algorithm
     */
     function getDigestMethod(sigAlg) {
-        var digestAlg = digestAlgorithms[sigAlg];
+        const digestAlg = digestAlgorithms[sigAlg];
         if (!(digestAlg === undefined)) {
             return digestAlg;
         }
@@ -156,25 +120,25 @@ var libSaml = function () {
      * @return {string}
      */
     function tagging(prefix, content) {
-        var camelContent = camelcase_1.default(content);
+        const camelContent = camelcase_1.default(content);
         return prefix + camelContent.charAt(0).toUpperCase() + camelContent.slice(1);
     }
     return {
-        createXPath: createXPath,
-        getQueryParamByType: getQueryParamByType,
-        defaultLoginRequestTemplate: defaultLoginRequestTemplate,
-        defaultLoginResponseTemplate: defaultLoginResponseTemplate,
-        defaultLogoutRequestTemplate: defaultLogoutRequestTemplate,
-        defaultLogoutResponseTemplate: defaultLogoutResponseTemplate,
+        createXPath,
+        getQueryParamByType,
+        defaultLoginRequestTemplate,
+        defaultLoginResponseTemplate,
+        defaultLogoutRequestTemplate,
+        defaultLogoutResponseTemplate,
         /**
         * @desc Repalce the tag (e.g. {tag}) inside the raw XML
         * @param  {string} rawXML      raw XML string used to do keyword replacement
         * @param  {array} tagValues    tag values
         * @return {string}
         */
-        replaceTagsByValue: function (rawXML, tagValues) {
-            Object.keys(tagValues).forEach(function (t) {
-                rawXML = rawXML.replace(new RegExp("{" + t + "}", 'g'), tagValues[t]);
+        replaceTagsByValue(rawXML, tagValues) {
+            Object.keys(tagValues).forEach(t => {
+                rawXML = rawXML.replace(new RegExp(`{${t}}`, 'g'), tagValues[t]);
             });
             return rawXML;
         },
@@ -183,14 +147,13 @@ var libSaml = function () {
         * @param  {LoginResponseAttribute} attributes    an array of attribute configuration
         * @return {string}
         */
-        attributeStatementBuilder: function (attributes) {
-            var attr = attributes.map(function (_a) {
-                var name = _a.name, nameFormat = _a.nameFormat, valueTag = _a.valueTag, valueXsiType = _a.valueXsiType, valueXmlnsXs = _a.valueXmlnsXs, valueXmlnsXsi = _a.valueXmlnsXsi;
-                var defaultValueXmlnsXs = 'http://www.w3.org/2001/XMLSchema';
-                var defaultValueXmlnsXsi = 'http://www.w3.org/2001/XMLSchema-instance';
-                return "<saml:Attribute Name=\"" + name + "\" NameFormat=\"" + nameFormat + "\"><saml:AttributeValue xmlns:xs=\"" + (valueXmlnsXs ? valueXmlnsXs : defaultValueXmlnsXs) + "\" xmlns:xsi=\"" + (valueXmlnsXsi ? valueXmlnsXsi : defaultValueXmlnsXsi) + "\" xsi:type=\"" + valueXsiType + "\">{" + tagging('attr', valueTag) + "}</saml:AttributeValue></saml:Attribute>";
+        attributeStatementBuilder(attributes) {
+            const attr = attributes.map(({ name, nameFormat, valueTag, valueXsiType, valueXmlnsXs, valueXmlnsXsi }) => {
+                const defaultValueXmlnsXs = 'http://www.w3.org/2001/XMLSchema';
+                const defaultValueXmlnsXsi = 'http://www.w3.org/2001/XMLSchema-instance';
+                return `<saml:Attribute Name="${name}" NameFormat="${nameFormat}"><saml:AttributeValue xmlns:xs="${valueXmlnsXs ? valueXmlnsXs : defaultValueXmlnsXs}" xmlns:xsi="${valueXmlnsXsi ? valueXmlnsXsi : defaultValueXmlnsXsi}" xsi:type="${valueXsiType}">{${tagging('attr', valueTag)}}</saml:AttributeValue></saml:Attribute>`;
             }).join('');
-            return "<saml:AttributeStatement>" + attr + "</saml:AttributeStatement>";
+            return `<saml:AttributeStatement>${attr}</saml:AttributeStatement>`;
         },
         /**
         * @desc Construct the XML signature for POST binding
@@ -203,12 +166,12 @@ var libSaml = function () {
         * @param  {string[]} transformationAlgorithms   canonicalization and transformation Algorithms
         * @return {string} base64 encoded string
         */
-        constructSAMLSignature: function (opts) {
-            var rawSamlMessage = opts.rawSamlMessage, referenceTagXPath = opts.referenceTagXPath, privateKey = opts.privateKey, privateKeyPass = opts.privateKeyPass, _a = opts.signatureAlgorithm, signatureAlgorithm = _a === void 0 ? signatureAlgorithms.RSA_SHA256 : _a, _b = opts.transformationAlgorithms, transformationAlgorithms = _b === void 0 ? [
+        constructSAMLSignature(opts) {
+            const { rawSamlMessage, referenceTagXPath, privateKey, privateKeyPass, signatureAlgorithm = signatureAlgorithms.RSA_SHA256, transformationAlgorithms = [
                 'http://www.w3.org/2000/09/xmldsig#enveloped-signature',
                 'http://www.w3.org/2001/10/xml-exc-c14n#',
-            ] : _b, signingCert = opts.signingCert, signatureConfig = opts.signatureConfig, _c = opts.isBase64Output, isBase64Output = _c === void 0 ? true : _c, _d = opts.isMessageSigned, isMessageSigned = _d === void 0 ? false : _d;
-            var sig = new xml_crypto_1.SignedXml();
+            ], signingCert, signatureConfig, isBase64Output = true, isMessageSigned = false, } = opts;
+            const sig = new xml_crypto_1.SignedXml();
             // Add assertion sections as reference
             if (referenceTagXPath) {
                 sig.addReference(referenceTagXPath, opts.transformationAlgorithms, getDigestMethod(signatureAlgorithm));
@@ -236,22 +199,21 @@ var libSaml = function () {
         * @param  {SignatureVerifierOptions} opts cert declares the X509 certificate
         * @return {boolean} verification result
         */
-        verifySignature: function (xml, opts) {
-            var _this = this;
-            var doc = new dom().parseFromString(xml);
+        verifySignature(xml, opts) {
+            const doc = new dom().parseFromString(xml);
             // In order to avoid the wrapping attack, we have changed to use absolute xpath instead of naively fetching the signature element
             // message signature (logout response / saml response)
-            var messageSignatureXpath = "/*[contains(local-name(), 'Response') or contains(local-name(), 'Request')]/*[local-name(.)='Signature']";
+            const messageSignatureXpath = "/*[contains(local-name(), 'Response') or contains(local-name(), 'Request')]/*[local-name(.)='Signature']";
             // assertion signature (logout response / saml response)
-            var assertionSignatureXpath = "/*[contains(local-name(), 'Response') or contains(local-name(), 'Request')]/*[local-name(.)='Assertion']/*[local-name(.)='Signature']";
+            const assertionSignatureXpath = "/*[contains(local-name(), 'Response') or contains(local-name(), 'Request')]/*[local-name(.)='Assertion']/*[local-name(.)='Signature']";
             // check if there is a potential malicious wrapping signature
-            var wrappingElementsXPath = "/*[contains(local-name(), 'Response')]/*[local-name(.)='Assertion']/*[local-name(.)='Subject']/*[local-name(.)='SubjectConfirmation']/*[local-name(.)='SubjectConfirmationData']//*[local-name(.)='Assertion' or local-name(.)='Signature']";
+            const wrappingElementsXPath = "/*[contains(local-name(), 'Response')]/*[local-name(.)='Assertion']/*[local-name(.)='Subject']/*[local-name(.)='SubjectConfirmation']/*[local-name(.)='SubjectConfirmationData']//*[local-name(.)='Assertion' or local-name(.)='Signature']";
             // select the signature node
-            var selection = [];
-            var assertionNode = null;
-            var messageSignatureNode = xpath_1.select(messageSignatureXpath, doc);
-            var assertionSignatureNode = xpath_1.select(assertionSignatureXpath, doc);
-            var wrappingElementNode = xpath_1.select(wrappingElementsXPath, doc);
+            let selection = [];
+            let assertionNode = null;
+            const messageSignatureNode = xpath_1.select(messageSignatureXpath, doc);
+            const assertionSignatureNode = xpath_1.select(assertionSignatureXpath, doc);
+            const wrappingElementNode = xpath_1.select(wrappingElementsXPath, doc);
             selection = selection.concat(messageSignatureNode);
             selection = selection.concat(assertionSignatureNode);
             // try to catch potential wrapping attack
@@ -262,10 +224,10 @@ var libSaml = function () {
             if (selection.length === 0) {
                 throw new Error('ERR_ZERO_SIGNATURE');
             }
-            var sig = new xml_crypto_1.SignedXml();
-            var verified = true;
+            const sig = new xml_crypto_1.SignedXml();
+            let verified = true;
             // need to refactor later on
-            selection.forEach(function (signatureNode) {
+            selection.forEach(signatureNode => {
                 sig.signatureAlgorithm = opts.signatureAlgorithm;
                 if (!opts.keyFile && !opts.metadata) {
                     throw new Error('ERR_UNDEFINED_SIGNATURE_VERIFIER_OPTIONS');
@@ -274,9 +236,9 @@ var libSaml = function () {
                     sig.keyInfoProvider = new xml_crypto_1.FileKeyInfo(opts.keyFile);
                 }
                 if (opts.metadata) {
-                    var certificateNode = xpath_1.select(".//*[local-name(.)='X509Certificate']", signatureNode);
+                    const certificateNode = xpath_1.select(".//*[local-name(.)='X509Certificate']", signatureNode);
                     // certificate in metadata
-                    var metadataCert = opts.metadata.getX509Certificate(certUse.signing);
+                    let metadataCert = opts.metadata.getX509Certificate(certUse.signing);
                     // flattens the nested array of Certificates from each KeyDescriptor
                     if (Array.isArray(metadataCert)) {
                         metadataCert = utility_1.flattenDeep(metadataCert);
@@ -291,15 +253,15 @@ var libSaml = function () {
                     }
                     // no certificate node in response
                     if (certificateNode.length !== 0) {
-                        var x509CertificateData = certificateNode[0].firstChild.data;
-                        var x509Certificate_1 = utility_1.default.normalizeCerString(x509CertificateData);
+                        const x509CertificateData = certificateNode[0].firstChild.data;
+                        const x509Certificate = utility_1.default.normalizeCerString(x509CertificateData);
                         if (metadataCert.length >= 1 &&
-                            !metadataCert.find(function (cert) { return cert.trim() === x509Certificate_1.trim(); })) {
+                            !metadataCert.find(cert => cert.trim() === x509Certificate.trim())) {
                             // keep this restriction for rolling certificate usage
                             // to make sure the response certificate is one of those specified in metadata
                             throw new Error('ERROR_UNMATCH_CERTIFICATE_DECLARATION_IN_METADATA');
                         }
-                        sig.keyInfoProvider = new _this.getKeyInfo(x509Certificate_1);
+                        sig.keyInfoProvider = new this.getKeyInfo(x509Certificate);
                     }
                 }
                 sig.loadSignature(signatureNode);
@@ -313,19 +275,19 @@ var libSaml = function () {
             // response must be signed, either entire document or assertion
             // default we will take the assertion section under root
             if (messageSignatureNode.length === 1) {
-                var node = xpath_1.select("/*[contains(local-name(), 'Response') or contains(local-name(), 'Request')]/*[local-name(.)='Assertion']", doc);
+                const node = xpath_1.select("/*[contains(local-name(), 'Response') or contains(local-name(), 'Request')]/*[local-name(.)='Assertion']", doc);
                 if (node.length === 1) {
                     assertionNode = node[0].toString();
                 }
             }
             if (assertionSignatureNode.length === 1) {
-                var verifiedAssertionInfo = extractor_1.extract(assertionSignatureNode[0].toString(), [{
+                const verifiedAssertionInfo = extractor_1.extract(assertionSignatureNode[0].toString(), [{
                         key: 'refURI',
                         localPath: ['Signature', 'SignedInfo', 'Reference'],
                         attributes: ['URI']
                     }]);
                 // get the assertion supposed to be the one should be verified
-                var desiredAssertionInfo = extractor_1.extract(doc.toString(), [{
+                const desiredAssertionInfo = extractor_1.extract(doc.toString(), [{
                         key: 'id',
                         localPath: ['~Response', 'Assertion'],
                         attributes: ['ID']
@@ -338,10 +300,10 @@ var libSaml = function () {
                 // Signatures MUST contain a single <ds:Reference> containing a same-document reference to the ID
                 // attribute value of the root element of the assertion or protocol message being signed. For example, if the
                 // ID attribute value is "foo", then the URI attribute in the <ds:Reference> element MUST be "#foo".
-                if (verifiedAssertionInfo.refURI !== "#" + desiredAssertionInfo.id) {
+                if (verifiedAssertionInfo.refURI !== `#${desiredAssertionInfo.id}`) {
                     throw new Error('ERR_POTENTIAL_WRAPPING_ATTACK');
                 }
-                var verifiedDoc = extractor_1.extract(doc.toString(), [{
+                const verifiedDoc = extractor_1.extract(doc.toString(), [{
                         key: 'assertion',
                         localPath: ['~Response', 'Assertion'],
                         attributes: [],
@@ -357,29 +319,28 @@ var libSaml = function () {
         * @param  {string} certString    declares the certificate String
         * @return {object} object used in xml module
         */
-        createKeySection: function (use, certString) {
-            var _a, _b, _c;
-            return _a = {},
-                _a['KeyDescriptor'] = [
+        createKeySection(use, certString) {
+            return {
+                ['KeyDescriptor']: [
                     {
-                        _attr: { use: use },
+                        _attr: { use },
                     },
-                    (_b = {},
-                        _b['ds:KeyInfo'] = [
+                    {
+                        ['ds:KeyInfo']: [
                             {
                                 _attr: {
                                     'xmlns:ds': 'http://www.w3.org/2000/09/xmldsig#',
                                 },
                             },
-                            (_c = {},
-                                _c['ds:X509Data'] = [{
+                            {
+                                ['ds:X509Data']: [{
                                         'ds:X509Certificate': utility_1.default.normalizeCerString(certString),
                                     }],
-                                _c),
+                            },
                         ],
-                        _b)
+                    }
                 ],
-                _a;
+            };
         },
         /**
         * @desc Constructs SAML message
@@ -389,13 +350,13 @@ var libSaml = function () {
         * @param  {string} signingAlgorithm          signing algorithm
         * @return {string} message signature
         */
-        constructMessageSignature: function (octetString, key, passphrase, isBase64, signingAlgorithm) {
+        constructMessageSignature(octetString, key, passphrase, isBase64, signingAlgorithm) {
             // Default returning base64 encoded signature
             // Embed with node-rsa module
-            var decryptedKey = new nrsa(utility_1.default.readPrivateKey(key, passphrase), {
+            const decryptedKey = new nrsa(utility_1.default.readPrivateKey(key, passphrase), {
                 signingScheme: getSigningScheme(signingAlgorithm),
             });
-            var signature = decryptedKey.sign(octetString);
+            const signature = decryptedKey.sign(octetString);
             // Use private key to sign data
             return isBase64 !== false ? signature.toString('base64') : signature;
         },
@@ -407,10 +368,10 @@ var libSaml = function () {
         * @param  {string} verifyAlgorithm            algorithm used to verify
         * @return {boolean} verification result
         */
-        verifyMessageSignature: function (metadata, octetString, signature, verifyAlgorithm) {
-            var signCert = metadata.getX509Certificate(certUse.signing);
-            var signingScheme = getSigningScheme(verifyAlgorithm);
-            var key = new nrsa(utility_1.default.getPublicKeyPemFromCertificate(signCert), { signingScheme: signingScheme });
+        verifyMessageSignature(metadata, octetString, signature, verifyAlgorithm) {
+            const signCert = metadata.getX509Certificate(certUse.signing);
+            const signingScheme = getSigningScheme(verifyAlgorithm);
+            const key = new nrsa(utility_1.default.getPublicKeyPemFromCertificate(signCert), { signingScheme });
             return key.verify(new Buffer(octetString), signature);
         },
         /**
@@ -418,13 +379,12 @@ var libSaml = function () {
         * @param  {string} x509Certificate certificate
         * @return {string} public key
         */
-        getKeyInfo: function (x509Certificate, signatureConfig) {
-            if (signatureConfig === void 0) { signatureConfig = {}; }
-            this.getKeyInfo = function (key) {
-                var prefix = signatureConfig.prefix ? signatureConfig.prefix + ":" : '';
-                return "<" + prefix + "X509Data><" + prefix + "X509Certificate>" + x509Certificate + "</" + prefix + "X509Certificate></" + prefix + "X509Data>";
+        getKeyInfo: function (x509Certificate, signatureConfig = {}) {
+            this.getKeyInfo = key => {
+                const prefix = signatureConfig.prefix ? `${signatureConfig.prefix}:` : '';
+                return `<${prefix}X509Data><${prefix}X509Certificate>${x509Certificate}</${prefix}X509Certificate></${prefix}X509Data>`;
             };
-            this.getKey = function (keyInfo) {
+            this.getKey = keyInfo => {
                 return utility_1.default.getPublicKeyPemFromCertificate(x509Certificate).toString();
             };
         },
@@ -435,16 +395,16 @@ var libSaml = function () {
         * @param  {string} xml                      response in xml string format
         * @return {Promise} a promise to resolve the finalized xml
         */
-        encryptAssertion: function (sourceEntity, targetEntity, xml) {
+        encryptAssertion(sourceEntity, targetEntity, xml) {
             // Implement encryption after signature if it has
-            return new Promise(function (resolve, reject) {
+            return new Promise((resolve, reject) => {
                 if (!xml) {
                     return reject(new Error('ERR_UNDEFINED_ASSERTION'));
                 }
-                var sourceEntitySetting = sourceEntity.entitySetting;
-                var targetEntityMetadata = targetEntity.entityMeta;
-                var doc = new dom().parseFromString(xml);
-                var assertions = xpath_1.select("//*[local-name(.)='Assertion']", doc);
+                const sourceEntitySetting = sourceEntity.entitySetting;
+                const targetEntityMetadata = targetEntity.entityMeta;
+                const doc = new dom().parseFromString(xml);
+                const assertions = xpath_1.select("//*[local-name(.)='Assertion']", doc);
                 if (!Array.isArray(assertions)) {
                     throw new Error('ERR_NO_ASSERTION');
                 }
@@ -459,7 +419,7 @@ var libSaml = function () {
                         pem: Buffer.from('-----BEGIN CERTIFICATE-----' + targetEntityMetadata.getX509Certificate(certUse.encrypt) + '-----END CERTIFICATE-----'),
                         encryptionAlgorithm: sourceEntitySetting.dataEncryptionAlgorithm,
                         keyEncryptionAlgorithm: sourceEntitySetting.keyEncryptionAlgorithm,
-                    }, function (err, res) {
+                    }, (err, res) => {
                         if (err) {
                             console.error(err);
                             return reject(new Error('ERR_EXCEPTION_OF_ASSERTION_ENCRYPTION'));
@@ -467,8 +427,8 @@ var libSaml = function () {
                         if (!res) {
                             return reject(new Error('ERR_UNDEFINED_ENCRYPTED_ASSERTION'));
                         }
-                        var encAssertionPrefix = sourceEntitySetting.tagPrefix.encryptedAssertion;
-                        var encryptAssertionNode = new dom().parseFromString("<" + encAssertionPrefix + ":EncryptedAssertion xmlns:" + encAssertionPrefix + "=\"" + urn_1.namespace.names.assertion + "\">" + res + "</" + encAssertionPrefix + ":EncryptedAssertion>");
+                        const { encryptedAssertion: encAssertionPrefix } = sourceEntitySetting.tagPrefix;
+                        const encryptAssertionNode = new dom().parseFromString(`<${encAssertionPrefix}:EncryptedAssertion xmlns:${encAssertionPrefix}="${urn_1.namespace.names.assertion}">${res}</${encAssertionPrefix}:EncryptedAssertion>`);
                         doc.replaceChild(encryptAssertionNode, assertions[0]);
                         return resolve(utility_1.default.base64Encode(doc.toString()));
                     });
@@ -486,16 +446,16 @@ var libSaml = function () {
         * @param {string} entireXML         response in xml string format
         * @return {function} a promise to get back the entire xml with decrypted assertion
         */
-        decryptAssertion: function (here, entireXML) {
-            return new Promise(function (resolve, reject) {
+        decryptAssertion(here, entireXML) {
+            return new Promise((resolve, reject) => {
                 // Implement decryption first then check the signature
                 if (!entireXML) {
                     return reject(new Error('ERR_UNDEFINED_ASSERTION'));
                 }
                 // Perform encryption depends on the setting of where the message is sent, default is false
-                var hereSetting = here.entitySetting;
-                var xml = new dom().parseFromString(entireXML);
-                var encryptedAssertions = xpath_1.select("/*[contains(local-name(), 'Response')]/*[local-name(.)='EncryptedAssertion']", xml);
+                const hereSetting = here.entitySetting;
+                const xml = new dom().parseFromString(entireXML);
+                const encryptedAssertions = xpath_1.select("/*[contains(local-name(), 'Response')]/*[local-name(.)='EncryptedAssertion']", xml);
                 if (!Array.isArray(encryptedAssertions)) {
                     throw new Error('ERR_UNDEFINED_ENCRYPTED_ASSERTION');
                 }
@@ -504,7 +464,7 @@ var libSaml = function () {
                 }
                 return xmlenc.decrypt(encryptedAssertions[0].toString(), {
                     key: utility_1.default.readPrivateKey(hereSetting.encPrivateKey, hereSetting.encPrivateKeyPass),
-                }, function (err, res) {
+                }, (err, res) => {
                     if (err) {
                         console.error(err);
                         return reject(new Error('ERR_EXCEPTION_OF_ASSERTION_DECRYPTION'));
@@ -512,7 +472,7 @@ var libSaml = function () {
                     if (!res) {
                         return reject(new Error('ERR_UNDEFINED_ENCRYPTED_ASSERTION'));
                     }
-                    var assertionNode = new dom().parseFromString(res);
+                    const assertionNode = new dom().parseFromString(res);
                     xml.replaceChild(assertionNode, encryptedAssertions[0]);
                     return resolve([xml.toString(), res]);
                 });
@@ -521,35 +481,25 @@ var libSaml = function () {
         /**
          * @desc Check if the xml string is valid and bounded
          */
-        isValidXml: function (input) {
-            return __awaiter(this, void 0, void 0, function () {
-                var validate, e_1;
-                return __generator(this, function (_a) {
-                    switch (_a.label) {
-                        case 0:
-                            validate = api_1.getContext().validate;
-                            /**
-                             * user can write a validate function that always returns
-                             * a resolved promise and skip the validator even in
-                             * production, user will take the responsibility if
-                             * they intend to skip the validation
-                             */
-                            if (!validate) {
-                                // otherwise, an error will be thrown
-                                return [2 /*return*/, Promise.reject('Your application is potentially vulnerable because no validation function found. Please read the documentation on how to setup the validator. (https://github.com/tngan/samlify#installation)')];
-                            }
-                            _a.label = 1;
-                        case 1:
-                            _a.trys.push([1, 3, , 4]);
-                            return [4 /*yield*/, validate(input)];
-                        case 2: return [2 /*return*/, _a.sent()];
-                        case 3:
-                            e_1 = _a.sent();
-                            throw e_1;
-                        case 4: return [2 /*return*/];
-                    }
-                });
-            });
+        async isValidXml(input) {
+            // check if global api contains the validate function
+            const { validate } = api_1.getContext();
+            /**
+             * user can write a validate function that always returns
+             * a resolved promise and skip the validator even in
+             * production, user will take the responsibility if
+             * they intend to skip the validation
+             */
+            if (!validate) {
+                // otherwise, an error will be thrown
+                return Promise.reject('Your application is potentially vulnerable because no validation function found. Please read the documentation on how to setup the validator. (https://github.com/tngan/samlify#installation)');
+            }
+            try {
+                return await validate(input);
+            }
+            catch (e) {
+                throw e;
+            }
         },
     };
 };
diff --git a/node_modules/samlify/build/src/libsaml.js.map b/node_modules/samlify/build/src/libsaml.js.map
index 1ca6ce4..dc393b7 100644
--- a/node_modules/samlify/build/src/libsaml.js.map
+++ b/node_modules/samlify/build/src/libsaml.js.map
@@ -1 +1 @@
-{"version":3,"file":"libsaml.js","sourceRoot":"","sources":["../../src/libsaml.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"libsaml.js","sourceRoot":"","sources":["../../src/libsaml.ts"],"names":[],"mappings":";AAAA;;;;EAIE;;AAEF,mCAAmC;AACnC,uCAA2D;AAC3D,+BAAuD;AACvD,iCAA8C;AAE9C,iCAAiC;AACjC,2CAAoD;AACpD,mDAAmD;AACnD,2CAAsC;AACtC,yCAAkC;AAClC,+BAAmC;AAEnC,MAAM,mBAAmB,GAAG,gBAAU,CAAC,SAAS,CAAC;AACjD,MAAM,gBAAgB,GAAG,gBAAU,CAAC,MAAM,CAAC;AAC3C,MAAM,OAAO,GAAG,aAAO,CAAC,OAAO,CAAC;AAChC,MAAM,SAAS,GAAG,aAAO,CAAC,SAAS,CAAC;AACpC,MAAM,GAAG,GAAG,kBAAS,CAAC;AAiFtB,MAAM,OAAO,GAAG,GAAG,EAAE;IAEnB;;;MAGE;IACF,SAAS,mBAAmB,CAAC,IAAY;QACvC,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,SAAS,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;YACzE,OAAO,aAAa,CAAC;SACtB;QACD,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,SAAS,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;YAC3E,OAAO,cAAc,CAAC;SACvB;QACD,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAChD,CAAC;IACD;;OAEG;IACH,MAAM,gBAAgB,GAAG;QACvB,4CAA4C,EAAE,MAAM;QACpD,mDAAmD,EAAE,QAAQ;QAC7D,mDAAmD,EAAE,QAAQ;KAC9D,CAAC;IACF;;;MAGE;IACF,MAAM,2BAA2B,GAAG;QAClC,OAAO,EAAE,4cAA4c;KACtd,CAAC;IACF;;;MAGE;IACF,MAAM,4BAA4B,GAAG;QACnC,OAAO,EAAE,mUAAmU;KAC7U,CAAC;IACF;;;MAGE;IACF,MAAM,4BAA4B,GAAG;QACnC,OAAO,EAAE,qrCAAqrC;QAC9rC,UAAU,EAAE,EAAE;KACf,CAAC;IACF;;;MAGE;IACF,MAAM,6BAA6B,GAAG;QACpC,OAAO,EAAE,6WAA6W;KACvX,CAAC;IACF;;;;;MAKE;IACF,SAAS,gBAAgB,CAAC,MAAe;QACvC,IAAI,MAAM,EAAE;YACV,MAAM,QAAQ,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;YAC1C,IAAI,CAAC,CAAC,QAAQ,KAAK,SAAS,CAAC,EAAE;gBAC7B,OAAO,QAAQ,CAAC;aACjB;SACF;QACD,OAAO,gBAAgB,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC,CAAC,gBAAgB;IACzE,CAAC;IACD;;;;;MAKE;IACF,SAAS,eAAe,CAAC,MAAc;QACrC,MAAM,SAAS,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;QAC3C,IAAI,CAAC,CAAC,SAAS,KAAK,SAAS,CAAC,EAAE;YAC9B,OAAO,SAAS,CAAC;SAClB;QACD,OAAO,IAAI,CAAC,CAAC,gBAAgB;IAC/B,CAAC;IACD;;;;;;MAME;IACF,SAAS,WAAW,CAAC,KAAK,EAAE,YAAsB;QAChD,IAAI,kBAAQ,CAAC,KAAK,CAAC,EAAE;YACnB,OAAO,YAAY,KAAK,IAAI,CAAC,CAAC,CAAC,qBAAqB,GAAG,KAAK,GAAG,WAAW,CAAC,CAAC,CAAC,qBAAqB,GAAG,KAAK,GAAG,IAAI,CAAC;SACnH;QACD,OAAO,qBAAqB,GAAG,KAAK,CAAC,IAAI,GAAG,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC;IAClE,CAAC;IAED;;;;;;OAMG;IACH,SAAS,OAAO,CAAC,MAAc,EAAE,OAAe;QAC9C,MAAM,YAAY,GAAG,mBAAS,CAAC,OAAO,CAAC,CAAC;QACxC,OAAO,MAAM,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAC/E,CAAC;IAED,OAAO;QAEL,WAAW;QACX,mBAAmB;QACnB,2BAA2B;QAC3B,4BAA4B;QAC5B,4BAA4B;QAC5B,6BAA6B;QAE7B;;;;;UAKE;QACF,kBAAkB,CAAC,MAAc,EAAE,SAAc;YAC/C,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBACjC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,CAAC,CAAC,CAAC;YACH,OAAO,MAAM,CAAC;QAChB,CAAC;QACD;;;;UAIE;QACF,yBAAyB,CAAC,UAAoC;YAC5D,MAAM,IAAI,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,YAAY,EAAE,YAAY,EAAE,aAAa,EAAE,EAAE,EAAE;gBACxG,MAAM,mBAAmB,GAAG,kCAAkC,CAAC;gBAC/D,MAAM,oBAAoB,GAAG,2CAA2C,CAAC;gBACzE,OAAO,yBAAyB,IAAI,iBAAiB,UAAU,oCAAoC,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,mBAAmB,gBAAgB,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,oBAAoB,eAAe,YAAY,MAAM,OAAO,CAAC,MAAM,EAAE,QAAQ,CAAC,0CAA0C,CAAC;YAC/T,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACZ,OAAO,4BAA4B,IAAI,4BAA4B,CAAC;QACtE,CAAC;QACD;;;;;;;;;;UAUE;QACF,sBAAsB,CAAC,IAA0B;YAC/C,MAAM,EACJ,cAAc,EACd,iBAAiB,EACjB,UAAU,EACV,cAAc,EACd,kBAAkB,GAAG,mBAAmB,CAAC,UAAU,EACnD,wBAAwB,GAAG;gBACzB,uDAAuD;gBACvD,yCAAyC;aAC1C,EACD,WAAW,EACX,eAAe,EACf,cAAc,GAAG,IAAI,EACrB,eAAe,GAAG,KAAK,GACxB,GAAG,IAAI,CAAC;YACT,MAAM,GAAG,GAAG,IAAI,sBAAS,EAAE,CAAC;YAC5B,sCAAsC;YACtC,IAAI,iBAAiB,EAAE;gBACrB,GAAG,CAAC,YAAY,CACd,iBAAiB,EACjB,IAAI,CAAC,wBAAwB,EAC7B,eAAe,CAAC,kBAAkB,CAAC,CACpC,CAAC;aACH;YACD,IAAI,eAAe,EAAE;gBACnB,GAAG,CAAC,YAAY;gBACd,6BAA6B;gBAC7B,IAAI,EACJ,wBAAwB,EACxB,eAAe,CAAC,kBAAkB,CAAC,EACnC,EAAE,EACF,EAAE,EACF,EAAE,EACF,KAAK,CACN,CAAC;aACH;YACD,GAAG,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;YAC5C,GAAG,CAAC,eAAe,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;YACxE,GAAG,CAAC,UAAU,GAAG,iBAAO,CAAC,cAAc,CAAC,UAAU,EAAE,cAAc,EAAE,IAAI,CAAC,CAAC;YAC1E,IAAI,eAAe,EAAE;gBACnB,GAAG,CAAC,gBAAgB,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;aACvD;iBAAM;gBACL,GAAG,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;aACtC;YACD,OAAO,cAAc,KAAK,KAAK,CAAC,CAAC,CAAC,iBAAO,CAAC,YAAY,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;QAClG,CAAC;QACD;;;;;;UAME;QACF,eAAe,CAAC,GAAW,EAAE,IAA8B;YAEzD,MAAM,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC3C,iIAAiI;YACjI,sDAAsD;YACtD,MAAM,qBAAqB,GAAG,0GAA0G,CAAC;YACzI,wDAAwD;YACxD,MAAM,uBAAuB,GAAG,uIAAuI,CAAC;YACxK,6DAA6D;YAC7D,MAAM,qBAAqB,GAAG,6OAA6O,CAAC;YAE5Q,4BAA4B;YAC5B,IAAI,SAAS,GAAQ,EAAE,CAAC;YACxB,IAAI,aAAa,GAAkB,IAAI,CAAC;YACxC,MAAM,oBAAoB,GAAG,cAAM,CAAC,qBAAqB,EAAE,GAAG,CAAC,CAAC;YAChE,MAAM,sBAAsB,GAAG,cAAM,CAAC,uBAAuB,EAAE,GAAG,CAAC,CAAC;YACpE,MAAM,mBAAmB,GAAG,cAAM,CAAC,qBAAqB,EAAE,GAAG,CAAC,CAAC;YAE/D,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;YACnD,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;YAErD,yCAAyC;YACzC,IAAI,mBAAmB,CAAC,MAAM,KAAK,CAAC,EAAE;gBACpC,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;aAClD;YAED,iDAAiD;YACjD,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC1B,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;aACvC;YAED,MAAM,GAAG,GAAG,IAAI,sBAAS,EAAE,CAAC;YAC5B,IAAI,QAAQ,GAAG,IAAI,CAAC;YACpB,4BAA4B;YAC5B,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE;gBAEhC,GAAG,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;gBAEjD,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACnC,MAAM,IAAI,KAAK,CAAC,0CAA0C,CAAC,CAAC;iBAC7D;gBAED,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,GAAG,CAAC,eAAe,GAAG,IAAI,wBAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACrD;gBAED,IAAI,IAAI,CAAC,QAAQ,EAAE;oBAEjB,MAAM,eAAe,GAAG,cAAM,CAAC,uCAAuC,EAAE,aAAa,CAAQ,CAAC;oBAC9F,0BAA0B;oBAC1B,IAAI,YAAY,GAAQ,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBAC1E,oEAAoE;oBACpE,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE;wBAC/B,YAAY,GAAG,qBAAW,CAAC,YAAY,CAAC,CAAC;qBAC1C;yBAAM,IAAI,OAAO,YAAY,KAAK,QAAQ,EAAE;wBAC3C,YAAY,GAAG,CAAC,YAAY,CAAC,CAAC;qBAC/B;oBACD,mCAAmC;oBACnC,YAAY,GAAG,YAAY,CAAC,GAAG,CAAC,iBAAO,CAAC,kBAAkB,CAAC,CAAC;oBAE5D,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;wBAChC,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;qBAC5C;oBAED,kCAAkC;oBAClC,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;wBAChC,MAAM,mBAAmB,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;wBAC/D,MAAM,eAAe,GAAG,iBAAO,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,CAAC;wBAExE,IACE,YAAY,CAAC,MAAM,IAAI,CAAC;4BACxB,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,eAAe,CAAC,IAAI,EAAE,CAAC,EAClE;4BACA,sDAAsD;4BACtD,8EAA8E;4BAC9E,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;yBACtE;wBAED,GAAG,CAAC,eAAe,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;qBAE5D;iBAEF;gBAED,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;gBAEjC,GAAG,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;gBAE/B,QAAQ,GAAG,QAAQ,IAAI,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;gBAE1D,kFAAkF;gBAClF,IAAI,CAAC,QAAQ,EAAE;oBACb,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;iBACnD;YAEH,CAAC,CAAC,CAAC;YAEH,+DAA+D;YAC/D,wDAAwD;YACxD,IAAI,oBAAoB,CAAC,MAAM,KAAK,CAAC,EAAE;gBACrC,MAAM,IAAI,GAAG,cAAM,CAAC,0GAA0G,EAAE,GAAG,CAAC,CAAC;gBACrI,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;oBACrB,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;iBACpC;aACF;YAED,IAAI,sBAAsB,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvC,MAAM,qBAAqB,GAAG,mBAAO,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC;wBAC3E,GAAG,EAAE,QAAQ;wBACb,SAAS,EAAE,CAAC,WAAW,EAAE,YAAY,EAAE,WAAW,CAAC;wBACnD,UAAU,EAAE,CAAC,KAAK,CAAC;qBACpB,CAAC,CAAC,CAAC;gBACJ,8DAA8D;gBAC9D,MAAM,oBAAoB,GAAG,mBAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC;wBACpD,GAAG,EAAE,IAAI;wBACT,SAAS,EAAE,CAAC,WAAW,EAAE,WAAW,CAAC;wBACrC,UAAU,EAAE,CAAC,IAAI,CAAC;qBACnB,CAAC,CAAC,CAAC;gBACJ,mBAAmB;gBACnB,wGAAwG;gBACxG,yGAAyG;gBACzG,wGAAwG;gBACxG,gEAAgE;gBAChE,iGAAiG;gBACjG,6GAA6G;gBAC7G,oGAAoG;gBACpG,IAAI,qBAAqB,CAAC,MAAM,KAAK,IAAI,oBAAoB,CAAC,EAAE,EAAE,EAAE;oBAClE,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;iBAClD;gBACD,MAAM,WAAW,GAAG,mBAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC;wBAC3C,GAAG,EAAE,WAAW;wBAChB,SAAS,EAAE,CAAC,WAAW,EAAE,WAAW,CAAC;wBACrC,UAAU,EAAE,EAAE;wBACd,OAAO,EAAE,IAAI;qBACd,CAAC,CAAC,CAAC;gBACJ,aAAa,GAAG,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;aAClD;YAED,OAAO,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;QACnC,CAAC;QACD;;;;;UAKE;QACF,gBAAgB,CAAC,GAAW,EAAE,UAA2B;YACvD,OAAO;gBACL,CAAC,eAAe,CAAC,EAAE;oBACjB;wBACE,KAAK,EAAE,EAAE,GAAG,EAAE;qBACf;oBACD;wBACE,CAAC,YAAY,CAAC,EAAE;4BACd;gCACE,KAAK,EAAE;oCACL,UAAU,EAAE,oCAAoC;iCACjD;6BACF;4BACD;gCACE,CAAC,aAAa,CAAC,EAAE,CAAC;wCAChB,oBAAoB,EAAE,iBAAO,CAAC,kBAAkB,CAAC,UAAU,CAAC;qCAC7D,CAAC;6BACH;yBACF;qBACF;iBAAC;aACL,CAAC;QACJ,CAAC;QACD;;;;;;;UAOE;QACF,yBAAyB,CAAC,WAAmB,EAAE,GAAW,EAAE,UAAmB,EAAE,QAAkB,EAAE,gBAAyB;YAC5H,6CAA6C;YAC7C,6BAA6B;YAC7B,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,iBAAO,CAAC,cAAc,CAAC,GAAG,EAAE,UAAU,CAAC,EAAE;gBACrE,aAAa,EAAE,gBAAgB,CAAC,gBAAgB,CAAC;aAClD,CAAC,CAAC;YACH,MAAM,SAAS,GAAG,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACjD,+BAA+B;YAC/B,OAAO,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACvE,CAAC;QACD;;;;;;;UAOE;QACF,sBAAsB,CAAC,QAAQ,EAAE,WAAmB,EAAE,SAA0B,EAAE,eAAwB;YACxG,MAAM,QAAQ,GAAG,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YAC9D,MAAM,aAAa,GAAG,gBAAgB,CAAC,eAAe,CAAC,CAAC;YACxD,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC,iBAAO,CAAC,8BAA8B,CAAC,QAAQ,CAAC,EAAE,EAAE,aAAa,EAAE,CAAC,CAAC;YAC1F,OAAO,GAAG,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,WAAW,CAAC,EAAE,SAAS,CAAC,CAAC;QACxD,CAAC;QACD;;;;UAIE;QACF,UAAU,EAAE,UAAS,eAAuB,EAAE,kBAAuB,EAAE;YACrE,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,EAAE;gBACtB,MAAM,MAAM,GAAG,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC1E,OAAO,IAAI,MAAM,aAAa,MAAM,mBAAmB,eAAe,KAAK,MAAM,qBAAqB,MAAM,WAAW,CAAC;YAC1H,CAAC,CAAC;YACF,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,EAAE;gBACtB,OAAO,iBAAO,CAAC,8BAA8B,CAAC,eAAe,CAAC,CAAC,QAAQ,EAAE,CAAC;YAC5E,CAAC,CAAC;QACJ,CAAC;QACD;;;;;;UAME;QACF,gBAAgB,CAAC,YAAY,EAAE,YAAY,EAAE,GAAY;YACvD,iDAAiD;YACjD,OAAO,IAAI,OAAO,CAAS,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gBAE7C,IAAI,CAAC,GAAG,EAAE;oBACR,OAAO,MAAM,CAAC,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC,CAAC;iBACrD;gBAED,MAAM,mBAAmB,GAAG,YAAY,CAAC,aAAa,CAAC;gBACvD,MAAM,oBAAoB,GAAG,YAAY,CAAC,UAAU,CAAC;gBACrD,MAAM,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;gBAC3C,MAAM,UAAU,GAAG,cAAM,CAAC,gCAAgC,EAAE,GAAG,CAAW,CAAC;gBAC3E,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;oBAC9B,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;iBACrC;gBACD,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;oBAC3B,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;iBAC3C;gBACD,8DAA8D;gBAC9D,IAAI,mBAAmB,CAAC,oBAAoB,EAAE;oBAC5C,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,EAAE;wBACvC,4BAA4B;wBAC5B,OAAO,EAAE,MAAM,CAAC,IAAI,CAAC,iBAAO,CAAC,8BAA8B,CAAC,oBAAoB,CAAC,kBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;wBAC/I,GAAG,EAAE,MAAM,CAAC,IAAI,CAAC,6BAA6B,GAAG,oBAAoB,CAAC,kBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,2BAA2B,CAAC;wBACxI,mBAAmB,EAAE,mBAAmB,CAAC,uBAAuB;wBAChE,sBAAsB,EAAE,mBAAmB,CAAC,sBAAsB;qBACnE,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;wBACd,IAAI,GAAG,EAAE;4BACP,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;4BACnB,OAAO,MAAM,CAAC,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC,CAAC;yBACnE;wBACD,IAAI,CAAC,GAAG,EAAE;4BACR,OAAO,MAAM,CAAC,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC,CAAC;yBAC/D;wBACD,MAAM,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,GAAG,mBAAmB,CAAC,SAAS,CAAC;wBACjF,MAAM,oBAAoB,GAAG,IAAI,GAAG,EAAE,CAAC,eAAe,CAAC,IAAI,kBAAkB,6BAA6B,kBAAkB,KAAK,eAAS,CAAC,KAAK,CAAC,SAAS,KAAK,GAAG,KAAK,kBAAkB,sBAAsB,CAAC,CAAC;wBACjN,GAAG,CAAC,YAAY,CAAC,oBAAoB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;wBACtD,OAAO,OAAO,CAAC,iBAAO,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;oBACvD,CAAC,CAAC,CAAC;iBACJ;qBAAM;oBACL,OAAO,OAAO,CAAC,iBAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,2BAA2B;iBACvE;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QACD;;;;;;;UAOE;QACF,gBAAgB,CAAC,IAAI,EAAE,SAAiB;YACtC,OAAO,IAAI,OAAO,CAAgB,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gBACpD,sDAAsD;gBACtD,IAAI,CAAC,SAAS,EAAE;oBACd,OAAO,MAAM,CAAC,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC,CAAC;iBACrD;gBACD,2FAA2F;gBAC3F,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;gBACvC,MAAM,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBACjD,MAAM,mBAAmB,GAAG,cAAM,CAAC,8EAA8E,EAAE,GAAG,CAAW,CAAC;gBAClI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,mBAAmB,CAAC,EAAE;oBACvC,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;iBACtD;gBACD,IAAI,mBAAmB,CAAC,MAAM,KAAK,CAAC,EAAE;oBACpC,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;iBAC3C;gBACD,OAAO,MAAM,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,EAAE;oBACvD,GAAG,EAAE,iBAAO,CAAC,cAAc,CAAC,WAAW,CAAC,aAAa,EAAE,WAAW,CAAC,iBAAiB,CAAC;iBACtF,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;oBACd,IAAI,GAAG,EAAE;wBACP,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACnB,OAAO,MAAM,CAAC,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC,CAAC;qBACnE;oBACD,IAAI,CAAC,GAAG,EAAE;wBACR,OAAO,MAAM,CAAC,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC,CAAC;qBAC/D;oBACD,MAAM,aAAa,GAAG,IAAI,GAAG,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;oBACrD,GAAG,CAAC,YAAY,CAAC,aAAa,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxD,OAAO,OAAO,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;gBACxC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;QACD;;WAEG;QACH,KAAK,CAAC,UAAU,CAAC,KAAa;YAE5B,qDAAqD;YACrD,MAAM,EAAE,QAAQ,EAAE,GAAG,gBAAU,EAAE,CAAC;YAElC;;;;;eAKG;YACH,IAAI,CAAC,QAAQ,EAAE;gBAEb,qCAAqC;gBACrC,OAAO,OAAO,CAAC,MAAM,CAAC,+LAA+L,CAAC,CAAC;aAExN;YAED,IAAI;gBACF,OAAO,MAAM,QAAQ,CAAC,KAAK,CAAC,CAAC;aAC9B;YAAC,OAAO,CAAC,EAAE;gBACV,MAAM,CAAC,CAAC;aACT;QAEH,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAEF,kBAAe,OAAO,EAAE,CAAC"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/metadata-idp.js b/node_modules/samlify/build/src/metadata-idp.js
index df60178..470291b 100644
--- a/node_modules/samlify/build/src/metadata-idp.js
+++ b/node_modules/samlify/build/src/metadata-idp.js
@@ -1,28 +1,16 @@
 "use strict";
-var __extends = (this && this.__extends) || (function () {
-    var extendStatics = function (d, b) {
-        extendStatics = Object.setPrototypeOf ||
-            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
-            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
-        return extendStatics(d, b);
-    };
-    return function (d, b) {
-        extendStatics(d, b);
-        function __() { this.constructor = d; }
-        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
-    };
-})();
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.IdpMetadata = void 0;
 /**
 * @file metadata-idp.ts
 * @author tngan
 * @desc  Metadata of identity provider
 */
-var metadata_1 = require("./metadata");
-var urn_1 = require("./urn");
-var libsaml_1 = require("./libsaml");
-var utility_1 = require("./utility");
-var xml = require("xml");
+const metadata_1 = require("./metadata");
+const urn_1 = require("./urn");
+const libsaml_1 = require("./libsaml");
+const utility_1 = require("./utility");
+const xml = require("xml");
 /*
  * @desc interface function
  */
@@ -30,58 +18,56 @@ function default_1(meta) {
     return new IdpMetadata(meta);
 }
 exports.default = default_1;
-var IdpMetadata = /** @class */ (function (_super) {
-    __extends(IdpMetadata, _super);
-    function IdpMetadata(meta) {
-        var _this = this;
-        var isFile = utility_1.isString(meta) || meta instanceof Buffer;
+class IdpMetadata extends metadata_1.default {
+    constructor(meta) {
+        const isFile = utility_1.isString(meta) || meta instanceof Buffer;
         if (!isFile) {
-            var _a = meta, entityID = _a.entityID, signingCert = _a.signingCert, encryptCert = _a.encryptCert, _b = _a.wantAuthnRequestsSigned, wantAuthnRequestsSigned = _b === void 0 ? false : _b, _c = _a.nameIDFormat, nameIDFormat = _c === void 0 ? [] : _c, _d = _a.singleSignOnService, singleSignOnService = _d === void 0 ? [] : _d, _e = _a.singleLogoutService, singleLogoutService = _e === void 0 ? [] : _e;
-            var IDPSSODescriptor_1 = [{
+            const { entityID, signingCert, encryptCert, wantAuthnRequestsSigned = false, nameIDFormat = [], singleSignOnService = [], singleLogoutService = [], } = meta;
+            const IDPSSODescriptor = [{
                     _attr: {
                         WantAuthnRequestsSigned: String(wantAuthnRequestsSigned),
                         protocolSupportEnumeration: urn_1.namespace.names.protocol,
                     },
                 }];
             if (signingCert) {
-                IDPSSODescriptor_1.push(libsaml_1.default.createKeySection('signing', signingCert));
+                IDPSSODescriptor.push(libsaml_1.default.createKeySection('signing', signingCert));
             }
             else {
                 //console.warn('Construct identity provider - missing signing certificate');
             }
             if (encryptCert) {
-                IDPSSODescriptor_1.push(libsaml_1.default.createKeySection('encryption', encryptCert));
+                IDPSSODescriptor.push(libsaml_1.default.createKeySection('encryption', encryptCert));
             }
             else {
                 //console.warn('Construct identity provider - missing encrypt certificate');
             }
             if (utility_1.isNonEmptyArray(nameIDFormat)) {
-                nameIDFormat.forEach(function (f) { return IDPSSODescriptor_1.push({ NameIDFormat: f }); });
+                nameIDFormat.forEach(f => IDPSSODescriptor.push({ NameIDFormat: f }));
             }
             if (utility_1.isNonEmptyArray(singleSignOnService)) {
-                singleSignOnService.forEach(function (a, indexCount) {
-                    var attr = {
+                singleSignOnService.forEach((a, indexCount) => {
+                    const attr = {
                         Binding: a.Binding,
                         Location: a.Location,
                     };
                     if (a.isDefault) {
                         attr.isDefault = true;
                     }
-                    IDPSSODescriptor_1.push({ SingleSignOnService: [{ _attr: attr }] });
+                    IDPSSODescriptor.push({ SingleSignOnService: [{ _attr: attr }] });
                 });
             }
             else {
                 throw new Error('ERR_IDP_METADATA_MISSING_SINGLE_SIGN_ON_SERVICE');
             }
             if (utility_1.isNonEmptyArray(singleLogoutService)) {
-                singleLogoutService.forEach(function (a, indexCount) {
-                    var attr = {};
+                singleLogoutService.forEach((a, indexCount) => {
+                    const attr = {};
                     if (a.isDefault) {
                         attr.isDefault = true;
                     }
                     attr.Binding = a.Binding;
                     attr.Location = a.Location;
-                    IDPSSODescriptor_1.push({ SingleLogoutService: [{ _attr: attr }] });
+                    IDPSSODescriptor.push({ SingleLogoutService: [{ _attr: attr }] });
                 });
             }
             else {
@@ -94,12 +80,12 @@ var IdpMetadata = /** @class */ (function (_super) {
                                 'xmlns': urn_1.namespace.names.metadata,
                                 'xmlns:assertion': urn_1.namespace.names.assertion,
                                 'xmlns:ds': 'http://www.w3.org/2000/09/xmldsig#',
-                                entityID: entityID,
+                                entityID,
                             },
-                        }, { IDPSSODescriptor: IDPSSODescriptor_1 }],
+                        }, { IDPSSODescriptor }],
                 }]);
         }
-        _this = _super.call(this, meta, [
+        super(meta, [
             {
                 key: 'wantAuthnRequestsSigned',
                 localPath: ['EntityDescriptor', 'IDPSSODescriptor'],
@@ -112,36 +98,34 @@ var IdpMetadata = /** @class */ (function (_super) {
                 attributePath: [],
                 attributes: ['Location']
             },
-        ]) || this;
-        return _this;
+        ]);
     }
     /**
     * @desc Get the preference whether it wants a signed request
     * @return {boolean} WantAuthnRequestsSigned
     */
-    IdpMetadata.prototype.isWantAuthnRequestsSigned = function () {
-        var was = this.meta.wantAuthnRequestsSigned;
+    isWantAuthnRequestsSigned() {
+        const was = this.meta.wantAuthnRequestsSigned;
         if (was === undefined) {
             return false;
         }
         return String(was) === 'true';
-    };
+    }
     /**
     * @desc Get the entity endpoint for single sign on service
     * @param  {string} binding      protocol binding (e.g. redirect, post)
     * @return {string/object} location
     */
-    IdpMetadata.prototype.getSingleSignOnService = function (binding) {
+    getSingleSignOnService(binding) {
         if (utility_1.isString(binding)) {
-            var bindName = urn_1.namespace.binding[binding];
-            var service = this.meta.singleSignOnService[bindName];
+            const bindName = urn_1.namespace.binding[binding];
+            const service = this.meta.singleSignOnService[bindName];
             if (service) {
                 return service;
             }
         }
         return this.meta.singleSignOnService;
-    };
-    return IdpMetadata;
-}(metadata_1.default));
+    }
+}
 exports.IdpMetadata = IdpMetadata;
 //# sourceMappingURL=metadata-idp.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/metadata-idp.js.map b/node_modules/samlify/build/src/metadata-idp.js.map
index be0ae12..1c5ead5 100644
--- a/node_modules/samlify/build/src/metadata-idp.js.map
+++ b/node_modules/samlify/build/src/metadata-idp.js.map
@@ -1 +1 @@
-{"version":3,"file":"metadata-idp.js","sourceRoot":"","sources":["../../src/metadata-idp.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"metadata-idp.js","sourceRoot":"","sources":["../../src/metadata-idp.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/metadata-sp.js b/node_modules/samlify/build/src/metadata-sp.js
index 419f082..48536fc 100644
--- a/node_modules/samlify/build/src/metadata-sp.js
+++ b/node_modules/samlify/build/src/metadata-sp.js
@@ -1,28 +1,16 @@
 "use strict";
-var __extends = (this && this.__extends) || (function () {
-    var extendStatics = function (d, b) {
-        extendStatics = Object.setPrototypeOf ||
-            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
-            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
-        return extendStatics(d, b);
-    };
-    return function (d, b) {
-        extendStatics(d, b);
-        function __() { this.constructor = d; }
-        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
-    };
-})();
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.SpMetadata = void 0;
 /**
 * @file metadata-sp.ts
 * @author tngan
 * @desc  Metadata of service provider
 */
-var metadata_1 = require("./metadata");
-var urn_1 = require("./urn");
-var libsaml_1 = require("./libsaml");
-var utility_1 = require("./utility");
-var xml = require("xml");
+const metadata_1 = require("./metadata");
+const urn_1 = require("./urn");
+const libsaml_1 = require("./libsaml");
+const utility_1 = require("./utility");
+const xml = require("xml");
 /*
  * @desc interface function
  */
@@ -33,26 +21,24 @@ exports.default = default_1;
 /**
 * @desc SP Metadata is for creating Service Provider, provides a set of API to manage the actions in SP.
 */
-var SpMetadata = /** @class */ (function (_super) {
-    __extends(SpMetadata, _super);
+class SpMetadata extends metadata_1.default {
     /**
     * @param  {object/string} meta (either xml string or configuation in object)
     * @return {object} prototypes including public functions
     */
-    function SpMetadata(meta) {
-        var _this = this;
-        var isFile = utility_1.isString(meta) || meta instanceof Buffer;
+    constructor(meta) {
+        const isFile = utility_1.isString(meta) || meta instanceof Buffer;
         // use object configuation instead of importing metadata file directly
         if (!isFile) {
-            var _a = meta, _b = _a.elementsOrder, elementsOrder = _b === void 0 ? urn_1.elementsOrder.default : _b, entityID = _a.entityID, signingCert = _a.signingCert, encryptCert = _a.encryptCert, _c = _a.authnRequestsSigned, authnRequestsSigned = _c === void 0 ? false : _c, _d = _a.wantAssertionsSigned, wantAssertionsSigned = _d === void 0 ? false : _d, _e = _a.wantMessageSigned, wantMessageSigned = _e === void 0 ? false : _e, signatureConfig = _a.signatureConfig, _f = _a.nameIDFormat, nameIDFormat = _f === void 0 ? [] : _f, _g = _a.singleLogoutService, singleLogoutService = _g === void 0 ? [] : _g, _h = _a.assertionConsumerService, assertionConsumerService = _h === void 0 ? [] : _h;
-            var descriptors_1 = {
+            const { elementsOrder = urn_1.elementsOrder.default, entityID, signingCert, encryptCert, authnRequestsSigned = false, wantAssertionsSigned = false, wantMessageSigned = false, signatureConfig, nameIDFormat = [], singleLogoutService = [], assertionConsumerService = [], } = meta;
+            const descriptors = {
                 KeyDescriptor: [],
                 NameIDFormat: [],
                 SingleLogoutService: [],
                 AssertionConsumerService: [],
                 AttributeConsumingService: [],
             };
-            var SPSSODescriptor_1 = [{
+            const SPSSODescriptor = [{
                     _attr: {
                         AuthnRequestsSigned: String(authnRequestsSigned),
                         WantAssertionsSigned: String(wantAssertionsSigned),
@@ -63,75 +49,72 @@ var SpMetadata = /** @class */ (function (_super) {
                 console.warn('Construct service provider - missing signatureConfig');
             }
             if (signingCert) {
-                descriptors_1.KeyDescriptor.push(libsaml_1.default.createKeySection('signing', signingCert).KeyDescriptor);
+                descriptors.KeyDescriptor.push(libsaml_1.default.createKeySection('signing', signingCert).KeyDescriptor);
             }
             else {
                 //console.warn('Construct service provider - missing signing certificate');
             }
             if (encryptCert) {
-                descriptors_1.KeyDescriptor.push(libsaml_1.default.createKeySection('encryption', encryptCert).KeyDescriptor);
+                descriptors.KeyDescriptor.push(libsaml_1.default.createKeySection('encryption', encryptCert).KeyDescriptor);
             }
             else {
                 //console.warn('Construct service provider - missing encrypt certificate');
             }
             if (utility_1.isNonEmptyArray(nameIDFormat)) {
-                nameIDFormat.forEach(function (f) { return descriptors_1.NameIDFormat.push(f); });
+                nameIDFormat.forEach(f => descriptors.NameIDFormat.push(f));
             }
             else {
                 // default value
-                descriptors_1.NameIDFormat.push(urn_1.namespace.format.emailAddress);
+                descriptors.NameIDFormat.push(urn_1.namespace.format.emailAddress);
             }
             if (utility_1.isNonEmptyArray(singleLogoutService)) {
-                singleLogoutService.forEach(function (a) {
-                    var attr = {
+                singleLogoutService.forEach(a => {
+                    const attr = {
                         Binding: a.Binding,
                         Location: a.Location,
                     };
                     if (a.isDefault) {
                         attr.isDefault = true;
                     }
-                    descriptors_1.SingleLogoutService.push([{ _attr: attr }]);
+                    descriptors.SingleLogoutService.push([{ _attr: attr }]);
                 });
             }
             if (utility_1.isNonEmptyArray(assertionConsumerService)) {
-                var indexCount_1 = 0;
-                assertionConsumerService.forEach(function (a) {
-                    var attr = {
-                        index: String(indexCount_1++),
+                let indexCount = 0;
+                assertionConsumerService.forEach(a => {
+                    const attr = {
+                        index: String(indexCount++),
                         Binding: a.Binding,
                         Location: a.Location,
                     };
                     if (a.isDefault) {
                         attr.isDefault = true;
                     }
-                    descriptors_1.AssertionConsumerService.push([{ _attr: attr }]);
+                    descriptors.AssertionConsumerService.push([{ _attr: attr }]);
                 });
             }
             else {
                 // console.warn('Missing endpoint of AssertionConsumerService');
             }
             // handle element order
-            var existedElements = elementsOrder.filter(function (name) { return utility_1.isNonEmptyArray(descriptors_1[name]); });
-            existedElements.forEach(function (name) {
-                descriptors_1[name].forEach(function (e) {
-                    var _a;
-                    return SPSSODescriptor_1.push((_a = {}, _a[name] = e, _a));
-                });
+            const existedElements = elementsOrder.filter(name => utility_1.isNonEmptyArray(descriptors[name]));
+            existedElements.forEach(name => {
+                descriptors[name].forEach(e => SPSSODescriptor.push({ [name]: e }));
             });
             // Re-assign the meta reference as a XML string|Buffer for use with the parent constructor
             meta = xml([{
                     EntityDescriptor: [{
                             _attr: {
-                                entityID: entityID,
+                                entityID,
                                 'xmlns': urn_1.namespace.names.metadata,
                                 'xmlns:assertion': urn_1.namespace.names.assertion,
                                 'xmlns:ds': 'http://www.w3.org/2000/09/xmldsig#',
                             },
-                        }, { SPSSODescriptor: SPSSODescriptor_1 }],
+                        }, { SPSSODescriptor }],
                 }]);
         }
         // Use the re-assigned meta object reference here
-        _this = _super.call(this, meta, [
+        super(meta, [
             {
                 key: 'spSSODescriptor',
                 localPath: ['EntityDescriptor', 'SPSSODescriptor'],
@@ -142,50 +125,48 @@ var SpMetadata = /** @class */ (function (_super) {
                 localPath: ['EntityDescriptor', 'SPSSODescriptor', 'AssertionConsumerService'],
                 attributes: ['Binding', 'Location', 'isDefault', 'index'],
             }
-        ]) || this;
-        return _this;
+        ]);
     }
     /**
     * @desc Get the preference whether it wants a signed assertion response
     * @return {boolean} Wantassertionssigned
     */
-    SpMetadata.prototype.isWantAssertionsSigned = function () {
+    isWantAssertionsSigned() {
         return this.meta.spSSODescriptor.wantAssertionsSigned === 'true';
-    };
+    }
     /**
     * @desc Get the preference whether it signs request
     * @return {boolean} Authnrequestssigned
     */
-    SpMetadata.prototype.isAuthnRequestSigned = function () {
+    isAuthnRequestSigned() {
         return this.meta.spSSODescriptor.authnRequestsSigned === 'true';
-    };
+    }
     /**
     * @desc Get the entity endpoint for assertion consumer service
     * @param  {string} binding         protocol binding (e.g. redirect, post)
     * @return {string/[string]} URL of endpoint(s)
     */
-    SpMetadata.prototype.getAssertionConsumerService = function (binding) {
+    getAssertionConsumerService(binding) {
         if (utility_1.isString(binding)) {
-            var location_1;
-            var bindName_1 = urn_1.namespace.binding[binding];
+            let location;
+            const bindName = urn_1.namespace.binding[binding];
             if (utility_1.isNonEmptyArray(this.meta.assertionConsumerService)) {
-                this.meta.assertionConsumerService.forEach(function (obj) {
-                    if (obj.binding === bindName_1) {
-                        location_1 = obj.location;
+                this.meta.assertionConsumerService.forEach(obj => {
+                    if (obj.binding === bindName) {
+                        location = obj.location;
                         return;
                     }
                 });
             }
             else {
-                if (this.meta.assertionConsumerService.binding === bindName_1) {
-                    location_1 = this.meta.assertionConsumerService.location;
+                if (this.meta.assertionConsumerService.binding === bindName) {
+                    location = this.meta.assertionConsumerService.location;
                 }
             }
-            return location_1;
+            return location;
         }
         return this.meta.assertionConsumerService;
-    };
-    return SpMetadata;
-}(metadata_1.default));
+    }
+}
 exports.SpMetadata = SpMetadata;
 //# sourceMappingURL=metadata-sp.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/metadata-sp.js.map b/node_modules/samlify/build/src/metadata-sp.js.map
index 55ee98a..975de1a 100644
--- a/node_modules/samlify/build/src/metadata-sp.js.map
+++ b/node_modules/samlify/build/src/metadata-sp.js.map
@@ -1 +1 @@
-{"version":3,"file":"metadata-sp.js","sourceRoot":"","sources":["../../src/metadata-sp.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"metadata-sp.js","sourceRoot":"","sources":["../../src/metadata-sp.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/metadata.js b/node_modules/samlify/build/src/metadata.js
index 43615f8..29d3bf5 100644
--- a/node_modules/samlify/build/src/metadata.js
+++ b/node_modules/samlify/build/src/metadata.js
@@ -5,17 +5,16 @@ Object.defineProperty(exports, "__esModule", { value: true });
 * @author tngan
 * @desc An abstraction for metadata of identity provider and service provider
 */
-var fs = require("fs");
-var urn_1 = require("./urn");
-var extractor_1 = require("./extractor");
-var utility_1 = require("./utility");
-var Metadata = /** @class */ (function () {
+const fs = require("fs");
+const urn_1 = require("./urn");
+const extractor_1 = require("./extractor");
+const utility_1 = require("./utility");
+class Metadata {
     /**
     * @param  {string | Buffer} metadata xml
     * @param  {object} extraParse for custom metadata extractor
     */
-    function Metadata(xml, extraParse) {
-        if (extraParse === void 0) { extraParse = []; }
+    constructor(xml, extraParse = []) {
         this.xmlString = xml.toString();
         this.meta = extractor_1.extract(this.xmlString, extraParse.concat([
             {
@@ -55,7 +54,7 @@ var Metadata = /** @class */ (function () {
             }
         ]));
         // get shared certificate
-        var sharedCertificate = this.meta.sharedCertificate;
+        const sharedCertificate = this.meta.sharedCertificate;
         if (typeof sharedCertificate === 'string') {
             this.meta.certificate = {
                 signing: sharedCertificate,
@@ -72,73 +71,72 @@ var Metadata = /** @class */ (function () {
     * @desc Get the metadata in xml format
     * @return {string} metadata in xml format
     */
-    Metadata.prototype.getMetadata = function () {
+    getMetadata() {
         return this.xmlString;
-    };
+    }
     /**
     * @desc Export the metadata to specific file
     * @param {string} exportFile is the output file path
     */
-    Metadata.prototype.exportMetadata = function (exportFile) {
+    exportMetadata(exportFile) {
         fs.writeFileSync(exportFile, this.xmlString);
-    };
+    }
     /**
     * @desc Get the entityID in metadata
     * @return {string} entityID
     */
-    Metadata.prototype.getEntityID = function () {
+    getEntityID() {
         return this.meta.entityID;
-    };
+    }
     /**
     * @desc Get the x509 certificate declared in entity metadata
     * @param  {string} use declares the type of certificate
     * @return {string} certificate in string format
     */
-    Metadata.prototype.getX509Certificate = function (use) {
+    getX509Certificate(use) {
         return this.meta.certificate[use] || null;
-    };
+    }
     /**
     * @desc Get the support NameID format declared in entity metadata
     * @return {array} support NameID format
     */
-    Metadata.prototype.getNameIDFormat = function () {
+    getNameIDFormat() {
         return this.meta.nameIDFormat;
-    };
+    }
     /**
     * @desc Get the entity endpoint for single logout service
     * @param  {string} binding e.g. redirect, post
     * @return {string/object} location
     */
-    Metadata.prototype.getSingleLogoutService = function (binding) {
+    getSingleLogoutService(binding) {
         if (binding && utility_1.isString(binding)) {
-            var bindType_1 = urn_1.namespace.binding[binding];
-            var singleLogoutService = this.meta.singleLogoutService;
+            const bindType = urn_1.namespace.binding[binding];
+            let singleLogoutService = this.meta.singleLogoutService;
             if (!(singleLogoutService instanceof Array)) {
                 singleLogoutService = [singleLogoutService];
             }
-            var service = singleLogoutService.find(function (obj) { return obj.binding === bindType_1; });
+            const service = singleLogoutService.find(obj => obj.binding === bindType);
             if (service) {
                 return service.location;
             }
         }
         return this.meta.singleLogoutService;
-    };
+    }
     /**
     * @desc Get the support bindings
     * @param  {[string]} services
     * @return {[string]} support bindings
     */
-    Metadata.prototype.getSupportBindings = function (services) {
-        var supportBindings = [];
+    getSupportBindings(services) {
+        let supportBindings = [];
         if (services) {
-            supportBindings = services.reduce(function (acc, service) {
-                var supportBinding = Object.keys(service)[0];
+            supportBindings = services.reduce((acc, service) => {
+                const supportBinding = Object.keys(service)[0];
                 return acc.push(supportBinding);
             }, []);
         }
         return supportBindings;
-    };
-    return Metadata;
-}());
+    }
+}
 exports.default = Metadata;
 //# sourceMappingURL=metadata.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/metadata.js.map b/node_modules/samlify/build/src/metadata.js.map
index 2314f85..cef032d 100644
--- a/node_modules/samlify/build/src/metadata.js.map
+++ b/node_modules/samlify/build/src/metadata.js.map
@@ -1 +1 @@
-{"version":3,"file":"metadata.js","sourceRoot":"","sources":["../../src/metadata.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"metadata.js","sourceRoot":"","sources":["../../src/metadata.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/types.js b/node_modules/samlify/build/src/types.js
index dcb1f59..c27ff39 100644
--- a/node_modules/samlify/build/src/types.js
+++ b/node_modules/samlify/build/src/types.js
@@ -1,11 +1,12 @@
 "use strict";
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.ServiceProviderMetadata = exports.ServiceProviderConstructor = exports.IdentityProviderMetadata = exports.IdentityProviderConstructor = void 0;
 var entity_idp_1 = require("./entity-idp");
-exports.IdentityProviderConstructor = entity_idp_1.IdentityProvider;
+Object.defineProperty(exports, "IdentityProviderConstructor", { enumerable: true, get: function () { return entity_idp_1.IdentityProvider; } });
 var metadata_idp_1 = require("./metadata-idp");
-exports.IdentityProviderMetadata = metadata_idp_1.IdpMetadata;
+Object.defineProperty(exports, "IdentityProviderMetadata", { enumerable: true, get: function () { return metadata_idp_1.IdpMetadata; } });
 var entity_sp_1 = require("./entity-sp");
-exports.ServiceProviderConstructor = entity_sp_1.ServiceProvider;
+Object.defineProperty(exports, "ServiceProviderConstructor", { enumerable: true, get: function () { return entity_sp_1.ServiceProvider; } });
 var metadata_sp_1 = require("./metadata-sp");
-exports.ServiceProviderMetadata = metadata_sp_1.SpMetadata;
+Object.defineProperty(exports, "ServiceProviderMetadata", { enumerable: true, get: function () { return metadata_sp_1.SpMetadata; } });
 //# sourceMappingURL=types.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/types.js.map b/node_modules/samlify/build/src/types.js.map
index e854560..556d76e 100644
--- a/node_modules/samlify/build/src/types.js.map
+++ b/node_modules/samlify/build/src/types.js.map
@@ -1 +1 @@
-{"version":3,"file":"types.js","sourceRoot":"","sources":["../../src/types.ts"],"names":[],"mappings":";;AAEA,2CAA+E;AAAtE,mDAAA,gBAAgB,CAA+B;AACxD,+CAAyE;AAAhE,kDAAA,WAAW,CAA4B;AAEhD,yCAA4E;AAAnE,iDAAA,eAAe,CAA8B;AACtD,6CAAsE;AAA7D,gDAAA,UAAU,CAA2B"}
\ No newline at end of file
+{"version":3,"file":"types.js","sourceRoot":"","sources":["../../src/types.ts"],"names":[],"mappings":";;;AAEA,2CAA+E;AAAtE,yHAAA,gBAAgB,OAA+B;AACxD,+CAAyE;AAAhE,wHAAA,WAAW,OAA4B;AAEhD,yCAA4E;AAAnE,uHAAA,eAAe,OAA8B;AACtD,6CAAsE;AAA7D,sHAAA,UAAU,OAA2B"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/urn.js b/node_modules/samlify/build/src/urn.js
index 0cf8d9e..73860af 100644
--- a/node_modules/samlify/build/src/urn.js
+++ b/node_modules/samlify/build/src/urn.js
@@ -5,6 +5,7 @@
 * @desc  Includes all keywords need in samlify
 */
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.messageConfigurations = exports.elementsOrder = exports.wording = exports.algorithms = exports.tags = exports.namespace = exports.ParserType = exports.StatusCode = exports.MessageSignatureOrder = exports.BindingNamespace = void 0;
 var BindingNamespace;
 (function (BindingNamespace) {
     BindingNamespace["Redirect"] = "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect";
@@ -44,7 +45,7 @@ var StatusCode;
     StatusCode["UnknownPrincipal"] = "urn:oasis:names:tc:SAML:2.0:status:UnknownPrincipal";
     StatusCode["UnsupportedBinding"] = "urn:oasis:names:tc:SAML:2.0:status:UnsupportedBinding";
 })(StatusCode = exports.StatusCode || (exports.StatusCode = {}));
-var namespace = {
+const namespace = {
     binding: {
         redirect: 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect',
         post: 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST',
@@ -100,7 +101,7 @@ var namespace = {
     },
 };
 exports.namespace = namespace;
-var tags = {
+const tags = {
     request: {
         AllowCreate: '{AllowCreate}',
         AssertionConsumerServiceURL: '{AssertionConsumerServiceURL}',
@@ -133,14 +134,14 @@ var tags = {
     },
 };
 exports.tags = tags;
-var messageConfigurations = {
+const messageConfigurations = {
     signingOrder: {
         SIGN_THEN_ENCRYPT: 'sign-then-encrypt',
         ENCRYPT_THEN_SIGN: 'encrypt-then-sign',
     },
 };
 exports.messageConfigurations = messageConfigurations;
-var algorithms = {
+const algorithms = {
     signature: {
         RSA_SHA1: 'http://www.w3.org/2000/09/xmldsig#rsa-sha1',
         RSA_SHA256: 'http://www.w3.org/2001/04/xmldsig-more#rsa-sha256',
@@ -161,7 +162,7 @@ var algorithms = {
     digest: {
         'http://www.w3.org/2000/09/xmldsig#rsa-sha1': 'http://www.w3.org/2000/09/xmldsig#sha1',
         'http://www.w3.org/2001/04/xmldsig-more#rsa-sha256': 'http://www.w3.org/2001/04/xmlenc#sha256',
-        'http://www.w3.org/2001/04/xmldsig-more#rsa-sha512': 'http://www.w3.org/2001/04/xmlenc#sha512',
+        'http://www.w3.org/2001/04/xmldsig-more#rsa-sha512': 'http://www.w3.org/2001/04/xmlenc#sha512', // support hashing algorithm sha512 in xml-crypto after 0.8.0
     },
 };
 exports.algorithms = algorithms;
@@ -172,7 +173,7 @@ var ParserType;
     ParserType["LogoutRequest"] = "LogoutRequest";
     ParserType["LogoutResponse"] = "LogoutResponse";
 })(ParserType = exports.ParserType || (exports.ParserType = {}));
-var wording = {
+const wording = {
     urlParams: {
         samlRequest: 'SAMLRequest',
         samlResponse: 'SAMLResponse',
@@ -199,7 +200,7 @@ var wording = {
 exports.wording = wording;
 // https://wiki.shibboleth.net/confluence/display/CONCEPT/MetadataForSP
 // some idps restrict the order of elements in entity descriptors
-var elementsOrder = {
+const elementsOrder = {
     default: ['KeyDescriptor', 'NameIDFormat', 'SingleLogoutService', 'AssertionConsumerService'],
     onelogin: ['KeyDescriptor', 'NameIDFormat', 'SingleLogoutService', 'AssertionConsumerService'],
     shibboleth: ['KeyDescriptor', 'SingleLogoutService', 'NameIDFormat', 'AssertionConsumerService', 'AttributeConsumingService'],
diff --git a/node_modules/samlify/build/src/urn.js.map b/node_modules/samlify/build/src/urn.js.map
index 6e002c2..9bfc283 100644
--- a/node_modules/samlify/build/src/urn.js.map
+++ b/node_modules/samlify/build/src/urn.js.map
@@ -1 +1 @@
-{"version":3,"file":"urn.js","sourceRoot":"","sources":["../../src/urn.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"urn.js","sourceRoot":"","sources":["../../src/urn.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/utility.js b/node_modules/samlify/build/src/utility.js
index fb846df..e4d0357 100644
--- a/node_modules/samlify/build/src/utility.js
+++ b/node_modules/samlify/build/src/utility.js
@@ -1,41 +1,21 @@
 "use strict";
-var __read = (this && this.__read) || function (o, n) {
-    var m = typeof Symbol === "function" && o[Symbol.iterator];
-    if (!m) return o;
-    var i = m.call(o), r, ar = [], e;
-    try {
-        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
-    }
-    catch (error) { e = { error: error }; }
-    finally {
-        try {
-            if (r && !r.done && (m = i["return"])) m.call(i);
-        }
-        finally { if (e) throw e.error; }
-    }
-    return ar;
-};
-var __spread = (this && this.__spread) || function () {
-    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
-    return ar;
-};
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.notEmpty = exports.isNonEmptyArray = exports.readPrivateKey = exports.inflateString = exports.base64Decode = exports.isString = exports.get = exports.uniq = exports.last = exports.flattenDeep = exports.zipObject = void 0;
 /**
 * @file utility.ts
 * @author tngan
 * @desc  Library for some common functions (e.g. de/inflation, en/decoding)
 */
-var node_forge_1 = require("node-forge");
-var pako_1 = require("pako");
-var BASE64_STR = 'base64';
+const node_forge_1 = require("node-forge");
+const pako_1 = require("pako");
+const BASE64_STR = 'base64';
 /**
  * @desc Mimic lodash.zipObject
  * @param arr1 {string[]}
  * @param arr2 {[]}
  */
-function zipObject(arr1, arr2, skipDuplicated) {
-    if (skipDuplicated === void 0) { skipDuplicated = true; }
-    return arr1.reduce(function (res, l, i) {
+function zipObject(arr1, arr2, skipDuplicated = true) {
+    return arr1.reduce((res, l, i) => {
         if (skipDuplicated) {
             res[l] = arr2[i];
             return res;
@@ -59,7 +39,7 @@ exports.zipObject = zipObject;
  */
 function flattenDeep(input) {
     return Array.isArray(input)
-        ? input.reduce(function (a, b) { return a.concat(flattenDeep(b)); }, [])
+        ? input.reduce((a, b) => a.concat(flattenDeep(b)), [])
         : [input];
 }
 exports.flattenDeep = flattenDeep;
@@ -78,8 +58,8 @@ exports.last = last;
  * @param input {string[]}
  */
 function uniq(input) {
-    var set = new Set(input);
-    return __spread(set);
+    const set = new Set(input);
+    return [...set];
 }
 exports.uniq = uniq;
 /**
@@ -91,7 +71,7 @@ exports.uniq = uniq;
  */
 function get(obj, path, defaultValue) {
     return path.split('.')
-        .reduce(function (a, c) { return (a && a[c] ? a[c] : (defaultValue || null)); }, obj);
+        .reduce((a, c) => (a && a[c] ? a[c] : (defaultValue || null)), obj);
 }
 exports.get = get;
 /**
@@ -117,7 +97,7 @@ function base64Encode(message) {
 * @return {bytes/string}  decoded bytes/string depends on isBytes, default is {string}
 */
 function base64Decode(base64Message, isBytes) {
-    var bytes = Buffer.from(base64Message, BASE64_STR);
+    const bytes = Buffer.from(base64Message, BASE64_STR);
     return Boolean(isBytes) ? bytes : bytes.toString();
 }
 exports.base64Decode = base64Decode;
@@ -127,7 +107,7 @@ exports.base64Decode = base64Decode;
 * @return {string} compressed string
 */
 function deflateString(message) {
-    var input = Array.prototype.map.call(message, function (char) { return char.charCodeAt(0); });
+    const input = Array.prototype.map.call(message, char => char.charCodeAt(0));
     return Array.from(pako_1.deflate(input, { raw: true }));
 }
 /**
@@ -136,10 +116,10 @@ function deflateString(message) {
 * @return {string} decompressed string
 */
 function inflateString(compressedString) {
-    var inputBuffer = Buffer.from(compressedString, BASE64_STR);
-    var input = Array.prototype.map.call(inputBuffer.toString('binary'), function (char) { return char.charCodeAt(0); });
+    const inputBuffer = Buffer.from(compressedString, BASE64_STR);
+    const input = Array.prototype.map.call(inputBuffer.toString('binary'), char => char.charCodeAt(0));
     return Array.from(pako_1.inflate(input, { raw: true }))
-        .map(function (byte) { return String.fromCharCode(byte); })
+        .map(byte => String.fromCharCode(byte))
         .join('');
 }
 exports.inflateString = inflateString;
@@ -150,7 +130,7 @@ exports.inflateString = inflateString;
 * @return {string} A formatted certificate string
 */
 function _normalizeCerString(bin, format) {
-    return bin.toString().replace(/\n/g, '').replace(/\r/g, '').replace("-----BEGIN " + format + "-----", '').replace("-----END " + format + "-----", '').replace(/ /g, '');
+    return bin.toString().replace(/\n/g, '').replace(/\r/g, '').replace(`-----BEGIN ${format}-----`, '').replace(`-----END ${format}-----`, '').replace(/ /g, '');
 }
 /**
 * @desc Parse the .cer to string format without line break, header and footer
@@ -174,15 +154,14 @@ function normalizePemString(pemString) {
 * @return {string} URL
 */
 function getFullURL(req) {
-    return req.protocol + "://" + req.get('host') + req.originalUrl;
+    return `${req.protocol}://${req.get('host')}${req.originalUrl}`;
 }
 /**
 * @desc Parse input string, return default value if it is undefined
 * @param  {string/boolean}
 * @return {boolean}
 */
-function parseString(str, defaultValue) {
-    if (defaultValue === void 0) { defaultValue = ''; }
+function parseString(str, defaultValue = '') {
     return str || defaultValue;
 }
 /**
@@ -200,9 +179,9 @@ function applyDefault(obj1, obj2) {
 * @return {string} public key fetched from the certificate
 */
 function getPublicKeyPemFromCertificate(x509Certificate) {
-    var certDerBytes = node_forge_1.util.decode64(x509Certificate);
-    var obj = node_forge_1.asn1.fromDer(certDerBytes);
-    var cert = node_forge_1.pki.certificateFromAsn1(obj);
+    const certDerBytes = node_forge_1.util.decode64(x509Certificate);
+    const obj = node_forge_1.asn1.fromDer(certDerBytes);
+    const cert = node_forge_1.pki.certificateFromAsn1(obj);
     return node_forge_1.pki.publicKeyToPem(cert.publicKey);
 }
 /**
@@ -233,21 +212,21 @@ function notEmpty(value) {
     return value !== null && value !== undefined;
 }
 exports.notEmpty = notEmpty;
-var utility = {
-    isString: isString,
-    base64Encode: base64Encode,
-    base64Decode: base64Decode,
-    deflateString: deflateString,
-    inflateString: inflateString,
-    normalizeCerString: normalizeCerString,
-    normalizePemString: normalizePemString,
-    getFullURL: getFullURL,
-    parseString: parseString,
-    applyDefault: applyDefault,
-    getPublicKeyPemFromCertificate: getPublicKeyPemFromCertificate,
-    readPrivateKey: readPrivateKey,
-    convertToString: convertToString,
-    isNonEmptyArray: isNonEmptyArray,
+const utility = {
+    isString,
+    base64Encode,
+    base64Decode,
+    deflateString,
+    inflateString,
+    normalizeCerString,
+    normalizePemString,
+    getFullURL,
+    parseString,
+    applyDefault,
+    getPublicKeyPemFromCertificate,
+    readPrivateKey,
+    convertToString,
+    isNonEmptyArray,
 };
 exports.default = utility;
 //# sourceMappingURL=utility.js.map
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/utility.js.map b/node_modules/samlify/build/src/utility.js.map
index 8590f30..2e8243e 100644
--- a/node_modules/samlify/build/src/utility.js.map
+++ b/node_modules/samlify/build/src/utility.js.map
@@ -1 +1 @@
-{"version":3,"file":"utility.js","sourceRoot":"","sources":["../../src/utility.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"utility.js","sourceRoot":"","sources":["../../src/utility.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/samlify/build/src/validator.js b/node_modules/samlify/build/src/validator.js
index 0ee46f4..21cf532 100644
--- a/node_modules/samlify/build/src/validator.js
+++ b/node_modules/samlify/build/src/validator.js
@@ -1,32 +1,16 @@
 "use strict";
-var __read = (this && this.__read) || function (o, n) {
-    var m = typeof Symbol === "function" && o[Symbol.iterator];
-    if (!m) return o;
-    var i = m.call(o), r, ar = [], e;
-    try {
-        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
-    }
-    catch (error) { e = { error: error }; }
-    finally {
-        try {
-            if (r && !r.done && (m = i["return"])) m.call(i);
-        }
-        finally { if (e) throw e.error; }
-    }
-    return ar;
-};
 Object.defineProperty(exports, "__esModule", { value: true });
-function verifyTime(utcNotBefore, utcNotOnOrAfter, drift) {
-    if (drift === void 0) { drift = [0, 0]; }
-    var now = new Date();
+exports.verifyTime = void 0;
+function verifyTime(utcNotBefore, utcNotOnOrAfter, drift = [0, 0]) {
+    const now = new Date();
     if (!utcNotBefore && !utcNotOnOrAfter) {
         // show warning because user intends to have time check but the document doesn't include corresponding information
         console.warn('You intend to have time validation however the document doesn\'t include the valid range.');
         return true;
     }
-    var notBeforeLocal = null;
-    var notOnOrAfterLocal = null;
-    var _a = __read(drift, 2), notBeforeDrift = _a[0], notOnOrAfterDrift = _a[1];
+    let notBeforeLocal = null;
+    let notOnOrAfterLocal = null;
+    const [notBeforeDrift, notOnOrAfterDrift] = drift;
     if (utcNotBefore && !utcNotOnOrAfter) {
         notBeforeLocal = new Date(utcNotBefore);
         return +notBeforeLocal + notBeforeDrift <= +now;
diff --git a/node_modules/samlify/build/src/validator.js.map b/node_modules/samlify/build/src/validator.js.map
index 63de16e..e0379b9 100644
--- a/node_modules/samlify/build/src/validator.js.map
+++ b/node_modules/samlify/build/src/validator.js.map
@@ -1 +1 @@
-{"version":3,"file":"validator.js","sourceRoot":"","sources":["../../src/validator.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAGA,SAAS,UAAU,CACjB,YAAgC,EAChC,eAAmC,EACnC,KAA8B;IAA9B,sBAAA,EAAA,SAAyB,CAAC,EAAE,CAAC,CAAC;IAG9B,IAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;IAEvB,IAAI,CAAC,YAAY,IAAI,CAAC,eAAe,EAAE;QACrC,kHAAkH;QAClH,OAAO,CAAC,IAAI,CAAC,2FAA2F,CAAC,CAAC;QAC1G,OAAO,IAAI,CAAC;KACb;IAED,IAAI,cAAc,GAAgB,IAAI,CAAC;IACvC,IAAI,iBAAiB,GAAgB,IAAI,CAAC;IAEpC,IAAA,qBAA2C,EAA1C,sBAAc,EAAE,yBAA0B,CAAC;IAElD,IAAI,YAAY,IAAI,CAAC,eAAe,EAAE;QACpC,cAAc,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;QACxC,OAAO,CAAC,cAAc,GAAG,cAAc,IAAI,CAAC,GAAG,CAAC;KACjD;IACD,IAAI,CAAC,YAAY,IAAI,eAAe,EAAE;QACpC,iBAAiB,GAAG,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC;QAC9C,OAAO,CAAC,GAAG,GAAG,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;KACtD;IAED,cAAc,GAAG,IAAI,IAAI,CAAC,YAAa,CAAC,CAAC;IACzC,iBAAiB,GAAG,IAAI,IAAI,CAAC,eAAgB,CAAC,CAAC;IAE/C,OAAO,CACL,CAAC,cAAc,GAAG,cAAc,IAAI,CAAC,GAAG;QACxC,CAAC,GAAG,GAAG,CAAC,iBAAiB,GAAG,iBAAiB,CAC9C,CAAC;AAEJ,CAAC;AAGC,gCAAU"}
\ No newline at end of file
+{"version":3,"file":"validator.js","sourceRoot":"","sources":["../../src/validator.ts"],"names":[],"mappings":";;;AAGA,SAAS,UAAU,CACjB,YAAgC,EAChC,eAAmC,EACnC,QAAwB,CAAC,CAAC,EAAE,CAAC,CAAC;IAG9B,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;IAEvB,IAAI,CAAC,YAAY,IAAI,CAAC,eAAe,EAAE;QACrC,kHAAkH;QAClH,OAAO,CAAC,IAAI,CAAC,2FAA2F,CAAC,CAAC;QAC1G,OAAO,IAAI,CAAC;KACb;IAED,IAAI,cAAc,GAAgB,IAAI,CAAC;IACvC,IAAI,iBAAiB,GAAgB,IAAI,CAAC;IAE1C,MAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,GAAG,KAAK,CAAC;IAElD,IAAI,YAAY,IAAI,CAAC,eAAe,EAAE;QACpC,cAAc,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;QACxC,OAAO,CAAC,cAAc,GAAG,cAAc,IAAI,CAAC,GAAG,CAAC;KACjD;IACD,IAAI,CAAC,YAAY,IAAI,eAAe,EAAE;QACpC,iBAAiB,GAAG,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC;QAC9C,OAAO,CAAC,GAAG,GAAG,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;KACtD;IAED,cAAc,GAAG,IAAI,IAAI,CAAC,YAAa,CAAC,CAAC;IACzC,iBAAiB,GAAG,IAAI,IAAI,CAAC,eAAgB,CAAC,CAAC;IAE/C,OAAO,CACL,CAAC,cAAc,GAAG,cAAc,IAAI,CAAC,GAAG;QACxC,CAAC,GAAG,GAAG,CAAC,iBAAiB,GAAG,iBAAiB,CAC9C,CAAC;AAEJ,CAAC;AAGC,gCAAU"}
\ No newline at end of file
diff --git a/node_modules/samlify/src/binding-post.ts b/node_modules/samlify/src/binding-post.ts
index 9777a2a..520ae9c 100644
--- a/node_modules/samlify/src/binding-post.ts
+++ b/node_modules/samlify/src/binding-post.ts
@@ -118,7 +118,7 @@ async function base64LoginResponse(requestInfo: any = {}, entity: any, user: any
       NameIDFormat: selectedNameIDFormat,
       NameID: user.email || '',
       InResponseTo: get(requestInfo, 'extract.request.id', ''),
-      AuthnStatement: '',
+      AuthnStatement: '<saml:AuthnStatement AuthnInstant="{IssueInstant}"> <saml:AuthnContext><saml:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified</saml:AuthnContextClassRef></saml:AuthnContext></saml:AuthnStatement>',
       AttributeStatement: '',
     };
     if (idpSetting.loginResponseTemplate && customTagReplacement) {
@@ -128,6 +128,20 @@ async function base64LoginResponse(requestInfo: any = {}, entity: any, user: any
       if (requestInfo !== null) {
         tvalue.InResponseTo = requestInfo.extract.request.id;
       }
+
+      if (idpSetting?.loginResponseTemplate?.attributes) {
+        const attrUser = {}
+        Object.keys(user).forEach(key => {
+          const value = user[key]
+          attrUser[`attr${key.charAt(0).toUpperCase() + key.slice(1)}`] = value
+        })
+
+        tvalue.AttributeStatement = libsaml.attributeStatementBuilder(idpSetting.loginResponseTemplate.attributes)
+        tvalue.AttributeStatement = libsaml.replaceTagsByValue(tvalue.AttributeStatement, attrUser)
+      }
+
+      tvalue.AuthnStatement = libsaml.replaceTagsByValue(tvalue.AuthnStatement, tvalue)
+
       rawSamlResponse = libsaml.replaceTagsByValue(libsaml.defaultLoginResponseTemplate.context, tvalue);
     }
     const { privateKey, privateKeyPass, requestSignatureAlgorithm: signatureAlgorithm } = idpSetting;
diff --git a/node_modules/samlify/src/libsaml.ts b/node_modules/samlify/src/libsaml.ts
index 4159cbd..98b61f7 100644
--- a/node_modules/samlify/src/libsaml.ts
+++ b/node_modules/samlify/src/libsaml.ts
@@ -511,7 +511,7 @@ const libSaml = () => {
     * @param  {string} x509Certificate certificate
     * @return {string} public key
     */
-    getKeyInfo(x509Certificate: string, signatureConfig: any = {}) {
+    getKeyInfo: function(x509Certificate: string, signatureConfig: any = {}) {
       this.getKeyInfo = key => {
         const prefix = signatureConfig.prefix ? `${signatureConfig.prefix}:` : '';
         return `<${prefix}X509Data><${prefix}X509Certificate>${x509Certificate}</${prefix}X509Certificate></${prefix}X509Data>`;
diff --git a/node_modules/samlify/src/utility.ts b/node_modules/samlify/src/utility.ts
index 3efb4c7..f562162 100644
--- a/node_modules/samlify/src/utility.ts
+++ b/node_modules/samlify/src/utility.ts
@@ -114,7 +114,7 @@ export function inflateString(compressedString: string): string {
   const inputBuffer = Buffer.from(compressedString, BASE64_STR);
   const input = Array.prototype.map.call(inputBuffer.toString('binary'), char => char.charCodeAt(0));
   return Array.from(inflate(input, { raw: true }))
-    .map(byte => String.fromCharCode(byte))
+    .map(byte => String.fromCharCode(byte as number))
     .join('');
 }
 /**
diff --git a/node_modules/samlify/tsconfig.json b/node_modules/samlify/tsconfig.json
index 946e97a..ae13be6 100644
--- a/node_modules/samlify/tsconfig.json
+++ b/node_modules/samlify/tsconfig.json
@@ -1,18 +1,18 @@
 {
   "compilerOptions": {
-    "target": "es5",
+    "target": "es2021",
     "module": "commonjs",
     "moduleResolution": "node",
     "declaration": true,
     "declarationDir": "types",
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "downlevelIteration": true,
     "sourceMap": true,
     "outDir": "./build",
     "baseUrl": "./",
     "removeComments": false,
     "strictNullChecks": true,
+    "downlevelIteration": false,
     "paths": {},
     "lib": [
       "dom",
@@ -20,7 +20,7 @@
       "es2015.promise",
       "es2015.iterable",
       "es5"
-    ]
+    ],
   },
   "atom": { "rewriteTsconfig": false },
   "exclude": [
diff --git a/node_modules/samlify/types/src/libsaml.d.ts b/node_modules/samlify/types/src/libsaml.d.ts
index 6796690..bfee4e7 100644
--- a/node_modules/samlify/types/src/libsaml.d.ts
+++ b/node_modules/samlify/types/src/libsaml.d.ts
@@ -153,7 +153,7 @@ declare const _default: {
     * @param  {string} x509Certificate certificate
     * @return {string} public key
     */
-    getKeyInfo(x509Certificate: string, signatureConfig?: any): void;
+    getKeyInfo: (x509Certificate: string, signatureConfig?: any) => void;
     /**
     * @desc Encrypt the assertion section in Response
     * @param  {Entity} sourceEntity             source entity
diff --git a/node_modules/samlify/types/src/utility.d.ts b/node_modules/samlify/types/src/utility.d.ts
index 1ef6b17..38ec6d6 100644
--- a/node_modules/samlify/types/src/utility.d.ts
+++ b/node_modules/samlify/types/src/utility.d.ts
@@ -97,7 +97,7 @@ declare function applyDefault(obj1: any, obj2: any): any;
 * @param {string} x509 certificate
 * @return {string} public key fetched from the certificate
 */
-declare function getPublicKeyPemFromCertificate(x509Certificate: string): string;
+declare function getPublicKeyPemFromCertificate(x509Certificate: string): any;
 /**
 * @desc Read private key from pem-formatted string
 * @param {string | Buffer} keyString pem-formattted string
